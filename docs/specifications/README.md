# 技術仕様書（Specifications）

本ディレクトリには、genai-app-docsプロジェクトの詳細な技術仕様書を格納しています。

## 📖 読む順序

設計書は以下の順序で読むことを推奨します：

```text
1. Architecture（アーキテクチャ） → システム全体の構造を理解
2. Database（データベース） → データモデルを理解
3. Security（セキュリティ） → 認証・認可の仕組みを理解
4. API（API設計） → インターフェース仕様を理解
5. Infrastructure（インフラ） → 実行環境を理解
6. Operations（運用） → 運用方法を理解
```

---

## 📁 ディレクトリ構造

### 01. Architecture（アーキテクチャ設計）

システム全体のアーキテクチャと主要コンポーネントの設計。

| ファイル | 説明 | ステータス |
|---------|------|-----------|
| `01-system-design.md` | システム設計書（全体像、技術スタック、レイヤードアーキテクチャ） | 🔜 未作成 |
| `02-component-design.md` | コンポーネント設計書（各レイヤーの詳細設計） | 🔜 未作成 |

### 02. Database（データベース設計）

データモデル、テーブル定義、リレーションシップの設計。

| ファイル | 説明 | ステータス |
|---------|------|-----------|
| `01-database-design.md` | データベース設計書（テーブル定義、制約、インデックス） | 🔜 未作成 |
| `02-er-diagram.md` | ER図（エンティティリレーションシップ図） | 🔜 未作成 |
| `03-migration-strategy.md` | マイグレーション戦略（Alembic運用） | 🔜 未作成 |

### 03. Security（セキュリティ設計）

認証、認可、セキュリティ対策の設計。

| ファイル | 説明 | ステータス |
|---------|------|-----------|
| `01-rbac-design.md` | **RBAC設計書（ロールベースアクセス制御）** | ✅ 作成済み |
| `02-authentication-design.md` | 認証設計（Azure AD、JWT、開発モード） | 🔜 未作成 |
| `03-security-implementation.md` | セキュリティ実装（OWASP対策、暗号化、監査ログ） | 🔜 未作成 |

### 04. API（API設計）

RESTful APIのエンドポイント、リクエスト/レスポンス仕様。

| ファイル | 説明 | ステータス |
|---------|------|-----------|
| `01-api-design.md` | API設計書（設計方針、バージョニング、エラー処理） | 🔜 未作成 |
| `02-endpoint-specifications.md` | エンドポイント仕様（全エンドポイントの詳細） | 🔜 未作成 |
| `03-response-schemas.md` | レスポンススキーマ（Pydanticスキーマ定義） | 🔜 未作成 |

### 05. Infrastructure（インフラ設計）

実行環境、ネットワーク、ストレージの設計。

| ファイル | 説明 | ステータス |
|---------|------|-----------|
| `01-infrastructure-design.md` | インフラ設計書（システム構成、ネットワーク、スケーリング） | 🔜 未作成 |
| `02-environment-configuration.md` | 環境設定（local/staging/production） | 🔜 未作成 |

### 06. Operations（運用設計）

デプロイメント、監視、メンテナンスの運用設計。

| ファイル | 説明 | ステータス |
|---------|------|-----------|
| `01-deployment-design.md` | デプロイ設計（CI/CD、リリースフロー） | 🔜 未作成 |
| `02-monitoring-design.md` | 監視設計（Prometheus、ログ、アラート） | 🔜 未作成 |
| `03-maintenance-procedures.md` | メンテナンス手順（バックアップ、リストア、障害対応） | 🔜 未作成 |

---

## 🎯 各カテゴリの目的

### Architecture（アーキテクチャ）

**目的**: システム全体の構造を理解し、なぜこの設計にしたのかを説明する

**対象読者**:

- 新規参画者（システム全体を理解したい）
- アーキテクト（設計判断を理解したい）
- レビュアー（アーキテクチャの妥当性を評価したい）

### Database（データベース）

**目的**: データモデルの設計根拠と制約を明確にする

**対象読者**:

- バックエンド開発者
- データベース管理者
- データアナリスト

### Security（セキュリティ）

**目的**: 認証・認可の仕組みとセキュリティ対策を文書化する

**対象読者**:

- セキュリティエンジニア
- バックエンド開発者
- 監査担当者

### API（API設計）

**目的**: APIのインターフェース仕様を明確に定義する

**対象読者**:

- フロントエンド開発者
- API利用者
- テストエンジニア

### Infrastructure（インフラ）

**目的**: 実行環境の構成と設定を文書化する

**対象読者**:

- インフラエンジニア
- DevOpsエンジニア
- SRE

### Operations（運用）

**目的**: 運用手順とベストプラクティスを文書化する

**対象読者**:

- 運用担当者
- SRE
- インシデント対応者

---

## 📝 設計書の書き方ガイドライン

### 必須セクション

すべての設計書は以下のセクションを含むべきです：

1. **文書管理情報**
   - 文書名、バージョン、作成日、最終更新日、作成者

2. **目次**
   - Markdown目次リンク

3. **概要**
   - 目的、適用範囲、前提条件

4. **詳細設計**
   - 各カテゴリに応じた詳細内容

5. **実装詳細**
   - コード例、ディレクトリ構造、クラス図など

6. **テスト設計**
   - テスト戦略、テストケース

7. **付録**
   - 関連ファイル一覧、参考リンク、用語集、変更履歴

### 推奨事項

- **図表の活用**: Mermaid図を活用して視覚的に説明
- **コード例の提示**: 実際の実装例を示す
- **クロスリファレンス**: 関連する他の設計書へのリンクを記載
- **バージョン管理**: 変更履歴を記録

### Mermaid図の種類

- `graph`: フローチャート、システム構成図
- `sequenceDiagram`: シーケンス図
- `erDiagram`: ER図
- `classDiagram`: クラス図
- `flowchart`: フローチャート

---

## 🔗 関連ドキュメント

### プロジェクトドキュメント

- [プロジェクトREADME](../../README.md)
- [開発ガイド](../04-development-guide/README.md)
- [APIリファレンス](../07-reference/01-api.md)

### 既存の設計関連ドキュメント

- [権限システム再設計](../../permission-system-redesign.md)
- [フロントエンドRBAC設計](../../frontend-rbac-design.md)

---

## 📊 作成状況

| カテゴリ | 完了 | 未作成 | 進捗率 |
|---------|------|--------|--------|
| Architecture | 0 | 2 | 0% |
| Database | 0 | 3 | 0% |
| Security | 1 | 2 | 33% |
| API | 0 | 3 | 0% |
| Infrastructure | 0 | 2 | 0% |
| Operations | 0 | 3 | 0% |
| **合計** | **1** | **15** | **6%** |

---

## ✅ 作成優先順位

実装の実態に基づいて、以下の順序で設計書を作成することを推奨します：

### P0（最優先 - 即座に必要）

1. ✅ **Security/RBAC設計書** - 権限システムの理解に必須
2. 🔜 **Database設計書** - データモデルの正式な文書化
3. 🔜 **API設計書** - インターフェース仕様の明確化

### P1（高優先度 - 1-2週間以内）

1. 🔜 **System設計書** - アーキテクチャの全体像
2. 🔜 **Security/認証設計書** - Azure AD/JWT認証の詳細
3. 🔜 **Infrastructure設計書** - 環境構成の文書化

### P2（中優先度 - 1ヶ月以内）

1. 🔜 **Component設計書** - 各レイヤーの詳細
2. 🔜 **Deployment設計書** - デプロイメント手順
3. 🔜 **Monitoring設計書** - 監視・メトリクス

### P3（低優先度 - 必要に応じて）

1. 🔜 その他の詳細設計書

---

## 🤝 貢献ガイドライン

### 新しい設計書を追加する場合

1. 適切なカテゴリディレクトリに配置
2. 連番を付与（例: `04-新しい設計書.md`）
3. このREADME.mdの目次を更新
4. 作成状況の表を更新

### 設計書を更新する場合

1. 文書管理情報の「最終更新日」を更新
2. 変更履歴セクションに変更内容を記録
3. 関連する他の設計書も確認・更新

### レビュープロセス

1. 作成者: 設計書を作成し、Pull Request作成
2. レビュアー: 技術的正確性、完全性、可読性をチェック
3. 承認者: 最終承認し、マージ

---

## 📞 お問い合わせ

設計書に関する質問や提案がある場合：

- **GitHub Issues**: プロジェクトのIssueを作成
- **ドキュメント改善提案**: Pull Requestを作成

---

**最終更新**: 2025-01-11
**管理者**: Claude Code

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>camp-backend - ReDoc</title>
    <style>
        body { margin: 0; padding: 0; }
    </style>
</head>
<body>
    <redoc spec-url="openapi.json"></redoc>
    <script src="https://cdn.redoc.ly/redoc/latest/bundles/redoc.standalone.js"></script>
    <script>
        const spec = {"openapi": "3.1.0", "info": {"title": "camp-backend", "description": "\n    # camp-backend\n\n    LangChain/LangGraphを使用したAIエージェントアプリケーションのバックエンドAPI。\n\n    ## 認証モード: development\n\n    ### 開発モード認証（モック）\n\n    ## 主な機能\n\n    - **AIエージェントとのチャット**: LangGraphによる高度な会話エンジン\n    - **セッション管理**: 会話履歴の保存と取得\n    - **ファイル処理**: ファイルのアップロード・ダウンロード\n    - **認証・認可**: JWT認証 とロールベース制御\n    - **モニタリング**: Prometheusメトリクス収集\n\n    ## 認証\n\n    ほとんどのエンドポイントはゲストアクセス可能ですが、一部の機能では認証が必要です。\n    認証が必要な場合は、`Authorization: Bearer <token>` ヘッダーを含めてください。\n\n    ### 開発環境での認証方法\n\n    詳細は [クイックスタートガイド](docs/developer-guide/01-getting-started/05-quick-start.md) を参照してください。\n\n    1. 右上の **「Authorize」** ボタンをクリック\n    2. トークンに `mock-access-token-dev-12345` を入力\n    3. **「Authorize」** をクリック\n\n    ※ 初回は `.\\scripts\\start-postgres.ps1` でDB起動後、\n    `uv run python scripts/setup_dev_admin.py` を実行して\n    開発ユーザー（SystemAdmin権限付き）を作成してください。\n\n    ## レート制限\n\n    APIリクエストは100リクエスト/分に制限されています。\n    ", "contact": {"name": "開発チーム", "email": "koshiro.nomura@accenture.com"}, "license": {"name": "MIT"}, "version": "0.1.0"}, "paths": {"/api/v1/user_account": {"get": {"tags": ["user_account"], "summary": "ユーザー一覧取得", "description": "ユーザー一覧を取得します（管理者専用）。\n\n    **認証が必要です。**\n\n    クエリパラメータ:\n        - skip: int - スキップ数（デフォルト: 0）\n        - limit: int - 取得件数（デフォルト: 100）\n\n    レスポンス:\n        - UserAccountListResponse: ユーザー一覧レスポンス\n            - users: list[UserAccountResponse] - ユーザーリスト\n            - total: int - 総件数\n            - skip: int - スキップ数\n            - limit: int - 取得件数\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "list_users_api_v1_user_account_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "skip", "in": "query", "required": false, "schema": {"type": "integer", "minimum": 0, "description": "スキップするレコード数", "default": 0, "title": "Skip"}, "description": "スキップするレコード数"}, {"name": "limit", "in": "query", "required": false, "schema": {"type": "integer", "maximum": 1000, "minimum": 1, "description": "取得する最大レコード数", "default": 100, "title": "Limit"}, "description": "取得する最大レコード数"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserAccountListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/user_account/me": {"get": {"tags": ["user_account"], "summary": "現在のユーザー情報取得", "description": "現在の認証済みユーザーの情報を取得します。\n\n    **認証が必要です。**\n\n    レスポンス:\n        - UserAccountResponse: ユーザー情報\n            - id: uuid - ユーザーID\n            - azure_oid: str - Azure AD Object ID\n            - email: str - メールアドレス\n            - display_name: str - 表示名\n            - roles: list[str] - システムロール\n            - is_active: bool - アクティブフラグ\n            - created_at: datetime - 作成日時\n            - updated_at: datetime - 更新日時\n            - last_login: datetime - 最終ログイン日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "get_current_user_api_v1_user_account_me_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserAccountResponse"}}}}}, "security": [{"HTTPBearer": []}]}, "patch": {"tags": ["user_account"], "summary": "ユーザー情報更新", "description": "現在のユーザー情報を更新します。\n\n    **認証が必要です。**\n\n    リクエストボディ:\n        - UserAccountUpdate: ユーザー更新データ\n            - display_name: str - 表示名（オプション）\n            - roles: list[str] - システムレベルのロール（オプション、管理者のみ）\n            - is_active: bool - アクティブフラグ（オプション、管理者のみ）\n\n    レスポンス:\n        - UserAccountResponse: ユーザー情報\n            - id: uuid - ユーザーID\n            - azure_oid: str - Azure AD Object ID\n            - email: str - メールアドレス\n            - display_name: str - 表示名\n            - roles: list[str] - システムロール\n            - is_active: bool - アクティブフラグ\n            - created_at: datetime - 作成日時\n            - updated_at: datetime - 更新日時\n            - last_login: datetime - 最終ログイン日時\n\n    ステータスコード:\n        - 200: 更新成功\n        - 401: 認証されていない\n        - 404: リソースが見つからない", "operationId": "update_current_user_api_v1_user_account_me_patch", "requestBody": {"content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserAccountUpdate"}}}, "required": true}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserAccountResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}, "security": [{"HTTPBearer": []}]}}, "/api/v1/user_account/{user_id}": {"get": {"tags": ["user_account"], "summary": "特定ユーザー情報取得", "description": "特定のユーザー情報を取得します（管理者専用）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - user_id: uuid - ユーザーID（必須）\n\n    レスポンス:\n        - UserAccountResponse: ユーザー情報\n            - id: uuid - ユーザーID\n            - azure_oid: str - Azure AD Object ID\n            - email: str - メールアドレス\n            - display_name: str - 表示名\n            - roles: list[str] - システムロール\n            - is_active: bool - アクティブフラグ\n            - created_at: datetime - 作成日時\n            - updated_at: datetime - 更新日時\n            - last_login: datetime - 最終ログイン日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "get_user_api_v1_user_account__user_id__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "user_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "User Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserAccountResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["user_account"], "summary": "ユーザー削除", "description": "ユーザーを削除します（管理者専用）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - user_id: uuid - ユーザーID（必須）\n\n    レスポンス:\n        - None（204 No Content）\n\n    ステータスコード:\n        - 204: 削除成功\n        - 401: 認証されていない\n        - 404: リソースが見つからない", "operationId": "delete_user_api_v1_user_account__user_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "user_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "User Id"}}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project": {"get": {"tags": ["project"], "summary": "プロジェクト一覧取得", "description": "プロジェクト一覧を取得します（ユーザーが所属するプロジェクトのみ）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - なし\n\n    クエリパラメータ:\n        - skip: int - スキップ数（デフォルト: 0）\n        - limit: int - 取得件数（デフォルト: 100）\n        - is_active: bool - アクティブフィルタ（オプション）\n\n    レスポンス:\n        - ProjectListResponse: プロジェクト一覧レスポンス\n            - projects (list[ProjectResponse]): プロジェクト情報リスト\n            - total (int): 総件数\n            - skip (int): スキップ数\n            - limit (int): 取得件数\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "list_projects_api_v1_project_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "skip", "in": "query", "required": false, "schema": {"type": "integer", "minimum": 0, "description": "スキップするレコード数", "default": 0, "title": "Skip"}, "description": "スキップするレコード数"}, {"name": "limit", "in": "query", "required": false, "schema": {"type": "integer", "maximum": 1000, "minimum": 1, "description": "取得する最大レコード数", "default": 100, "title": "Limit"}, "description": "取得する最大レコード数"}, {"name": "is_active", "in": "query", "required": false, "schema": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "description": "アクティブフラグフィルタ", "title": "Is Active"}, "description": "アクティブフラグフィルタ"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "post": {"tags": ["project"], "summary": "プロジェクト作成", "description": "プロジェクトを作成します。\n\n    **認証が必要です。**\n\n    リクエストボディ:\n        - ProjectCreate: プロジェクト作成データ\n            - name (str): プロジェクト名（必須、最大255文字）\n            - code (str): プロジェクトコード（必須、最大50文字、一意）\n            - description (str): プロジェクト説明（オプション）\n\n    レスポンス:\n        - ProjectResponse: プロジェクト情報\n            - id (uuid): プロジェクトID\n            - name (str): プロジェクト名\n            - code (str): プロジェクトコード\n            - description (str): プロジェクト説明\n            - is_active (bool): アクティブフラグ\n            - created_by (uuid): 作成者のユーザーID\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 422: バリデーションエラー", "operationId": "create_project_api_v1_project_post", "security": [{"HTTPBearer": []}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectCreate"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}": {"get": {"tags": ["project"], "summary": "プロジェクト詳細取得", "description": "プロジェクト情報を取得します（メンバーのみ）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - ProjectResponse: プロジェクト情報\n            - id (uuid): プロジェクトID\n            - name (str): プロジェクト名\n            - code (str): プロジェクトコード\n            - description (str): プロジェクト説明\n            - is_active (bool): アクティブフラグ\n            - created_by (uuid): 作成者のユーザーID\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "get_project_api_v1_project__project_id__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "patch": {"tags": ["project"], "summary": "プロジェクト情報更新", "description": "プロジェクト情報を更新します（OWNER/ADMINのみ）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    リクエストボディ:\n        - ProjectUpdate: プロジェクト更新データ\n            - name (str): プロジェクト名（オプション、最大255文字）\n            - description (str): プロジェクト説明（オプション）\n            - is_active (bool): アクティブフラグ（オプション）\n\n    レスポンス:\n        - ProjectResponse: プロジェクト情報\n            - id (uuid): プロジェクトID\n            - name (str): プロジェクト名\n            - code (str): プロジェクトコード\n            - description (str): プロジェクト説明\n            - is_active (bool): アクティブフラグ\n            - created_by (uuid): 作成者のユーザーID\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 更新成功\n        - 401: 認証されていない\n        - 404: リソースが見つからない", "operationId": "update_project_api_v1_project__project_id__patch", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectUpdate"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["project"], "summary": "プロジェクト削除", "description": "プロジェクトを削除します（OWNERのみ）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - None（204 No Content）\n\n    ステータスコード:\n        - 204: 削除成功\n        - 401: 認証されていない\n        - 404: リソースが見つからない", "operationId": "delete_project_api_v1_project__project_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/code/{code}": {"get": {"tags": ["project"], "summary": "プロジェクトコード検索", "description": "プロジェクトコードで検索します（メンバーのみ）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - code: str - プロジェクトコード（必須）\n\n    レスポンス:\n        - ProjectResponse: プロジェクト情報\n            - id (uuid): プロジェクトID\n            - name (str): プロジェクト名\n            - code (str): プロジェクトコード\n            - description (str): プロジェクト説明\n            - is_active (bool): アクティブフラグ\n            - created_by (uuid): 作成者のユーザーID\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "get_project_by_code_api_v1_project_code__code__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "code", "in": "path", "required": true, "schema": {"type": "string", "title": "Code"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/member": {"get": {"tags": ["project-member"], "summary": "プロジェクトメンバー一覧取得", "description": "プロジェクトのメンバー一覧を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    クエリパラメータ:\n        - skip: int - スキップ数（デフォルト: 0）\n        - limit: int - 取得件数（デフォルト: 100）\n\n    レスポンス:\n        - ProjectMemberListResponse: プロジェクトメンバー一覧レスポンス\n            - members (list[ProjectMemberDetailResponse]): メンバーリスト\n                - id (uuid): メンバーシップID\n                - project_id (uuid): プロジェクトID\n                - user_id (uuid): ユーザーID\n                - role (str): プロジェクトロール（project_manager/project_moderator/member/viewer）\n                - joined_at (datetime): 参加日時\n                - added_by (uuid): 追加者のユーザーID\n                - user (UserAccountResponse): ユーザー情報\n            - total (int): 総件数\n            - project_id (uuid): プロジェクトID\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "get_project_members_api_v1_project__project_id__member_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "skip", "in": "query", "required": false, "schema": {"type": "integer", "minimum": 0, "default": 0, "title": "Skip"}}, {"name": "limit", "in": "query", "required": false, "schema": {"type": "integer", "maximum": 1000, "minimum": 1, "default": 100, "title": "Limit"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectMemberListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "post": {"tags": ["project-member"], "summary": "プロジェクトメンバー追加", "description": "プロジェクトにメンバーを追加します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    リクエストボディ:\n        - ProjectMemberCreate: メンバー追加データ\n            - user_id (uuid): 追加するユーザーID（必須）\n            - role (str): プロジェクトロール（デフォルト: member）\n\n    レスポンス:\n        - ProjectMemberDetailResponse: プロジェクトメンバー詳細情報\n            - id (uuid): メンバーシップID\n            - project_id (uuid): プロジェクトID\n            - user_id (uuid): ユーザーID\n            - role (str): プロジェクトロール\n            - joined_at (datetime): 参加日時\n            - added_by (uuid): 追加者のユーザーID\n            - user (UserAccountResponse): ユーザー情報\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 422: バリデーションエラー", "operationId": "add_project_member_api_v1_project__project_id__member_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectMemberCreate"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectMemberDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/member/me": {"get": {"tags": ["project-member"], "summary": "自分のロール取得", "description": "プロジェクトにおける自分のロールを取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - UserRoleResponse: ユーザーロール情報\n            - project_id (uuid): プロジェクトID\n            - user_id (uuid): ユーザーID\n            - role (str): ロール\n            - is_owner (bool): オーナーフラグ\n            - is_admin (bool): 管理者フラグ\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない", "operationId": "get_my_role_api_v1_project__project_id__member_me_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/UserRoleResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["project-member"], "summary": "プロジェクト退出", "description": "プロジェクトから退出します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - None（204 No Content）\n\n    ステータスコード:\n        - 204: 退出成功\n        - 401: 認証されていない\n        - 404: メンバーシップが見つからない\n        - 422: 最後のPROJECT_MANAGERは退出できない", "operationId": "leave_project_api_v1_project__project_id__member_me_delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/member/bulk": {"post": {"tags": ["project-member"], "summary": "プロジェクトメンバー複数人追加", "description": "プロジェクトに複数のメンバーを一括追加します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    リクエストボディ:\n        - ProjectMemberBulkCreate: メンバー一括追加データ\n            - members (list[ProjectMemberCreate]): 追加するメンバーのリスト（最大100件）\n                - user_id (uuid): 追加するユーザーID（必須）\n                - role (str): プロジェクトロール（デフォルト: member）\n\n    レスポンス:\n        - ProjectMemberBulkResponse: メンバー一括追加結果\n            - project_id (uuid): プロジェクトID\n            - added (list[ProjectMemberDetailResponse]): 追加に成功したメンバーリスト\n            - failed (list[ProjectMemberBulkError]): 追加に失敗したメンバーリスト\n            - total_requested (int): リクエストされたメンバー数\n            - total_added (int): 追加に成功したメンバー数\n            - total_failed (int): 追加に失敗したメンバー数\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 422: バリデーションエラー", "operationId": "add_project_members_bulk_api_v1_project__project_id__member_bulk_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectMemberBulkCreate"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectMemberBulkResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/member/{member_id}": {"patch": {"tags": ["project-member"], "summary": "メンバーロール更新", "description": "メンバーのロールを更新します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - member_id: uuid - メンバーシップID（必須）\n\n    リクエストボディ:\n        - ProjectMemberUpdate: メンバーロール更新データ\n            - role (str): 新しいプロジェクトロール（必須）\n\n    レスポンス:\n        - ProjectMemberDetailResponse: プロジェクトメンバー詳細情報\n            - id (uuid): メンバーシップID\n            - project_id (uuid): プロジェクトID\n            - user_id (uuid): ユーザーID\n            - role (str): プロジェクトロール\n            - joined_at (datetime): 参加日時\n            - added_by (uuid): 追加者のユーザーID\n            - user (UserAccountResponse): ユーザー情報\n\n    ステータスコード:\n        - 200: 更新成功\n        - 401: 認証されていない\n        - 404: リソースが見つからない", "operationId": "update_member_role_api_v1_project__project_id__member__member_id__patch", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "member_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Member Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectMemberUpdate"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectMemberDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["project-member"], "summary": "メンバー削除", "description": "プロジェクトからメンバーを削除します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - member_id: uuid - メンバーシップID（必須）\n\n    レスポンス:\n        - None（204 No Content）\n\n    ステータスコード:\n        - 204: 削除成功\n        - 401: 認証されていない\n        - 404: リソースが見つからない", "operationId": "remove_member_api_v1_project__project_id__member__member_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "member_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Member Id"}}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/file": {"get": {"tags": ["project-file"], "summary": "プロジェクトファイル一覧取得", "description": "プロジェクトのファイル一覧を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    クエリパラメータ:\n        - skip: int - スキップするファイル数（デフォルト: 0）\n        - limit: int - 返す最大ファイル数（デフォルト: 100）\n\n    レスポンス:\n        - ProjectFileListResponse: プロジェクトファイル一覧レスポンス\n            - files (list[ProjectFileResponse]): ファイルリスト\n                - id (uuid): ファイルID\n                - project_id (uuid): プロジェクトID\n                - filename (str): 保存ファイル名\n                - original_filename (str): 元のファイル名\n                - file_path (str): ファイルパス\n                - file_size (int): ファイルサイズ（バイト）\n                - mime_type (str | None): MIMEタイプ\n                - uploaded_by (uuid): アップロード者のユーザーID\n                - uploaded_at (datetime): アップロード日時\n                - uploader (UserAccountResponse | None): アップロード者のユーザー情報\n            - total (int): 総件数\n            - project_id (uuid): プロジェクトID\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "list_files_api_v1_project__project_id__file_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "skip", "in": "query", "required": false, "schema": {"type": "integer", "default": 0, "title": "Skip"}}, {"name": "limit", "in": "query", "required": false, "schema": {"type": "integer", "default": 100, "title": "Limit"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectFileListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "post": {"tags": ["project-file"], "summary": "プロジェクトファイルアップロード", "description": "プロジェクトにファイルをアップロードします。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    リクエストボディ:\n        - Content-Type: multipart/form-data\n        - file: File - アップロードするファイル\n\n    レスポンス:\n        - ProjectFileUploadResponse: ファイルアップロード成功レスポンス\n            - id (uuid): ファイルID\n            - project_id (uuid): プロジェクトID\n            - filename (str): ファイル名\n            - original_filename (str): 元のファイル名\n            - file_path (str): ファイルパス\n            - file_size (int): ファイルサイズ\n            - mime_type (str): MIMEタイプ\n            - uploaded_by (uuid): アップロードユーザーID\n            - uploaded_at (datetime): アップロード日時\n            - message (str): メッセージ\n\n    ステータスコード:\n        - 201: アップロード成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 413: ファイルサイズ超過\n        - 422: ファイルが無効", "operationId": "upload_file_api_v1_project__project_id__file_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "requestBody": {"required": true, "content": {"multipart/form-data": {"schema": {"$ref": "#/components/schemas/ProjectFileUploadRequest"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectFileUploadResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/file/{file_id}": {"get": {"tags": ["project-file"], "summary": "プロジェクトファイル情報取得", "description": "プロジェクトのファイル情報を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - file_id: uuid - ファイルID（必須）\n\n    レスポンス:\n        - ProjectFileResponse: プロジェクトファイル情報\n            - id (uuid): ファイルID\n            - project_id (uuid): プロジェクトID\n            - filename (str): 保存ファイル名\n            - original_filename (str): 元のファイル名\n            - file_path (str): ファイルパス\n            - file_size (int): ファイルサイズ（バイト）\n            - mime_type (str | None): MIMEタイプ\n            - uploaded_by (uuid): アップロード者のユーザーID\n            - uploaded_at (datetime): アップロード日時\n            - uploader (UserAccountResponse | None): アップロード者のユーザー情報\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ファイルが見つからない", "operationId": "get_file_api_v1_project__project_id__file__file_id__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "file_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "File Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectFileResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["project-file"], "summary": "プロジェクトファイル削除", "description": "プロジェクトのファイルを削除します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - file_id: uuid - ファイルID（必須）\n\n    レスポンス:\n        - ProjectFileDeleteResponse: ファイル削除成功レスポンス\n            - file_id (uuid): 削除されたファイルID\n            - message (str): メッセージ\n\n    ステータスコード:\n        - 200: 削除成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ファイルが見つからない", "operationId": "delete_file_api_v1_project__project_id__file__file_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "file_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "File Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/ProjectFileDeleteResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/file/{file_id}/download": {"get": {"tags": ["project-file"], "summary": "プロジェクトファイルダウンロード", "description": "プロジェクトのファイルをダウンロードします。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - file_id: uuid - ファイルID（必須）\n\n    レスポンス:\n        - バイナリストリーム（ファイルデータ）\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ファイルが見つからない", "operationId": "download_file_api_v1_project__project_id__file__file_id__download_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "file_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "File Id"}}], "responses": {"200": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/template": {"get": {"tags": ["analysis-template"], "summary": "テンプレート一覧取得", "description": "施策課題テンプレート一覧を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - AnalysisIssueCatalogListResponse: 施策課題カタログ一覧レスポンス\n            - issues (list[AnalysisIssueCatalogResponse]): 課題カタログリスト\n            - total (int): 総件数\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "list_templates_api_v1_project__project_id__analysis_template_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisIssueCatalogListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/template/{issue_id}": {"get": {"tags": ["analysis-template"], "summary": "テンプレート詳細取得", "description": "指定した施策課題の分析テンプレート詳細を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - issue_id: uuid - 課題ID（必須）\n\n    レスポンス:\n        - AnalysisIssueDetailResponse: 施策課題詳細情報\n            - id (uuid): 課題ID\n            - name (str): 課題名\n            - issue_order (int): 課題表示順序\n            - validation_id (uuid): 施策ID\n            - validation (str): 施策名\n            - validation_order (int): 施策表示順序\n            - description (str): 課題説明\n            - agent_prompt (str): エージェントプロンプト\n            - initial_axis (list[AnalysisGraphAxisResponse]): 初期軸設定\n            - dummy_input (list[dict]): ダミー入力データ(pandas.to_dict, orient='records'形式)\n            - dummy_hint (str): ダミー入力ヒント\n            - dummy_formula (list[AnalysisDummyFormulaResponse]): ダミー計算式\n            - dummy_chart (list[AnalysisDummyChartResponse]): ダミーチャート\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: テンプレートが見つからない", "operationId": "get_template_api_v1_project__project_id__analysis_template__issue_id__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "issue_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "課題ID", "title": "Issue Id"}, "description": "課題ID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisIssueDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session": {"get": {"tags": ["analysis-session"], "summary": "分析セッション一覧取得", "description": "プロジェクトに属する分析セッションの一覧を取得します。\n\n    **認証が必要です。**\n    **プロジェクトメンバーのみアクセス可能です。**\n\n    - created_at降順でソートされます(最新が先頭)\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    クエリパラメータ:\n        - skip: int - スキップ数（デフォルト: 0）\n        - limit: int - 取得件数（デフォルト: 100）\n        - is_active: bool - アクティブフィルタ（オプション）\n\n    レスポンス:\n        - AnalysisSessionListResponse: 分析セッション一覧レスポンス\n            - sessions (list[AnalysisSessionResponse]): セッションリスト\n                - id (uuid): セッションID\n                - project_id (uuid): プロジェクトID\n                - issue_id (uuid): 課題ID\n                - creator_id (uuid): 作成者ID\n                - current_snapshot (int): 現在のスナップショット番号\n                - created_at (datetime): 作成日時\n                - updated_at (datetime): 更新日時\n            - total (int): 総件数\n            - skip (int): スキップ数\n            - limit (int): 取得件数\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "list_sessions_api_v1_project__project_id__analysis_session_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "skip", "in": "query", "required": false, "schema": {"type": "integer", "minimum": 0, "description": "スキップするレコード数", "default": 0, "title": "Skip"}, "description": "スキップするレコード数"}, {"name": "limit", "in": "query", "required": false, "schema": {"type": "integer", "maximum": 1000, "minimum": 1, "description": "取得する最大レコード数", "default": 100, "title": "Limit"}, "description": "取得する最大レコード数"}, {"name": "is_active", "in": "query", "required": false, "schema": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "description": "アクティブフラグフィルタ", "title": "Is Active"}, "description": "アクティブフラグフィルタ"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "post": {"tags": ["analysis-session"], "summary": "分析セッション作成", "description": "新しい分析セッションを作成します。\n\n    **認証が必要です。**\n    **プロジェクトメンバーのみアクセス可能です。**\n\n    - セッション作成時に初期スナップショット(snapshot_id=0)が作成されます\n    - 施策課題テンプレが設定されます\n    - 空のチャット履歴が初期化されます\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    リクエストボディ:\n        - issue_id (uuid): 課題ID（必須）\n\n    レスポンス:\n        - AnalysisSessionDetailResponse: 分析セッション詳細情報\n            - id (uuid): セッションID\n            - project_id (uuid): プロジェクトID\n            - issue_id (uuid): 課題ID\n            - creator_id (uuid): 作成者ID\n            - current_snapshot (int): 現在のスナップショット番号\n            - input_file_id (uuid | None): 入力ファイルID\n            - snapshot_list (list[AnalysisSnapshotResponse]): スナップショット一覧\n            - file_list (list[AnalysisFileResponse]): 分析ファイル一覧\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: プロジェクトまたは課題が見つからない", "operationId": "create_session_api_v1_project__project_id__analysis_session_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionCreate", "description": "分析セッション作成リクエスト"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session/{session_id}": {"get": {"tags": ["analysis-session"], "summary": "分析セッション詳細取得", "description": "指定されたIDの分析セッション情報を取得します。\n    ステップ、ファイル、チャット履歴を含む完全な情報を返します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n\n    レスポンス:\n        - AnalysisSessionDetailResponse: 分析セッション詳細情報\n            - id (uuid): セッションID\n            - project_id (uuid): プロジェクトID\n            - issue_id (uuid): 課題ID\n            - creator_id (uuid): 作成者ID\n            - current_snapshot (int): 現在のスナップショット番号\n            - input_file_id (uuid | None): 入力ファイルID\n            - snapshot_list (list[AnalysisSnapshotResponse]): スナップショット一覧\n            - file_list (list[AnalysisFileResponse]): 分析ファイル一覧\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションが見つからない", "operationId": "get_session_api_v1_project__project_id__analysis_session__session_id__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "put": {"tags": ["analysis-session"], "summary": "分析セッション更新 (入力ファイル選択／スナップショット復元)", "description": "指定されたIDの分析セッションに対して、入力ファイルの選択またはスナップショットの復元を行います。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - session_id (uuid): セッションID\n\n    クエリパラメータ:\n        - AnalysisSessionUpdate:\n            - current_snapshot_id (int): 復元するスナップショットID (オプション)\n            - input_file_id (uuid): 選択する入力ファイルID (オプション)\n\n    レスポンス:\n        - AnalysisSessionDetailResponse:\n            - id (uuid): セッションID\n            - project_id (uuid): プロジェクトID\n            - issue_id (uuid): 課題ID\n            - creator_id (uuid): 作成者ID\n            - current_snapshot (int): 現在のスナップショット番号\n            - input_file_id (uuid | None): 入力ファイルID\n            - snapshot_list (list[AnalysisSnapshotResponse]): スナップショット一覧\n            - file_list (list[AnalysisFileResponse]): 分析ファイル一覧\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションまたはファイルが見つからない", "operationId": "update_session_api_v1_project__project_id__analysis_session__session_id__put", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionUpdate", "description": "分析セッション更新リクエスト"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["analysis-session"], "summary": "分析セッション削除", "description": "指定されたIDの分析セッションを削除します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n\n    レスポンス:\n        - なし（204 No Content）\n\n    ステータスコード:\n        - 204: 成功（削除完了）\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションが見つからない", "operationId": "delete_session_api_v1_project__project_id__analysis_session__session_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session/{session_id}/result": {"get": {"tags": ["analysis-session"], "summary": "分析セッション結果取得", "description": "分析セッションの結果を取得します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - session_id (uuid): セッションID\n\n    レスポンス:\n        - AnalysisSessionResultListResponse:\n            - results (list[AnalysisSessionResultResponse]): 結果リスト\n                - step_id (uuid): ステップID\n                - step_name (str): ステップ名\n                - result_formula (list[dict[str, Any]] | None): 結果の数式リスト\n                - result_chart (dict[str, Any] | None): 結果のチャート (plotly の JSON)\n                - result_table (list[dict[str, Any]] | None): 結果のテーブル (pandasのto_dict(orient='records')形式)\n            - total (int): 総件数\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションが見つからない", "operationId": "get_session_result_api_v1_project__project_id__analysis_session__session_id__result_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionResultListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session/{session_id}/file": {"get": {"tags": ["analysis-session"], "summary": "登録済ファイル一覧取得", "description": "指定されたIDの分析セッションに登録されたファイルを取得します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n\n    レスポンス:\n        - AnalysisFileListResponse: 分析ファイル一覧レスポンス\n            - files (list[AnalysisFileResponse]): ファイルリスト\n                - id (uuid): ファイルID\n                - session_id (uuid): セッションID\n                - project_file_id (uuid): プロジェクトファイルID\n                - project_file_name (str): プロジェクトファイル名\n                - sheet_name (str): シート名\n                - axis_config (dict[str, Any]): 軸設定JSON\n                - data (list[dict[str, Any]]): データJSON（pandas DataFrameのrecord形式）\n                - created_at (datetime): 作成日時\n                - updated_at (datetime): 更新日時\n            - total (int): 総件数\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションが見つからない", "operationId": "list_session_files_api_v1_project__project_id__analysis_session__session_id__file_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisFileListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "post": {"tags": ["analysis-session"], "summary": "ファイルアップロード", "description": "分析セッションにファイルを登録します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n\n    クエリパラメータ:\n        - pjt_file_id (uuid): プロジェクトファイルID (必須)\n\n    レスポンス:\n        - AnalysisFileConfigResponse: 分析ファイル設定情報\n            - id (uuid): 分析ファイルID\n            - config_list (list[dict[str, Any]]): 設定候補リスト（シート名、軸設定の候補）\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションまたはファイルが見つからない", "operationId": "upload_session_file_api_v1_project__project_id__analysis_session__session_id__file_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisFileCreate", "description": "ファイルアップロードリクエスト"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisFileConfigResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session/{session_id}/file/{file_id}": {"patch": {"tags": ["analysis-session"], "summary": "ファイル設定更新", "description": "ファイルの設定(シート、軸)を登録します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n        - file_id: uuid - ファイルID（必須）\n\n    クエリパラメータ:\n        - なし\n\n    パスパラメータ:\n        - session_id (uuid): セッションID\n        - file_id (uuid): ファイルID\n\n    リクエストボディ:\n        - AnalysisFileUpdate:\n            - sheet_name (str): シート名 (オプション)\n            - axis_config (dict[str, Any]): 軸設定JSON (オプション)\n\n    レスポンス:\n        - AnalysisFileResponse:\n            - id (uuid): ファイルID\n            - session_id (uuid): セッションID\n            - project_file_id (uuid): プロジェクトファイルID\n            - project_file_name (str): プロジェクトファイル名\n            - sheet_name (str): シート名\n            - axis_config (dict[str, Any]): 軸設定JSON\n            - data (list[dict[str, Any]]): データJSON（pandas DataFrameのrecord形式）\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションまたはファイルが見つからない", "operationId": "update_file_config_api_v1_project__project_id__analysis_session__session_id__file__file_id__patch", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}, {"name": "file_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "ファイルID", "title": "File Id"}, "description": "ファイルID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisFileUpdate", "description": "ファイル設定更新データ"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisFileResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session/{session_id}/chat": {"post": {"tags": ["analysis-session"], "summary": "AIチャット実行", "description": "AIエージェントとチャットを実行します(準備中)。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n\n    クエリパラメータ:\n        - なし\n\n    リクエストボディ:\n        - message (str): ユーザーメッセージ（必須）\n\n    レスポンス:\n        - AnalysisSessionDetailResponse: 分析セッション詳細情報\n            - id (uuid): セッションID\n            - project_id (uuid): プロジェクトID\n            - issue_id (uuid): 課題ID\n            - creator_id (uuid): 作成者ID\n            - current_snapshot (int): 現在のスナップショット番号\n            - input_file_id (uuid | None): 入力ファイルID\n            - snapshot_list (list[AnalysisSnapshotResponse]): スナップショット一覧\n            - file_list (list[AnalysisFileResponse]): 分析ファイル一覧\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションが見つからない\n        - 504: タイムアウト（10分）", "operationId": "execute_chat_api_v1_project__project_id__analysis_session__session_id__chat_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisChatCreate", "description": "AIチャット実行リクエスト"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisSessionDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session/{session_id}/step": {"post": {"tags": ["analysis-session"], "summary": "分析ステップ作成", "description": "最新snapshotに新しい分析ステップを作成します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n\n    リクエストボディ:\n        - step_name (str): ステップ名（必須）\n        - step_type (str): ステップタイプ（必須: filter/aggregate/transform/summary）\n        - data_source (str): データソース（必須: originalまたはステップID）\n        - config (dict): ステップ設定（オプション）\n\n    レスポンス:\n        - AnalysisStepResponse: 分析ステップ情報\n            - id (uuid): ステップID\n            - name (str): ステップ名\n            - type (str): ステップタイプ\n            - input (str): データソース\n            - step_order (int): ステップ順序\n            - config (dict[str, Any]): ステップ設定(JSON)\n            - snapshot_id (uuid): スナップショットID\n            - result_formula (list[dict[str, Any]] | None): 結果の数式リスト\n            - result_chart (dict[str, Any] | None): 結果のチャート (plotly の JSON)\n            - result_table (list[dict[str, Any]] | None): 結果のテーブル (pandasのto_dict(orient='records')形式)\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションが見つからない", "operationId": "create_step_api_v1_project__project_id__analysis_session__session_id__step_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisStepCreate", "description": "分析ステップ作成データ"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisStepResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/analysis/session/{session_id}/step/{step_id}": {"put": {"tags": ["analysis-session"], "summary": "分析ステップ更新", "description": "最新snapshotの既存分析ステップを更新します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n        - step_id: uuid - ステップID（必須）\n\n    クエリパラメータ:\n        - なし\n\n    リクエストボディ:\n    - AnalysisStepUpdate:\n        - name (str): ステップ名 (オプション)\n        - type (str): ステップタイプ (オプション)\n        - input (str): データソース (オプション)\n        - config (dict): ステップ設定 (オプション)\n\n    レスポンス:\n        - AnalysisStepResponse: 分析ステップ情報\n            - id (uuid): ステップID\n            - name (str): ステップ名\n            - type (str): ステップタイプ\n            - input (str): データソース\n            - step_order (int): ステップ順序\n            - config (dict[str, Any]): ステップ設定(JSON)\n            - snapshot_id (uuid): スナップショットID\n            - result_formula (list[dict[str, Any]] | None): 結果の数式リスト\n            - result_chart (dict[str, Any] | None): 結果のチャート (plotly の JSON)\n            - result_table (list[dict[str, Any]] | None): 結果のテーブル (pandasのto_dict(orient='records')形式)\n            - created_at (datetime): 作成日時\n            - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションまたはステップが見つからない", "operationId": "update_step_api_v1_project__project_id__analysis_session__session_id__step__step_id__put", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "step_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析ステップID", "title": "Step Id"}, "description": "分析ステップID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisStepUpdate", "description": "分析ステップ更新データ"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/AnalysisStepResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["analysis-session"], "summary": "分析ステップ削除", "description": "最新snapshotの指定されたステップを削除します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    - 物理削除されます(論理削除ではありません)\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - session_id: uuid - セッションID（必須）\n        - step_id: uuid - ステップID（必須）\n\n    レスポンス:\n        - なし（204 No Content）\n\n    ステータスコード:\n        - 204: 成功（削除完了）\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: セッションまたはステップが見つからない", "operationId": "delete_step_api_v1_project__project_id__analysis_session__session_id__step__step_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "step_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析ステップID", "title": "Step Id"}, "description": "分析ステップID"}, {"name": "session_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "分析セッションID", "title": "Session Id"}, "description": "分析セッションID"}], "responses": {"204": {"description": "Successful Response"}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/file": {"get": {"tags": ["driver-tree-file"], "summary": "アップロード済みファイル一覧取得", "description": "ユーザーがアップロードした全ファイルの一覧を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - DriverTreeUploadedFileListResponse: アップロード済みファイル一覧レスポンス\n            - files (list): アップロード済みファイル一覧\n                - file_id (uuid): ファイルID\n                - filename (str): ファイル名\n                - file_size (int): ファイルサイズ（バイト）\n                - uploaded_at (datetime): アップロード日時\n                - sheets (list): シート一覧\n                    - sheet_id (uuid): シートID\n                    - sheet_name (str): シート名\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "list_uploaded_files_api_v1_project__project_id__driver_tree_file_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeUploadedFileListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "post": {"tags": ["driver-tree-file"], "summary": "ファイルアップロード", "description": "Excelファイルをアップロードします。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    リクエストボディ:\n        - Content-Type: multipart/form-data\n        - file: File - Excelファイル（.xlsx/.xls）\n\n    レスポンス:\n        - DriverTreeFileUploadResponse: ドライバーツリーファイルアップロードレスポンス\n            - files (list): アップロード済みファイル一覧\n                - file_id (uuid): ファイルID\n                - filename (str): ファイル名\n                - file_size (int): ファイルサイズ（バイト）\n                - uploaded_at (datetime): アップロード日時\n                - sheets (list): シート一覧\n                    - sheet_id (uuid): シートID\n                    - sheet_name (str): シート名\n\n    ステータスコード:\n        - 201: アップロード成功\n        - 400: 不正なファイル形式\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 413: ファイルサイズ超過", "operationId": "upload_file_api_v1_project__project_id__driver_tree_file_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "requestBody": {"required": true, "content": {"multipart/form-data": {"schema": {"$ref": "#/components/schemas/Body_upload_file_api_v1_project__project_id__driver_tree_file_post"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeFileUploadResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/sheet": {"get": {"tags": ["driver-tree-file"], "summary": "Select済みファイル一覧取得", "description": "Select済み（カラム設定済み）ファイルの一覧を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - DriverTreeFileListResponse: ドライバーツリーファイル一覧レスポンス\n            - files (list): Select済みファイル一覧\n                - file_id (uuid): ファイルID\n                - filename (str): ファイル名\n                - uploaded_at (datetime): アップロード日時\n                - sheets (list): シート一覧\n                    - sheet_id (uuid): シートID\n                    - sheet_name (str): シート名\n                    - columns (list): カラムリスト\n                        - column_id (uuid): カラムID\n                        - column_name (str): カラム名\n                        - role (str): カラムの役割（推移|軸|値|利用しない）\n                        - items (list[str]): 項目例\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "list_selected_files_api_v1_project__project_id__driver_tree_sheet_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeFileListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/file/{file_id}/sheet/{sheet_id}": {"post": {"tags": ["driver-tree-file"], "summary": "シート選択送信", "description": "シートを選択して送信します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - file_id: uuid - ファイルID（必須）\n        - sheet_id: uuid - シートID（必須）\n\n    レスポンス:\n        - DriverTreeSheetSelectResponse: ドライバーツリーシート選択レスポンス\n            - success (bool): 成功フラグ\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ファイルまたはシートが見つからない", "operationId": "select_sheet_api_v1_project__project_id__driver_tree_file__file_id__sheet__sheet_id__post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "file_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "File Id"}}, {"name": "sheet_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Sheet Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeSheetSelectResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/file/{file_id}/sheet/{sheet_id}/column": {"patch": {"tags": ["driver-tree-file"], "summary": "データカラム設定送信", "description": "各シートのデータカラムの役割を設定します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - file_id: uuid - ファイルID（必須）\n        - sheet_id: uuid - シートID（必須）\n\n    リクエストボディ:\n        - columns: list[dict] - カラム情報リスト\n            - column_name: str - カラム名\n            - role (str): カラム設定（\"推移\"|\"軸\"|\"値\"|\"利用しない\"）\n\n    レスポンス:\n        - dict[str, Any]: カラム設定更新結果\n            - success (bool): 成功フラグ\n\n    ステータスコード:\n        - 200: 成功\n        - 400: 不正なカラム設定\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ファイルまたはシートが見つからない", "operationId": "update_column_config_api_v1_project__project_id__driver_tree_file__file_id__sheet__sheet_id__column_patch", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "file_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "File Id"}}, {"name": "sheet_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Sheet Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"type": "array", "items": {"type": "object", "additionalProperties": true}, "title": "Columns"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"type": "object", "additionalProperties": true, "title": "Response Update Column Config Api V1 Project  Project Id  Driver Tree File  File Id  Sheet  Sheet Id  Column Patch"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/file/{file_id}": {"delete": {"tags": ["driver-tree-file"], "summary": "ファイル削除", "description": "アップロード済みファイルを削除します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - file_id: uuid - ファイルID（必須）\n\n    レスポンス:\n        - DriverTreeFileDeleteResponse: ファイル削除レスポンス\n            - files (list): 削除後のアップロード済みファイル一覧\n                - file_id (uuid): ファイルID\n                - filename (str): ファイル名\n                - file_size (int): ファイルサイズ（バイト）\n                - uploaded_at (datetime): アップロード日時\n                - sheets (list): シート一覧\n                    - sheet_id (uuid): シートID\n                    - sheet_name (str): シート名\n\n    ステータスコード:\n        - 200: 削除成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ファイルが見つからない", "operationId": "delete_file_api_v1_project__project_id__driver_tree_file__file_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Project Id"}}, {"name": "file_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "File Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeFileDeleteResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/tree": {"post": {"tags": ["driver-tree"], "summary": "新規ツリー作成", "description": "新規ツリーを作成します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    リクエストボディ:\n        - DriverTreeCreateTreeRequest: ドライバーツリー作成リクエスト\n            - name (str): ツリー名（必須）\n            - description (str): 説明（オプション）\n\n    レスポンス:\n        - DriverTreeCreateTreeResponse: ドライバーツリー作成レスポンス\n            - tree_id (uuid): ツリーID\n            - name (str): ツリー名\n            - description (str): 説明\n            - created_at (datetime): 作成日時\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "create_tree_api_v1_project__project_id__driver_tree_tree_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeCreateTreeRequest"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeCreateTreeResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "get": {"tags": ["driver-tree"], "summary": "ツリー一覧取得", "description": "ツリーの一覧を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - DriverTreeListResponse: ドライバーツリー一覧レスポンス\n            - trees (list): ツリー一覧\n                - tree_id (uuid): ツリーID\n                - name (str): ツリー名\n                - description (str): 説明\n                - created_at (datetime): 作成日時\n                - updated_at (datetime): 更新日時\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "list_trees_api_v1_project__project_id__driver_tree_tree_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeListResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/tree/{tree_id}": {"get": {"tags": ["driver-tree"], "summary": "ツリー取得", "description": "ツリーの全体構造を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - tree_id: uuid - ツリーID（必須）\n\n    レスポンス:\n        - DriverTreeGetTreeResponse: ドライバーツリー取得レスポンス\n            - tree_id (uuid): ツリーID\n            - name (str): ツリー名\n            - description (str): 説明\n            - root (dict): ルートノード\n            - nodes (list): ノード情報リスト\n            - relationship (list): 関係リスト\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ツリーが見つからない", "operationId": "get_tree_api_v1_project__project_id__driver_tree_tree__tree_id__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "tree_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Tree Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeGetTreeResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["driver-tree"], "summary": "ツリー削除", "description": "ツリーを完全に削除します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - tree_id: uuid - ツリーID（必須）\n\n    レスポンス:\n        - DriverTreeDeleteResponse: ドライバーツリー削除レスポンス\n            - success (bool): 成功フラグ\n            - deleted_at (datetime): 削除日時\n\n    ステータスコード:\n        - 200: 削除成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ツリーが見つからない", "operationId": "delete_tree_api_v1_project__project_id__driver_tree_tree__tree_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "tree_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Tree Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeDeleteResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/tree/{tree_id}/import": {"post": {"tags": ["driver-tree"], "summary": "数式/データインポート", "description": "ツリーに数式データをインポートします。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - tree_id: uuid - ツリーID（必須）\n\n    リクエストボディ:\n        - DriverTreeImportFormulaRequest: 数式インポートリクエスト\n            - position_x (int): ルートノードX座標\n            - position_y (int): ルートノードY座標\n            - formulas (list[str]): 数式リスト\n            - sheet_id (uuid): 入力シートID（オプション）\n\n    レスポンス:\n        - DriverTreeGetTreeResponse: ドライバーツリー取得レスポンス（ツリー全体の最新構造）\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ツリーが見つからない", "operationId": "import_formula_api_v1_project__project_id__driver_tree_tree__tree_id__import_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "tree_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Tree Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeImportFormulaRequest"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeGetTreeResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/tree/{tree_id}/reset": {"post": {"tags": ["driver-tree"], "summary": "ツリーリセット", "description": "ツリーを初期状態にリセットします。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - tree_id: uuid - ツリーID（必須）\n\n    レスポンス:\n        - DriverTreeResetResponse: ドライバーツリーリセットレスポンス\n            - tree (dict): リセット後のツリー全体構造\n            - reset_at (datetime): リセット日時\n\n    ステータスコード:\n        - 200: リセット成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ツリーが見つからない", "operationId": "reset_tree_api_v1_project__project_id__driver_tree_tree__tree_id__reset_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "tree_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Tree Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeResetResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/category": {"get": {"tags": ["driver-tree"], "summary": "業界分類/業界/ドライバーツリー型/KPI選択肢取得", "description": "ツリーの設定選択肢（業界分類、業界名、ドライバーツリー型、KPI）を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    レスポンス:\n        - DriverTreeCategoryResponse: カテゴリ選択肢レスポンス\n            - category (list): 業界分類,業界名,ドライバーツリー型\n            - KPI_list (list[str]): KPIリスト\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "get_categories_api_v1_project__project_id__driver_tree_category_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeCategoryResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/formula": {"get": {"tags": ["driver-tree"], "summary": "数式取得(ドライバーツリー/KPI)", "description": "数式を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n\n    クエリパラメータ:\n        - driver_tree: str - ドライバーツリー型（必須）\n        - KPI: str - KPI（必須）\n\n    レスポンス:\n        - DriverTreeFormulaResponse: 数式レスポンス\n            - formulas (list[str]): 数式一覧\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）", "operationId": "get_formulas_api_v1_project__project_id__driver_tree_formula_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "driver_tree", "in": "query", "required": true, "schema": {"type": "string", "description": "ドライバーツリー型", "title": "Driver Tree"}, "description": "ドライバーツリー型"}, {"name": "KPI", "in": "query", "required": true, "schema": {"type": "string", "description": "KPI", "title": "Kpi"}, "description": "KPI"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeFormulaResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/tree/{tree_id}/data": {"get": {"tags": ["driver-tree"], "summary": "ドライバーツリー計算結果取得", "description": "ツリー全体の計算を実行し結果を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - tree_id: uuid - ツリーID（必須）\n\n    レスポンス:\n        - DriverTreeCalculatedDataResponse: 計算結果レスポンス\n            - calculated_data_list (list): 計算データ一覧\n                - node_id (uuid): ノードID\n                - label (str): ノード名\n                - columns (list[str]): カラム名リスト\n                - records (list): データレコード\n\n    ステータスコード:\n        - 200: 計算成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ツリーが見つからない\n        - 422: 計算エラー（数式エラー、データ不足等）", "operationId": "get_tree_data_api_v1_project__project_id__driver_tree_tree__tree_id__data_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "tree_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Tree Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeCalculatedDataResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/tree/{tree_id}/output": {"get": {"tags": ["driver-tree"], "summary": "シミュレーションファイルダウンロード", "description": "シミュレーション結果をExcel/CSV形式でエクスポートします。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - tree_id: uuid - ツリーID（必須）\n\n    クエリパラメータ:\n        - format: str - 出力形式（\"xlsx\"|\"csv\"、デフォルト: \"xlsx\"）\n\n    レスポンス:\n        - Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n        - File: シミュレーション結果ファイル\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ツリーが見つからない", "operationId": "download_simulation_output_api_v1_project__project_id__driver_tree_tree__tree_id__output_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "tree_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Tree Id"}}, {"name": "format", "in": "query", "required": false, "schema": {"type": "string", "description": "出力形式（xlsx|csv）", "default": "xlsx", "title": "Format"}, "description": "出力形式（xlsx|csv）"}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/tree/{tree_id}/node": {"post": {"tags": ["driver-tree-node"], "summary": "ノード作成", "description": "ツリーに新規ノードを作成します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - tree_id: uuid - ツリーID（必須）\n\n    リクエストボディ:\n        - DriverTreeCreateNodeRequest: ノード作成リクエスト\n            - label (str): ノード名（必須）\n            - position_x (int): X座標（必須）\n            - position_y (int): Y座標（必須）\n            - node_type (str): ノードタイプ（必須）\n\n    レスポンス:\n        - DriverTreeNodeCreateResponse: ノード作成レスポンス\n            - tree (dict): ツリー全体の最新構造\n            - created_node_id (uuid): 作成されたノードID\n\n    ステータスコード:\n        - 201: 作成成功\n        - 400: 不正なノード設定\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ツリーが見つからない", "operationId": "create_node_api_v1_project__project_id__driver_tree_tree__tree_id__node_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "tree_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Tree Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeCreateNodeRequest"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodeCreateResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/node/{node_id}": {"get": {"tags": ["driver-tree-node"], "summary": "ノード詳細取得", "description": "ノードの詳細情報を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n\n    レスポンス:\n        - DriverTreeNodeDetailResponse: ノード詳細レスポンス\n            - node (DriverTreeNodeInfo): ノード詳細情報\n                - node_id (uuid): ノードID\n                - label (str): ノード名\n                - node_type (str): ノードタイプ（入力|計算|定数）\n                - position_x (int): X座標\n                - position_y (int): Y座標\n                - data (DriverTreeNodeData | None): 入力ノードのデータ\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードが見つからない", "operationId": "get_node_api_v1_project__project_id__driver_tree_node__node_id__get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodeDetailResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "patch": {"tags": ["driver-tree-node"], "summary": "ノード詳細更新", "description": "ノード情報を更新します（PATCH）。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n\n    リクエストボディ:\n        - DriverTreeNodeUpdateRequest: ノード更新リクエスト（すべてオプション）\n            - label (str): ノード名\n            - node_type (str): ノードタイプ\n            - position_x (int): X座標\n            - position_y (int): Y座標\n            - operator (str): 演算子\n            - children_id_list (list[uuid]): 子ノードIDリスト\n\n    レスポンス:\n        - DriverTreeNodeUpdateResponse: ノード更新レスポンス\n            - tree (dict): ツリー全体の最新構造\n\n    ステータスコード:\n        - 200: 更新成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードが見つからない\n        - 422: バリデーションエラー", "operationId": "update_node_api_v1_project__project_id__driver_tree_node__node_id__patch", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodeUpdateRequest"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodeUpdateResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["driver-tree-node"], "summary": "ノード削除", "description": "ノードを削除します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n\n    レスポンス:\n        - DriverTreeNodeDeleteResponse: ノード削除レスポンス\n            - tree (dict): ツリー全体の最新構造\n\n    ステータスコード:\n        - 200: 削除成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードが見つからない", "operationId": "delete_node_api_v1_project__project_id__driver_tree_node__node_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodeDeleteResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/node/{node_id}/preview/output": {"get": {"tags": ["driver-tree-node"], "summary": "入力ノードプレビューファイルダウンロード", "description": "ノードデータをCSV形式でエクスポートします。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n\n    レスポンス:\n        - Content-Type: text/csv\n        - File: データファイル\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードが見つからない", "operationId": "download_node_preview_api_v1_project__project_id__driver_tree_node__node_id__preview_output_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/node/{node_id}/policy": {"post": {"tags": ["driver-tree-node"], "summary": "施策設定作成", "description": "施策を設定します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n\n    リクエストボディ:\n        - DriverTreeNodePolicyCreateRequest: 施策作成リクエスト\n            - name (str): 施策名（必須）\n            - value (float): 施策値（必須）\n\n    レスポンス:\n        - DriverTreeNodePolicyCreateResponse: 施策作成レスポンス\n            - node_id (uuid): ノードID\n            - policies (list[DriverTreeNodePolicyInfo]): 施策リスト\n                - policy_id (uuid): 施策ID\n                - name (str): 施策名\n                - value (float): 施策値\n\n    ステータスコード:\n        - 201: 作成成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードが見つからない", "operationId": "create_policy_api_v1_project__project_id__driver_tree_node__node_id__policy_post", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodePolicyCreateRequest"}}}}, "responses": {"201": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodePolicyCreateResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "get": {"tags": ["driver-tree-node"], "summary": "施策設定一覧取得", "description": "ノードに設定されている全施策の一覧を取得します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n\n    レスポンス:\n        - DriverTreeNodePolicyResponse: 施策一覧レスポンス\n            - node_id (uuid): ノードID\n            - policies (list[DriverTreeNodePolicyInfo]): 施策リスト\n                - policy_id (uuid): 施策ID\n                - name (str): 施策名\n                - value (float): 施策値\n\n    ステータスコード:\n        - 200: 成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードが見つからない", "operationId": "list_policies_api_v1_project__project_id__driver_tree_node__node_id__policy_get", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodePolicyResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/api/v1/project/{project_id}/driver-tree/node/{node_id}/policy/{policy_id}": {"patch": {"tags": ["driver-tree-node"], "summary": "施策設定更新", "description": "施策設定を更新します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n        - policy_id: uuid - 施策ID（必須）\n\n    リクエストボディ:\n        - DriverTreeNodePolicyUpdateRequest: 施策更新リクエスト\n            - name (str): 施策名（オプション）\n            - value (float): 施策値（オプション）\n\n    レスポンス:\n        - DriverTreeNodePolicyUpdateResponse: 施策更新レスポンス\n            - node_id (uuid): ノードID\n            - policies (list[DriverTreeNodePolicyInfo]): 施策リスト\n                - policy_id (uuid): 施策ID\n                - name (str): 施策名\n                - value (float): 施策値\n\n    ステータスコード:\n        - 200: 更新成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードまたは施策が見つからない", "operationId": "update_policy_api_v1_project__project_id__driver_tree_node__node_id__policy__policy_id__patch", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}, {"name": "policy_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Policy Id"}}], "requestBody": {"required": true, "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodePolicyUpdateRequest"}}}}, "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodePolicyUpdateResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}, "delete": {"tags": ["driver-tree-node"], "summary": "施策設定削除", "description": "施策設定を削除します。\n\n    **認証が必要です。**\n\n    パスパラメータ:\n        - project_id: uuid - プロジェクトID（必須）\n        - node_id: uuid - ノードID（必須）\n        - policy_id: uuid - 施策ID（必須）\n\n    レスポンス:\n        - DriverTreeNodePolicyDeleteResponse: 施策削除レスポンス\n            - node_id (uuid): ノードID\n            - policies (list[DriverTreeNodePolicyInfo]): 施策リスト\n                - policy_id (uuid): 施策ID\n                - name (str): 施策名\n                - value (float): 施策値\n\n    ステータスコード:\n        - 200: 削除成功\n        - 401: 認証されていない\n        - 403: 権限なし（メンバーではない）\n        - 404: ノードまたは施策が見つからない", "operationId": "delete_policy_api_v1_project__project_id__driver_tree_node__node_id__policy__policy_id__delete", "security": [{"HTTPBearer": []}], "parameters": [{"name": "project_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "description": "プロジェクトID", "title": "Project Id"}, "description": "プロジェクトID"}, {"name": "node_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Node Id"}}, {"name": "policy_id", "in": "path", "required": true, "schema": {"type": "string", "format": "uuid", "title": "Policy Id"}}], "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/DriverTreeNodePolicyDeleteResponse"}}}}, "422": {"description": "Validation Error", "content": {"application/json": {"schema": {"$ref": "#/components/schemas/HTTPValidationError"}}}}}}}, "/": {"get": {"tags": ["root"], "summary": "Root", "description": "ルートエンドポイント - APIの基本情報を返します。\n\nアプリケーションのウェルカムメッセージとバージョン情報、\nドキュメントへのリンクを提供します。APIが正常に起動しているかの\n簡易チェックにも使用できます。\n\nReturns:\n    dict: アプリケーション基本情報\n        - message (str): ウェルカムメッセージ\n        - version (str): アプリケーションバージョン（例: \"0.1.0\"）\n        - docs (str): Swagger UIドキュメントのパス（\"/docs\"）\n\nExample:\n    >>> # cURLでアクセス\n    >>> $ curl http://localhost:8000/\n    >>> {\n    >>>   \"message\": \"Welcome to camp-backend\",\n    >>>   \"version\": \"0.1.0\",\n    >>>   \"docs\": \"/docs\"\n    >>> }\n\nNote:\n    - 認証不要のパブリックエンドポイントです\n    - ロードバランサーのヘルスチェックには /health を使用してください", "operationId": "root__get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}, "/health": {"get": {"tags": ["health"], "summary": "Health", "description": "ヘルスチェックエンドポイント - アプリケーションとその依存サービスの正常性を確認します。\n\nデータベース（PostgreSQL）とRedisキャッシュの接続状態を検証し、\nアプリケーション全体の健全性を報告します。ロードバランサーや\n監視システム（Kubernetes liveness/readiness probe、Datadog等）から\n定期的に呼び出されることを想定しています。\n\nチェック項目:\n    1. **データベース接続**: SELECT 1 クエリで接続確認\n       - 成功: \"healthy\"\n       - 失敗: \"unhealthy\"\n    2. **Redisキャッシュ**: PINGコマンドで接続確認\n       - REDIS_URL未設定: \"disabled\"\n       - 接続成功: \"healthy\"\n       - 接続失敗: \"unhealthy\"\n    3. **総合ステータス**:\n       - DBが正常: \"healthy\"\n       - DBが異常: \"degraded\"（Redisの状態に関わらず）\n\nReturns:\n    dict: ヘルスチェック結果\n        - status (str): 総合ステータス（\"healthy\" | \"degraded\"）\n        - timestamp (str): チェック実行時刻（ISO 8601形式、UTC）\n        - version (str): アプリケーションバージョン\n        - environment (str): 実行環境（development | staging | production）\n        - services (dict): 各サービスの個別ステータス\n            - database (str): \"healthy\" | \"unhealthy\"\n            - redis (str): \"healthy\" | \"unhealthy\" | \"disabled\"\n\nExample:\n    >>> # 正常時のレスポンス\n    >>> $ curl http://localhost:8000/health\n    >>> {\n    >>>   \"status\": \"healthy\",\n    >>>   \"timestamp\": \"2025-10-16T14:30:00.000000Z\",\n    >>>   \"version\": \"0.1.0\",\n    >>>   \"environment\": \"development\",\n    >>>   \"services\": {\n    >>>     \"database\": \"healthy\",\n    >>>     \"redis\": \"healthy\"\n    >>>   }\n    >>> }\n    >>>\n    >>> # Redis未設定時のレスポンス\n    >>> {\n    >>>   \"status\": \"healthy\",\n    >>>   \"services\": {\n    >>>     \"database\": \"healthy\",\n    >>>     \"redis\": \"disabled\"\n    >>>   }\n    >>> }\n\nNote:\n    - 認証不要のパブリックエンドポイントです\n    - データベース接続失敗時はエラーログを出力します\n    - Kubernetesのliveness/readiness probeに最適です\n    - タイムアウト: データベースクエリは接続プールの設定に依存（デフォルト30秒）", "operationId": "health_health_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}, "/metrics": {"get": {"tags": ["metrics"], "summary": "Metrics", "description": "Prometheusメトリクスエンドポイント - アプリケーションのパフォーマンスメトリクスを公開します。\n\nPrometheus監視システムが収集できる形式（テキストベース）でメトリクスを出力します。\nPrometheusMetricsMiddlewareによって自動収集されたHTTPリクエストの統計情報\n（リクエスト数、レスポンスタイム、エラー率等）を提供します。\n\n収集されるメトリクス（PrometheusMetricsMiddlewareによる）:\n    - http_requests_total: HTTPリクエスト総数（method, endpoint, status_codeでラベリング）\n    - http_request_duration_seconds: リクエスト処理時間のヒストグラム\n    - http_requests_in_progress: 現在処理中のリクエスト数\n\n出力形式:\n    Prometheus Exposition Format（テキスト形式）\n    Content-Type: text/plain; version=0.0.4\n\nReturns:\n    Response: Prometheusメトリクスのテキストレスポンス\n        - メトリクス名、ラベル、値のリスト\n\nExample:\n    >>> # cURLでアクセス\n    >>> $ curl http://localhost:8000/metrics\n    >>> # HELP http_requests_total Total HTTP requests\n    >>> # TYPE http_requests_total counter\n    >>> http_requests_total{method=\"GET\",endpoint=\"/health\",status_code=\"200\"} 42.0\n    >>> http_requests_total{method=\"POST\",endpoint=\"/api/v1/agents/chat\",status_code=\"200\"} 15.0\n    >>> # HELP http_request_duration_seconds HTTP request duration\n    >>> # TYPE http_request_duration_seconds histogram\n    >>> http_request_duration_seconds_bucket{le=\"0.1\"} 50.0\n    >>> http_request_duration_seconds_bucket{le=\"0.5\"} 55.0\n    >>> http_request_duration_seconds_sum 12.5\n    >>> http_request_duration_seconds_count 57.0\n\nNote:\n    - 認証不要のパブリックエンドポイントです\n    - Prometheusサーバーの設定例（prometheus.yml）:\n      ```yaml\n      scrape_configs:\n        - job_name: 'fastapi-app'\n          static_configs:\n            - targets: ['localhost:8000']\n          metrics_path: '/metrics'\n      ```\n    - Grafanaダッシュボードと連携して可視化できます\n    - セキュリティ: 本番環境では認証を追加することを推奨します", "operationId": "metrics_metrics_get", "responses": {"200": {"description": "Successful Response", "content": {"application/json": {"schema": {}}}}}}}}, "components": {"schemas": {"AnalysisChatCreate": {"properties": {"role": {"type": "string", "maxLength": 50, "title": "Role", "description": "ロール(例: 'user', 'assistant')"}, "message": {"type": "string", "title": "Message", "description": "メッセージ内容"}}, "type": "object", "required": ["role", "message"], "title": "AnalysisChatCreate", "description": "分析チャット作成リクエストスキーマ。\n\n現在のsnapshotに新規チャットメッセージ作成時に使用します。\n\nAttributes:\n    role (str): ロール(例: \"user\", \"assistant\")\n    message (str): メッセージ内容\n\nExample:\n    >>> chat = AnalysisChatCreate(\n    ...     role=\"user\",\n    ...     message=\"売上の推移を分析してください\"\n    ... )"}, "AnalysisChatResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "チャットID"}, "chatOrder": {"type": "integer", "title": "Chatorder", "description": "チャット順序"}, "role": {"type": "string", "maxLength": 50, "title": "Role", "description": "ロール(例: 'user', 'assistant')"}, "message": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Message", "description": "メッセージ内容"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "chatOrder", "role", "createdAt", "updatedAt"], "title": "AnalysisChatResponse", "description": "分析チャットレスポンススキーマ。\n\nチャットのレスポンスを定義します。\n\nAttributes:\n    id (uuid.UUID): チャットID\n    chat_order (int): チャット順序\n    role (str): ロール\n    message (str | None): メッセージ内容\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"423e4567-e89b-12d3-a456-426614174333\",\n    ...     \"chat_order\": 1,\n    ...     \"role\": \"user\",\n    ...     \"message\": \"売上の推移を分析してください\",\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-02T00:00:00Z\"\n    ... }"}, "AnalysisDummyChartResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "チャートID"}, "chart": {"additionalProperties": true, "type": "object", "title": "Chart", "description": "チャートデータ(Plotly JSON)"}, "chartOrder": {"type": "integer", "title": "Chartorder", "description": "チャートの表示順序"}, "issueId": {"type": "string", "format": "uuid", "title": "Issueid", "description": "課題ID"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "chart", "chartOrder", "issueId", "createdAt", "updatedAt"], "title": "AnalysisDummyChartResponse", "description": "ダミーチャートレスポンススキーマ。\n\nチャート情報の API レスポンスを定義します。\n\nAttributes:\n    id (uuid.UUID): チャートID\n    chart (dict): チャートデータ(Plotly JSON)\n    chart_order (int): チャートの表示順序\n    issue_id (uuid.UUID): 所属する課題ID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"issue_id\": \"223e4567-e89b-12d3-a456-426614174000\",\n    ...     \"chart\": \"eyJkYXRhIjogWy4uLl19\",  // Base64エンコード\n    ...     \"chart_order\": 1,\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"}, "AnalysisDummyFormulaResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "計算式ID"}, "name": {"type": "string", "title": "Name", "description": "計算式名、例: '平均売上'"}, "value": {"type": "string", "title": "Value", "description": "計算結果と単位を含む文字列、例: '5000円'"}, "formulaOrder": {"type": "integer", "title": "Formulaorder", "description": "計算式の表示順序"}, "issueId": {"type": "string", "format": "uuid", "title": "Issueid", "description": "課題ID"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "name", "value", "formulaOrder", "issueId", "createdAt", "updatedAt"], "title": "AnalysisDummyFormulaResponse", "description": "ダミー計算式レスポンススキーマ。\n\n計算式情報の API レスポンスを定義します。\n\nAttributes:\n    id (uuid.UUID): 計算式ID\n    name (str): 計算式名\n    value (str): 計算結果と単位を含む文字列\n    formula_order (int): 計算式の表示順序\n    issue_id (uuid.UUID): 所属する課題ID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"issue_id\": \"223e4567-e89b-12d3-a456-426614174000\",\n    ...     \"name\": \"平均売上\",\n    ...     \"value\": \"5000円\",\n    ...     \"formula_order\": 1,\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"}, "AnalysisFileConfigResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "分析ファイルID"}, "configList": {"items": {"additionalProperties": true, "type": "object"}, "type": "array", "title": "Configlist", "description": "設定候補リスト"}}, "type": "object", "required": ["id", "configList"], "title": "AnalysisFileConfigResponse", "description": "分析ファイル設定レスポンススキーマ。\n\n分析ファイルの設定情報を返すレスポンスを定義します。\nファイル選択後、軸設定、シート設定の候補を返す際に使用します。\n\nAttributes:\n    id (uuid.UUID): 分析ファイルID\n    conig_list (list[dict[str, Any]]): 設定候補リスト\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"config_list\": [\n    ...         {\n    ...             \"sheet_name\": \"Sheet1\",\n    ...             \"axis_config\": {\"軸1\": \"店舗名\", \"軸2\": \"地域\"}\n    ...         },\n    ...         {\n    ...             \"sheet_name\": \"Sheet2\",\n    ...             \"axis_config\": {\"軸1\": \"商品カテゴリ\", \"軸2\": \"売上\"}\n    ...         }\n    ...     ]\n    ... }"}, "AnalysisFileCreate": {"properties": {"projectFileId": {"type": "string", "format": "uuid", "title": "Projectfileid", "description": "プロジェクトファイルID"}}, "type": "object", "required": ["projectFileId"], "title": "AnalysisFileCreate", "description": "分析ファイル作成スキーマ。\n\n新規分析ファイル作成時の入力データを定義します。\n注意: シート名、軸設定はここで指定できない、Update 時に設定してください。\n\nAttributes:\n    project_file_id (uuid.UUID): プロジェクトファイルID\n\nExample:\n    >>> analysis_file_create = AnalysisFileCreate(\n    ...     project_file_id=uuid.UUID(\"123e4567-e89b-12d3-a456-426614174000\"),\n    ... )"}, "AnalysisFileListResponse": {"properties": {"files": {"items": {"$ref": "#/components/schemas/AnalysisFileResponse"}, "type": "array", "title": "Files", "description": "ファイルリスト"}, "total": {"type": "integer", "title": "Total", "description": "総件数"}}, "type": "object", "required": ["files", "total"], "title": "AnalysisFileListResponse", "description": "分析ファイル一覧レスポンススキーマ。\n\n分析ファイル一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    files (list[AnalysisFileResponse]): ファイルリスト\n    total (int): 総件数\n\nExample:\n    >>> response = AnalysisFileListResponse(\n    ...     files=[file1, file2, file3],\n    ...     total=3\n    ... )"}, "AnalysisFileResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "分析ファイルID"}, "sheetName": {"type": "string", "maxLength": 255, "title": "Sheetname", "description": "シート名"}, "axisConfig": {"additionalProperties": true, "type": "object", "title": "Axisconfig", "description": "軸設定JSON"}, "data": {"items": {"additionalProperties": true, "type": "object"}, "type": "array", "title": "Data", "description": "データJSON（pandas DataFrameのrecord形式）"}, "sessionId": {"type": "string", "format": "uuid", "title": "Sessionid", "description": "セッションID"}, "projectFileId": {"type": "string", "format": "uuid", "title": "Projectfileid", "description": "プロジェクトファイルID"}, "projectFileName": {"type": "string", "title": "Projectfilename", "description": "プロジェクトファイル名"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "sheetName", "axisConfig", "data", "sessionId", "projectFileId", "projectFileName", "createdAt", "updatedAt"], "title": "AnalysisFileResponse", "description": "分析ファイルレスポンススキーマ。\n\n分析ファイル情報の API レスポンスを定義します。\n\nAttributes:\n    id (uuid.UUID): 分析ファイルID\n    session_id (uuid.UUID): セッションID\n    project_file_id (uuid.UUID): プロジェクトファイルID\n    project_file_name (str): プロジェクトファイル名 (結合データ)\n    sheet_name (str): シート名\n    axis_config (dict[str, Any]): 軸設定JSON\n    data (dict[str, Any]): データJSON\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"session_id\": \"323e4567-e89b-12d3-a456-426614174222\",\n    ...     \"project_file_id\": \"223e4567-e89b-12d3-a456-426614174111\",\n    ...     \"project_file_name\": \"sales_data.xlsx\",\n    ...     \"sheet_name\": \"Sheet1\",\n    ...     \"axis_config\": {\"軸1\": \"店舗名\", \"軸2\": \"地域\"},\n    ...     \"data\": [{\"店舗名\": \"A店\", \"売上\": 1000, \"地域\": \"東京\"}, ...], // pandas DataFrame の record 形式\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"}, "AnalysisFileUpdate": {"properties": {"sheetName": {"anyOf": [{"type": "string", "maxLength": 255}, {"type": "null"}], "title": "Sheetname", "description": "シート名"}, "axisConfig": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"type": "null"}], "title": "Axisconfig", "description": "軸設定JSON"}}, "type": "object", "title": "AnalysisFileUpdate", "description": "分析ファイル更新スキーマ。\n\n分析ファイル更新時の入力データを定義します。\nすべてのフィールドは Optional(部分更新対応)。\n\nAttributes:\n    sheet_name (str | None): シート名\n    axis_config (dict[str, Any] | None): 軸設定JSON\n\nExample:\n    >>> analysis_file_update = AnalysisFileUpdate(\n    ...     sheet_name=\"UpdatedSheet\",\n    ...     axis_config={\"軸1\": \"店舗名\", \"軸2\": \"商品カテゴリ\"}\n    ... )"}, "AnalysisGraphAxisResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "軸設定ID"}, "name": {"type": "string", "maxLength": 200, "title": "Name", "description": "軸名、例: '横軸', '色分け'"}, "option": {"type": "string", "maxLength": 50, "title": "Option", "description": "'科目'または'軸'のいずれか"}, "multiple": {"type": "boolean", "title": "Multiple", "description": "複数選択可能か", "default": false}, "axisOrder": {"type": "integer", "title": "Axisorder", "description": "軸の表示順序"}, "issueId": {"type": "string", "format": "uuid", "title": "Issueid", "description": "課題ID"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "name", "option", "axisOrder", "issueId", "createdAt", "updatedAt"], "title": "AnalysisGraphAxisResponse", "description": "グラフ軸設定レスポンススキーマ。\n\n軸設定の API レスポンスを定義します。\n\nAttributes:\n    id (uuid.UUID): 軸設定ID\n    name (str): 軸名\n    option (str): '科目'または'軸'のいずれか\n    multiple (bool): 複数選択可能か\n    axis_order (int): 軸の表示順序\n    issue_id (uuid.UUID): 所属する課題ID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"issue_id\": \"223e4567-e89b-12d3-a456-426614174000\",\n    ...     \"name\": \"横軸\",\n    ...     \"option\": \"科目\",\n    ...     \"multiple\": false,\n    ...     \"axis_order\": 1,\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"}, "AnalysisIssueCatalogListResponse": {"properties": {"issues": {"items": {"$ref": "#/components/schemas/AnalysisIssueCatalogResponse"}, "type": "array", "title": "Issues", "description": "課題カタログリスト"}, "total": {"type": "integer", "title": "Total", "description": "総件数"}}, "type": "object", "required": ["issues", "total"], "title": "AnalysisIssueCatalogListResponse", "description": "課題カタログ一覧レスポンススキーマ。\n\n課題カタログ一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    issues (list[AnalysisIssueCatalogResponse]): 課題カタログリスト\n    total (int): 総件数\n\nExample:\n    >>> response = AnalysisIssueCatalogListResponse(\n    ...     issues=[issue1, issue2, issue3],\n    ...     total=3\n    ... )"}, "AnalysisIssueCatalogResponse": {"properties": {"validationId": {"type": "string", "format": "uuid", "title": "Validationid", "description": "施策ID"}, "validation": {"type": "string", "title": "Validation", "description": "施策名(結合データ)"}, "validationOrder": {"type": "integer", "title": "Validationorder", "description": "施策表示順序(結合データ)"}, "id": {"type": "string", "format": "uuid", "title": "Id", "description": "課題ID"}, "name": {"type": "string", "title": "Name", "description": "課題名"}, "issueOrder": {"type": "integer", "title": "Issueorder", "description": "表示順序"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["validationId", "validation", "validationOrder", "id", "name", "issueOrder", "createdAt", "updatedAt"], "title": "AnalysisIssueCatalogResponse", "description": "課題カタログレスポンススキーマ。\n\n一覧表示用、基本情報のみ(詳細・ダミーデータ含まず)。\n\nAttributes:\n    id (uuid.UUID): 課題ID\n    validation_id (uuid.UUID): 施策ID\n    validation (str): 施策名(結合データ)\n    validation_order (int): 施策表示順序(結合データ)\n    name (str): 課題名\n    issue_order (int): 表示順序\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"validation_id\": \"223e4567-e89b-12d3-a456-426614174000\",\n    ...     \"validation\": \"市場拡大\",\n    ...     \"validation_order\": 1,\n    ...     \"name\": \"新規参入\",\n    ...     \"issue_order\": 1,\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"}, "AnalysisIssueDetailResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "課題ID"}, "name": {"type": "string", "maxLength": 255, "title": "Name", "description": "課題名"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "課題の説明"}, "agentPrompt": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Agentprompt", "description": "AIエージェント用のプロンプト"}, "initialMsg": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Initialmsg", "description": "初期メッセージ"}, "dummyInput": {"anyOf": [{"items": {"additionalProperties": true, "type": "object"}, "type": "array"}, {"type": "null"}], "title": "Dummyinput", "description": "ダミー入力データ(pandas.to_dict, orient='records')形式"}, "dummyHint": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Dummyhint", "description": "ダミー入力ヒント"}, "issueOrder": {"type": "integer", "title": "Issueorder", "description": "表示順序", "default": 0}, "validationId": {"type": "string", "format": "uuid", "title": "Validationid", "description": "施策ID"}, "validation": {"type": "string", "title": "Validation", "description": "施策名(結合データ)"}, "validationOrder": {"type": "integer", "title": "Validationorder", "description": "施策表示順序(結合データ)"}, "initialAxis": {"items": {"$ref": "#/components/schemas/AnalysisGraphAxisResponse"}, "type": "array", "title": "Initialaxis", "description": "初期軸設定(結合データ)"}, "dummyFormula": {"items": {"$ref": "#/components/schemas/AnalysisDummyFormulaResponse"}, "type": "array", "title": "Dummyformula", "description": "ダミー計算式(結合データ)"}, "dummyChart": {"items": {"$ref": "#/components/schemas/AnalysisDummyChartResponse"}, "type": "array", "title": "Dummychart", "description": "ダミーチャート(結合データ)"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "name", "validationId", "validation", "validationOrder", "createdAt", "updatedAt"], "title": "AnalysisIssueDetailResponse", "description": "課題詳細情報レスポンススキーマ。\n\n詳細情報、初期軸設定、ダミーデータを含む。\n\nAttributes:\n    id (uuid.UUID): 課題ID\n    name (str): 課題名\n    description (str | None): 課題説明\n    agent_prompt (str | None): AIエージェント用プロンプト\n    initial_msg (str | None): 初期メッセージ\n    dummy_input (list[dict] | None): ダミー入力データ\n    dummy_hint (str | None): ダミーヒント\n    issue_order (int): 表示順序\n    validation_id (uuid.UUID): 施策ID\n    validation (str): 施策名(結合データ)\n    validation_order (int): 施策表示順序(結合データ)\n    initial_axis (list[AnalysisGraphAxisResponse]): 初期軸設定(結合データ)\n    dummy_formula (list[AnalysisDummyFormulaResponse]): ダミー計算式(結合データ)\n    dummy_chart (list[AnalysisDummyChartResponse]): ダミーチャート(結合データ)\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"validation_id\": \"223e4567-e89b-12d3-a456-426614174000\",\n    ...     \"validation\": \"市場拡大\",\n    ...     \"validation_order\": 1,\n    ...     \"name\": \"新規参入\",\n    ...     \"description\": \"新規市場への参入効果を分析します\",\n    ...     \"agent_prompt\": \"あなたは優秀なデータ分析アシスタントです。...\",\n    ...     \"initial_msg\": \"分析を開始します\",\n    ...     \"dummy_input\": [{\"店舗名\": \"A店\", \"売上\": 1000, \"地域\": \"東京\"}],\n    ...     \"dummy_hint\": \"年度ごとの売上データを入力してください。\",\n    ...     \"issue_order\": 1,\n    ...     \"initial_axis\": [{name: \"...\", option: \"...\", multiple: false}, ...],\n    ...     \"dummy_formula\": [{name: \"...\", value: \"...\", formula_order: 0}, ...],\n    ...     \"dummy_chart\": [\"plotly instance json\", ...],\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"}, "AnalysisSessionCreate": {"properties": {"projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "issueId": {"type": "string", "format": "uuid", "title": "Issueid", "description": "課題ID"}}, "type": "object", "required": ["projectId", "issueId"], "title": "AnalysisSessionCreate", "description": "分析セッション作成リクエストスキーマ。\n\n新規分析セッション作成時に使用します。\n\nAttributes:\n    project_id (uuid.UUID): プロジェクトID\n    issue_id (uuid.UUID): 課題ID\n    creator_id (uuid.UUID): 作成者のユーザーID\n\nExample:\n    >>> session = AnalysisSessionCreate(\n    ...     project_id=uuid.uuid4(),\n    ...     issue_id=uuid.uuid4(),\n    ...     creator_id=uuid.uuid4(),\n    ... )"}, "AnalysisSessionDetailResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "セッションID"}, "currentSnapshot": {"type": "integer", "title": "Currentsnapshot", "description": "現在のスナップショット番号"}, "projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "issueId": {"type": "string", "format": "uuid", "title": "Issueid", "description": "課題ID"}, "creatorId": {"type": "string", "format": "uuid", "title": "Creatorid", "description": "作成者のユーザーID"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}, "inputFileId": {"anyOf": [{"type": "string", "format": "uuid"}, {"type": "null"}], "title": "Inputfileid", "description": "入力ファイルID"}, "snapshotList": {"items": {"$ref": "#/components/schemas/AnalysisSnapshotResponse"}, "type": "array", "title": "Snapshotlist", "description": "スナップショットリスト", "default": []}, "fileList": {"items": {"$ref": "#/components/schemas/AnalysisFileResponse"}, "type": "array", "title": "Filelist", "description": "分析ファイルリスト", "default": []}}, "type": "object", "required": ["id", "currentSnapshot", "projectId", "issueId", "creatorId", "createdAt", "updatedAt"], "title": "AnalysisSessionDetailResponse", "description": "分析セッション詳細レスポンススキーマ。\n\n分析セッションの詳細情報を含むレスポンスを定義します。\n\nAttributes:\n    input_file_id (uuid.UUID | None): 入力ファイルID\n\nExample:\n    >>> {\n    ...     \"id\": \"223e4567-e89b-12d3-a456-426614174111\",\n    ...     \"project_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"issue_id\": \"323e4567-e89b-12d3-a456-426614174222\",\n    ...     \"creator_id\": \"423e4567-e89b-12d3-a456-426614174333\",\n    ...     \"current_snapshot\": 2,\n    ...     \"snapshot_list\": [AnalysisSnapshotResponse, ...],\n    ...     \"file_list\": [AnalysisFileResponse, ...],\n    ...     \"input_file_id\": \"523e4567-e89b-12d3-a456-426614174444\",\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-02T00:00:00Z\"\n    ... }"}, "AnalysisSessionListResponse": {"properties": {"sessions": {"items": {"$ref": "#/components/schemas/AnalysisSessionResponse"}, "type": "array", "title": "Sessions", "description": "セッションリスト"}, "total": {"type": "integer", "title": "Total", "description": "総件数"}, "skip": {"type": "integer", "title": "Skip", "description": "スキップ数（オフセット）"}, "limit": {"type": "integer", "title": "Limit", "description": "取得件数"}}, "type": "object", "required": ["sessions", "total", "skip", "limit"], "title": "AnalysisSessionListResponse", "description": "分析セッション一覧レスポンススキーマ。\n\n分析セッション一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    sessions (list[AnalysisSessionResponse]): セッションリスト\n    total (int): 総件数\n    skip (int): スキップ数（オフセット）\n    limit (int): 取得件数\n\nExample:\n    >>> response = AnalysisSessionListResponse(\n    ...     sessions=[session1, session2, session3],\n    ...     total=100,\n    ...     skip=0,\n    ...     limit=10\n    ... )"}, "AnalysisSessionResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "セッションID"}, "currentSnapshot": {"type": "integer", "title": "Currentsnapshot", "description": "現在のスナップショット番号"}, "projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "issueId": {"type": "string", "format": "uuid", "title": "Issueid", "description": "課題ID"}, "creatorId": {"type": "string", "format": "uuid", "title": "Creatorid", "description": "作成者のユーザーID"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "currentSnapshot", "projectId", "issueId", "creatorId", "createdAt", "updatedAt"], "title": "AnalysisSessionResponse", "description": "分析セッションレスポンススキーマ。\n\n分析セッションを選択するときに、レスポンスとして返す際に使用します。\n詳細内容は含まれません。\n\nAttributes:\n    id (uuid.UUID): セッションID\n    current_snapshot (int): 現在のスナップショット番号\n    project_id (uuid.UUID): プロジェクトID\n    issue_id (uuid.UUID): 課題ID\n    creator_id (uuid.UUID): 作成者のユーザーID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"223e4567-e89b-12d3-a456-426614174111\",\n    ...     \"project_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"issue_id\": \"323e4567-e89b-12d3-a456-426614174222\",\n    ...     \"creator_id\": \"423e4567-e89b-12d3-a456-426614174333\",\n    ...     \"current_snapshot\": 2,\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-02T00:00:00Z\"\n    ... }"}, "AnalysisSessionResultListResponse": {"properties": {"results": {"items": {"$ref": "#/components/schemas/AnalysisSessionResultResponse"}, "type": "array", "title": "Results", "description": "結果リスト"}, "total": {"type": "integer", "title": "Total", "description": "総件数"}}, "type": "object", "required": ["results", "total"], "title": "AnalysisSessionResultListResponse", "description": "分析セッション結果一覧レスポンススキーマ。\n\n分析セッション結果一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    results (list[AnalysisSessionResultResponse]): 結果リスト\n    total (int): 総件数\n\nExample:\n    >>> response = AnalysisSessionResultListResponse(\n    ...     results=[result1, result2, result3],\n    ...     total=3\n    ... )"}, "AnalysisSessionResultResponse": {"properties": {"stepId": {"type": "string", "format": "uuid", "title": "Stepid", "description": "ステップID"}, "stepName": {"type": "string", "title": "Stepname", "description": "ステップ名"}, "resultFormula": {"anyOf": [{"items": {"additionalProperties": true, "type": "object"}, "type": "array"}, {"type": "null"}], "title": "Resultformula", "description": "結果の数式リスト"}, "resultChart": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"type": "null"}], "title": "Resultchart", "description": "結果のチャート (plotly の JSON)"}, "resultTable": {"anyOf": [{"items": {"additionalProperties": true, "type": "object"}, "type": "array"}, {"type": "null"}], "title": "Resulttable", "description": "結果のテーブル (pandasのto_dict(orient='records')形式)"}}, "type": "object", "required": ["stepId", "stepName"], "title": "AnalysisSessionResultResponse", "description": "分析セッション結果レスポンススキーマ。\n\n分析セッションのサマリステップ結果を含むレスポンスを定義します。\n\nAttributes:\n    step_id (uuid.UUID): ステップID\n    step_name (str): ステップ名\n    result_formula (list[dict[str, Any]] | None): 結果の数式リスト\n    result_chart (dict[str, Any] | None): 結果のチャート (plotly の JSON)\n    result_table (list[dict[str, Any]] | None): 結果のテーブル (pandasのto_dict(orient='records')形式)"}, "AnalysisSessionUpdate": {"properties": {"currentSnapshot": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Currentsnapshot", "description": "現在のスナップショット番号"}, "inputFileId": {"anyOf": [{"type": "string", "format": "uuid"}, {"type": "null"}], "title": "Inputfileid", "description": "入力ファイルID"}}, "type": "object", "title": "AnalysisSessionUpdate", "description": "分析セッション更新リクエストスキーマ。\n\n既存の分析セッションを更新する際に使用します。\n選択ファイルの変更、またはスナップショットの切り替えに対応。\nすべてのフィールドは Optional(部分更新対応)。\n\nAttributes:\n    current_snapshot (int | None): 現在のスナップショット番号\n    input_file_id (uuid.UUID | None): 入力ファイルID\n\nExample:\n    >>> session_update = AnalysisSessionUpdate(\n    ...     current_snapshot=変更後の番号,\n    ...     input_file_id=変更後のファイルID\n    ... )"}, "AnalysisSnapshotResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "スナップショットID"}, "snapshotOrder": {"type": "integer", "title": "Snapshotorder", "description": "スナップショット順序"}, "chat": {"items": {"$ref": "#/components/schemas/AnalysisChatResponse"}, "type": "array", "title": "Chat", "description": "チャットメッセージリスト", "default": []}, "step": {"items": {"$ref": "#/components/schemas/AnalysisStepResponse"}, "type": "array", "title": "Step", "description": "ステップリスト", "default": []}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "snapshotOrder", "createdAt", "updatedAt"], "title": "AnalysisSnapshotResponse", "description": "分析スナップショットレスポンススキーマ。\n\n分析スナップショット情報の API レスポンスを定義します。\n\nAttributes:\n    id (uuid.UUID): スナップショットID\n    snapshot_order (int): スナップショット順序\n    chat (list[AnalysisChatResponse]): チャットメッセージリスト\n    step (list[AnalysisStepResponse]): ステップリスト\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"623e4567-e89b-12d3-a456-426614174555\",\n    ...     \"snapshot_order\": 1,\n    ...     \"chat\": [AnalysisChatResponse, ...],\n    ...     \"step\": [AnalysisStepResponse, ...],\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-02T00:00:00Z\"\n    ... }"}, "AnalysisStepCreate": {"properties": {"name": {"type": "string", "maxLength": 255, "title": "Name", "description": "ステップ名"}, "type": {"type": "string", "maxLength": 50, "title": "Type", "description": "ステップタイプ"}, "input": {"type": "string", "maxLength": 255, "title": "Input", "description": "入力データの参照"}}, "type": "object", "required": ["name", "type", "input"], "title": "AnalysisStepCreate", "description": "分析ステップ作成リクエストスキーマ。\n\n新規ステップ作成時に使用します。\n\nAttributes:\n    name (str): ステップ名\n    type (str): ステップタイプ (例: \"filter\", \"aggregation\", \"transform\", \"summary\")\n    input (str): 入力データの参照\n\nExample:\n    >>> step = AnalysisStepCreate(\n    ...     name=\"売上フィルタ\",\n    ...     type=\"filter\",\n    ...     input=\"step_1\", // ステップ1の出力を参照\n    ... )"}, "AnalysisStepResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "ステップID"}, "name": {"type": "string", "maxLength": 255, "title": "Name", "description": "ステップ名"}, "stepOrder": {"type": "integer", "title": "Steporder", "description": "ステップ順序"}, "type": {"type": "string", "maxLength": 50, "title": "Type", "description": "ステップタイプ"}, "input": {"type": "string", "maxLength": 255, "title": "Input", "description": "入力データの参照"}, "config": {"additionalProperties": true, "type": "object", "title": "Config", "description": "ステップ設定(JSON)"}, "snapshotId": {"type": "string", "format": "uuid", "title": "Snapshotid", "description": "スナップショットID"}, "resultFormula": {"anyOf": [{"items": {"additionalProperties": true, "type": "object"}, "type": "array"}, {"type": "null"}], "title": "Resultformula", "description": "結果の数式リスト"}, "resultChart": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"type": "null"}], "title": "Resultchart", "description": "結果のチャート (plotly の JSON)"}, "resultTable": {"anyOf": [{"items": {"additionalProperties": true, "type": "object"}, "type": "array"}, {"type": "null"}], "title": "Resulttable", "description": "結果のテーブル (pandasのto_dict(orient='records')形式)"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "name", "stepOrder", "type", "input", "config", "snapshotId", "createdAt", "updatedAt"], "title": "AnalysisStepResponse", "description": "分析ステップレスポンススキーマ。\n\nステップ情報の API レスポンスを定義します。\n\nAttributes:\n    id (uuid.UUID): ステップID\n    name (str): ステップ名\n    step_order (int): ステップ順序\n    type (str): ステップタイプ\n    input (str): 入力データの参照\n    config (dict[str, Any]): ステップ設定\n    snapshot_id (uuid.UUID): スナップショットID\n    result_formula (list[dict[str, Any]] | None): 結果の数式リスト\n    result_chart (dict[str, Any] | None): 結果のチャート\n    result_table (list[dict[str, Any]] | None): 結果のテーブル\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"523e4567-e89b-12d3-a456-426614174444\",\n    ...     \"name\": \"売上フィルタ\",\n    ...     \"step_order\": 1,\n    ...     \"type\": \"filter\",\n    ...     \"input\": \"step_1\",\n    ...     \"config\": {\"条件\": \"売上 > 1000\"},\n    ...     \"result_formula\": [{'name': '合計売上', 'value': '100', 'unit': '円'}, ...],\n    ...     \"result_chart\": {\"data\": [...], \"layout\": {...}},  // plotlyのJSON形式\n    ...     \"result_table\": [{\"店舗名\": \"A店\", \"売上\": 1000, \"地域\": \"東京\"}],  // pandasのto_dict(orient='records')形式\n    ...     \"snapshot_id\": \"323e4567-e89b-12d3-a456-426614174222\",\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-02T00:00:00Z\"\n    ... }"}, "AnalysisStepUpdate": {"properties": {"name": {"anyOf": [{"type": "string", "maxLength": 255}, {"type": "null"}], "title": "Name", "description": "ステップ名"}, "type": {"anyOf": [{"type": "string", "maxLength": 50}, {"type": "null"}], "title": "Type", "description": "ステップタイプ"}, "input": {"anyOf": [{"type": "string", "maxLength": 255}, {"type": "null"}], "title": "Input", "description": "入力データの参照"}, "config": {"anyOf": [{"additionalProperties": true, "type": "object"}, {"type": "null"}], "title": "Config", "description": "ステップ設定"}}, "type": "object", "title": "AnalysisStepUpdate", "description": "分析ステップ更新リクエストスキーマ。\n\n既存のステップを更新する際に使用します。\nすべてのフィールドは Optional(部分更新対応)。\n\nAttributes:\n    name (str | None): ステップ名\n    type (str | None): ステップタイプ\n    input (str | None): 入力データの参照\n    config (dict[str, Any] | None): ステップ設定"}, "Body_upload_file_api_v1_project__project_id__driver_tree_file_post": {"properties": {"file": {"type": "string", "format": "binary", "title": "File"}}, "type": "object", "required": ["file"], "title": "Body_upload_file_api_v1_project__project_id__driver_tree_file_post"}, "Body_upload_file_api_v1_project__project_id__file_post": {"properties": {"file": {"type": "string", "format": "binary", "title": "File", "description": "アップロードするファイル"}}, "type": "object", "required": ["file"], "title": "Body_upload_file_api_v1_project__project_id__file_post"}, "DriverTreeCalculatedDataResponse": {"properties": {"calculatedDataList": {"items": {"$ref": "#/components/schemas/DriverTreeNodeCalculatedData"}, "type": "array", "title": "Calculateddatalist", "description": "計算ノードの計算データ一覧"}}, "type": "object", "required": ["calculatedDataList"], "title": "DriverTreeCalculatedDataResponse", "description": "計算ノードの計算データ取得レスポンス。\nResponse:\n    - calculated_data_list: list[DriverTreeNodeCalculatedData] - 計算ノードの計算データ一覧"}, "DriverTreeCategoryResponse": {"properties": {"category": {"items": {"additionalProperties": true, "type": "object"}, "type": "array", "title": "Category", "description": "業界分類,業界名,ドライバーツリー型"}, "KPIList": {"items": {"type": "string"}, "type": "array", "title": "Kpilist", "description": "KPIリスト"}}, "type": "object", "required": ["category", "KPIList"], "title": "DriverTreeCategoryResponse", "description": "ツリーの設定選択肢(業界分類、業界名、ドライバーツリー型、KPI)取得レスポンス\nResponse:\n    - category: list[dict] - 業界分類,業界名,ドライバーツリー型\n    - KPI_list: list[str] - KPIリスト"}, "DriverTreeColumnInfo": {"properties": {"columnId": {"type": "string", "format": "uuid", "title": "Columnid", "description": "カラムID"}, "columnName": {"type": "string", "title": "Columnname", "description": "カラム名"}, "role": {"$ref": "#/components/schemas/DriverTreeColumnRoleEnum", "description": "カラムの役割", "default": "利用しない"}, "items": {"items": {"type": "string"}, "type": "array", "title": "Items", "description": "項目例"}}, "type": "object", "required": ["columnId", "columnName"], "title": "DriverTreeColumnInfo", "description": "カラム情報。\n\nAttributes:\n    - column_id: uuid - カラムID\n    - column_name: str - カラム名\n    - role: str - カラムの役割\n    - items: list[str] - 項目例"}, "DriverTreeColumnRoleEnum": {"type": "string", "enum": ["推移", "軸", "値", "利用しない"], "title": "DriverTreeColumnRoleEnum", "description": "カラムの役割。\n\nValues:\n    TRANSITION: 推移\n    AXIS: 軸\n    VALUE: 値\n    UNUSED: 利用しない"}, "DriverTreeCreateNodeRequest": {"properties": {"label": {"type": "string", "title": "Label", "description": "ノード名"}, "nodeType": {"$ref": "#/components/schemas/DriverTreeNodeTypeEnum", "description": "ノードタイプ"}, "positionX": {"type": "integer", "title": "Positionx", "description": "X座標"}, "positionY": {"type": "integer", "title": "Positiony", "description": "Y座標"}}, "type": "object", "required": ["label", "nodeType", "positionX", "positionY"], "title": "DriverTreeCreateNodeRequest", "description": "ノード作成リクエスト。\n\nRequest Body:\n    - label: str - ノード名（必須）\n    - position_x :int - 座標（必須）\n    - position_y :int - 座標（必須）\n    - node_type: str - ノードタイプ（\"入力\"|\"計算\"|\"定数\"）（必須）"}, "DriverTreeCreateTreeRequest": {"properties": {"name": {"type": "string", "title": "Name", "description": "ツリー名"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "説明"}}, "type": "object", "required": ["name"], "title": "DriverTreeCreateTreeRequest", "description": "ツリー作成リクエスト。\n\nRequest Body:\n    - name: str - ツリー名（必須）\n    - description: str - 説明（オプション）"}, "DriverTreeCreateTreeResponse": {"properties": {"treeId": {"type": "string", "format": "uuid", "title": "Treeid", "description": "ツリーID"}, "name": {"type": "string", "title": "Name", "description": "ツリー名"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "説明"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}}, "type": "object", "required": ["treeId", "name", "createdAt"], "title": "DriverTreeCreateTreeResponse", "description": "ツリー作成レスポンス。\n\nResponse:\n    - tree_id: uuid - ツリーID\n    - name: str - ツリー名\n    - description: str - 説明\n    - created_at: datetime - 作成日時"}, "DriverTreeDeleteResponse": {"properties": {"success": {"type": "boolean", "title": "Success", "description": "成功フラグ"}, "deletedAt": {"type": "string", "format": "date-time", "title": "Deletedat", "description": "削除日時"}}, "type": "object", "required": ["success", "deletedAt"], "title": "DriverTreeDeleteResponse", "description": "ツリー削除レスポンス。\n\nResponse:\n    - success: bool - 成功フラグ\n    - deleted_at: datetime - 削除日時"}, "DriverTreeFileDeleteResponse": {"properties": {"files": {"items": {"$ref": "#/components/schemas/DriverTreeUploadedFileItem"}, "type": "array", "title": "Files", "description": "ファイル一覧"}}, "type": "object", "title": "DriverTreeFileDeleteResponse", "description": "ファイル削除レスポンス。\n\nResponse:\n    - files: list[DriverTreeUploadedFileItem] - 削除後のアップロード済みファイル一覧"}, "DriverTreeFileListItem-Input": {"properties": {"fileId": {"type": "string", "format": "uuid", "title": "Fileid", "description": "ファイルID"}, "filename": {"type": "string", "title": "Filename", "description": "ファイル名"}, "uploadedAt": {"type": "string", "format": "date-time", "title": "Uploadedat", "description": "アップロード日時"}, "sheets": {"items": {"$ref": "#/components/schemas/DriverTreeSheetInfo-Input"}, "type": "array", "title": "Sheets", "description": "シート一覧"}}, "type": "object", "required": ["fileId", "filename", "uploadedAt"], "title": "DriverTreeFileListItem", "description": "ファイル一覧アイテム（List Files API用）。\n\nAttributes:\n    - file_id: uuid - ファイルID\n    - filename: str - ファイル名\n    - uploaded_at: datetime - アップロード日時\n    - sheets: - シート一覧\n        - sheet_id: uuid - シートID\n        - sheet_name: str - シート名\n        - columns:  - カラム一覧\n            - column_name: str - カラム名\n            - role: str - カラムの役割\n            - items: list[str] - 項目例"}, "DriverTreeFileListItem-Output": {"properties": {"fileId": {"type": "string", "format": "uuid", "title": "Fileid", "description": "ファイルID"}, "filename": {"type": "string", "title": "Filename", "description": "ファイル名"}, "uploadedAt": {"type": "string", "format": "date-time", "title": "Uploadedat", "description": "アップロード日時"}, "sheets": {"items": {"$ref": "#/components/schemas/DriverTreeSheetInfo-Output"}, "type": "array", "title": "Sheets", "description": "シート一覧"}}, "type": "object", "required": ["fileId", "filename", "uploadedAt"], "title": "DriverTreeFileListItem", "description": "ファイル一覧アイテム（List Files API用）。\n\nAttributes:\n    - file_id: uuid - ファイルID\n    - filename: str - ファイル名\n    - uploaded_at: datetime - アップロード日時\n    - sheets: - シート一覧\n        - sheet_id: uuid - シートID\n        - sheet_name: str - シート名\n        - columns:  - カラム一覧\n            - column_name: str - カラム名\n            - role: str - カラムの役割\n            - items: list[str] - 項目例"}, "DriverTreeFileListResponse": {"properties": {"files": {"items": {"$ref": "#/components/schemas/DriverTreeFileListItem-Output"}, "type": "array", "title": "Files", "description": "ファイル一覧"}}, "type": "object", "title": "DriverTreeFileListResponse", "description": "Select済みファイル一覧レスポンス。\n\nResponse:\n    - files: list[DriverTreeFileListItem] - Select済みファイル一覧（columns あり）"}, "DriverTreeFileUploadResponse": {"properties": {"files": {"items": {"$ref": "#/components/schemas/DriverTreeUploadedFileItem"}, "type": "array", "title": "Files", "description": "ファイル一覧"}}, "type": "object", "title": "DriverTreeFileUploadResponse", "description": "ファイルアップロードレスポンス。\n\nResponse:\n    - files: list[DriverTreeUploadedFileItem] - アップロード済みファイル一覧（columns なし）"}, "DriverTreeFormulaResponse": {"properties": {"formulas": {"items": {"type": "string"}, "type": "array", "title": "Formulas", "description": "数式一覧"}}, "type": "object", "required": ["formulas"], "title": "DriverTreeFormulaResponse", "description": "数式取得レスポンス\nResponse:\n    - formulas: list[str] - 数式一覧"}, "DriverTreeGetTreeResponse": {"properties": {"tree": {"$ref": "#/components/schemas/DriverTreeInfo-Output", "description": "ツリー詳細情報"}}, "type": "object", "required": ["tree"], "title": "DriverTreeGetTreeResponse", "description": "ツリー取得レスポンス。\n\nResponse:\n    - tree: DriverTreeInfo - ツリー詳細情報"}, "DriverTreeImportFormulaRequest": {"properties": {"positionX": {"type": "integer", "title": "Positionx", "description": "ルートノードX座標"}, "positionY": {"type": "integer", "title": "Positiony", "description": "ルートノードY座標"}, "formulas": {"items": {"type": "string"}, "type": "array", "title": "Formulas", "description": "数式リスト"}, "sheetId": {"anyOf": [{"type": "string", "format": "uuid"}, {"type": "null"}], "title": "Sheetid", "description": "入力シートID"}}, "type": "object", "required": ["positionX", "positionY", "formulas"], "title": "DriverTreeImportFormulaRequest", "description": "数式/データインポート\n\nRequest Body:\n    - position_x: int - ルートノードX座標\n    - position_y: int - ルートノードY座標\n    - formulas: list[str] - 数式リスト\n    - sheet_id: uuid - 入力シートID(オプション)"}, "DriverTreeInfo-Input": {"properties": {"treeId": {"type": "string", "format": "uuid", "title": "Treeid", "description": "ツリーID"}, "name": {"type": "string", "title": "Name", "description": "ツリー名"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "説明"}, "root": {"$ref": "#/components/schemas/DriverTreeNodeInfo"}, "nodes": {"items": {"$ref": "#/components/schemas/DriverTreeNodeInfo"}, "type": "array", "title": "Nodes"}, "relationship": {"items": {"$ref": "#/components/schemas/DriverTreeRelationshipInfo"}, "type": "array", "title": "Relationship"}}, "type": "object", "required": ["treeId", "name", "root", "nodes", "relationship"], "title": "DriverTreeInfo", "description": "ツリー情報詳細。\n\nAttributes:\n    tree_id: ツリーID\n    name: ツリー名\n    description: 説明\n    root: ルートノード\n    nodes: list[dict] ノード情報\n    relationship: list[dict] ノード親関係情報"}, "DriverTreeInfo-Output": {"properties": {"treeId": {"type": "string", "format": "uuid", "title": "Treeid", "description": "ツリーID"}, "name": {"type": "string", "title": "Name", "description": "ツリー名"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "説明"}, "root": {"$ref": "#/components/schemas/DriverTreeNodeInfo"}, "nodes": {"items": {"$ref": "#/components/schemas/DriverTreeNodeInfo"}, "type": "array", "title": "Nodes"}, "relationship": {"items": {"$ref": "#/components/schemas/DriverTreeRelationshipInfo"}, "type": "array", "title": "Relationship"}}, "type": "object", "required": ["treeId", "name", "root", "nodes", "relationship"], "title": "DriverTreeInfo", "description": "ツリー情報詳細。\n\nAttributes:\n    tree_id: ツリーID\n    name: ツリー名\n    description: 説明\n    root: ルートノード\n    nodes: list[dict] ノード情報\n    relationship: list[dict] ノード親関係情報"}, "DriverTreeListItem": {"properties": {"treeId": {"type": "string", "format": "uuid", "title": "Treeid", "description": "ツリーID"}, "name": {"type": "string", "title": "Name", "description": "ツリー名"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "説明"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["treeId", "name", "createdAt", "updatedAt"], "title": "DriverTreeListItem", "description": "ツリー一覧アイテム。\n\nAttributes:\n    tree_id: uuid - ツリーID\n    name: str - ツリー名\n    description: str - 説明\n    created_at: datetime - 作成日時\n    updated_at: datetime - 更新日時"}, "DriverTreeListResponse": {"properties": {"trees": {"items": {"$ref": "#/components/schemas/DriverTreeListItem"}, "type": "array", "title": "Trees", "description": "ツリー一覧"}}, "type": "object", "title": "DriverTreeListResponse", "description": "ツリー一覧レスポンス。\n\nResponse:\n    - trees: list[dict] - ツリー一覧"}, "DriverTreeNodeCalculatedData": {"properties": {"nodeId": {"type": "string", "format": "uuid", "title": "Nodeid", "description": "ノードID"}, "label": {"type": "string", "title": "Label", "description": "ノード名"}, "columns": {"items": {"type": "string"}, "type": "array", "title": "Columns", "description": "カラム名のリスト"}, "records": {"items": {"additionalProperties": true, "type": "object"}, "type": "array", "title": "Records", "description": "データレコード（行のリスト）"}}, "type": "object", "required": ["nodeId", "label", "columns", "records"], "title": "DriverTreeNodeCalculatedData", "description": "計算済みノードデータ構造。\nAttributes:\n    - node_id: uuid - ノードID\n    - label: str - ノード名\n    - columns: list[str] - カラム名のリスト\n    - records: list[dict[str, Any]] - データレコード（行のリスト）"}, "DriverTreeNodeCreateResponse": {"properties": {"tree": {"$ref": "#/components/schemas/DriverTreeInfo-Output", "description": "ツリー全体構造"}, "createdNodeId": {"type": "string", "format": "uuid", "title": "Creatednodeid", "description": "作成されたノードID"}}, "type": "object", "required": ["tree", "createdNodeId"], "title": "DriverTreeNodeCreateResponse", "description": "ノード作成レスポンス。\n\nResponse:\n    - tree : DriverTreeInfo - ツリー全体構造\n    - created_node_id: uuid - ノードID"}, "DriverTreeNodeData": {"properties": {"columns": {"items": {"type": "string"}, "type": "array", "title": "Columns", "description": "カラム名のリスト"}, "records": {"items": {"additionalProperties": true, "type": "object"}, "type": "array", "title": "Records", "description": "データレコード（行のリスト）"}}, "type": "object", "required": ["columns", "records"], "title": "DriverTreeNodeData", "description": "ノードデータ構造（API伝送用）。\n\nExcelやCSVから読み込んだデータを表現します。\nService層でpandas DataFrameとの相互変換を行います。\n\nAttributes:\n    columns (list[str]): カラム名のリスト\n    records (list[dict[str, Any]]): データレコード（行のリスト）"}, "DriverTreeNodeDeleteResponse": {"properties": {"tree": {"$ref": "#/components/schemas/DriverTreeInfo-Output", "description": "ツリー全体構造"}}, "type": "object", "required": ["tree"], "title": "DriverTreeNodeDeleteResponse", "description": "ノード削除レスポンス。\n\nResponse:\n    - tree : DriverTreeInfo - ツリー全体構造"}, "DriverTreeNodeDetailResponse": {"properties": {"node": {"$ref": "#/components/schemas/DriverTreeNodeInfo", "description": "ノード詳細情報"}}, "type": "object", "required": ["node"], "title": "DriverTreeNodeDetailResponse", "description": "ノード詳細取得レスポンス。\n\nResponse:\n    - node : DriverTreeNodeInfo - ノード詳細情報"}, "DriverTreeNodeInfo": {"properties": {"nodeId": {"type": "string", "format": "uuid", "title": "Nodeid", "description": "ノードID"}, "label": {"type": "string", "title": "Label", "description": "ノード名"}, "nodeType": {"$ref": "#/components/schemas/DriverTreeNodeTypeEnum", "description": "ノードタイプ"}, "positionX": {"type": "integer", "title": "Positionx", "description": "X座標"}, "positionY": {"type": "integer", "title": "Positiony", "description": "Y座標"}, "data": {"anyOf": [{"$ref": "#/components/schemas/DriverTreeNodeData"}, {"type": "null"}], "description": "入力ノードのデータ"}}, "type": "object", "required": ["nodeId", "label", "nodeType", "positionX", "positionY"], "title": "DriverTreeNodeInfo", "description": "ノード情報\n\nAttributes:\n    - node_id: uuid - ノードID\n    - label: str - ノード名\n    - node_type: str - ノードタイプ（入力|計算|定数）\n    - position_x :int - 座標\n    - position_y :int - 座標\n    - data: DriverTreeNodeData - 入力ノードのデータ"}, "DriverTreeNodePolicyCreateRequest": {"properties": {"name": {"type": "string", "title": "Name", "description": "施策名"}, "value": {"type": "number", "title": "Value", "description": "施策値"}}, "type": "object", "required": ["name", "value"], "title": "DriverTreeNodePolicyCreateRequest", "description": "施策作成リクエスト。\n\nRequest Body:\n    - name: str - 施策名\n    - value: float - 施策値"}, "DriverTreeNodePolicyCreateResponse": {"properties": {"nodeId": {"type": "string", "format": "uuid", "title": "Nodeid", "description": "ノードID"}, "policies": {"items": {"$ref": "#/components/schemas/DriverTreeNodePolicyInfo"}, "type": "array", "title": "Policies", "description": "施策一覧"}}, "type": "object", "required": ["nodeId"], "title": "DriverTreeNodePolicyCreateResponse", "description": "施策作成レスポンス。\n\nResponse:\n    - node_id: uuid - ノードID\n    - policies: list[dict] - 施策一覧"}, "DriverTreeNodePolicyDeleteResponse": {"properties": {"nodeId": {"type": "string", "format": "uuid", "title": "Nodeid", "description": "ノードID"}, "policies": {"items": {"$ref": "#/components/schemas/DriverTreeNodePolicyInfo"}, "type": "array", "title": "Policies", "description": "施策一覧"}}, "type": "object", "required": ["nodeId"], "title": "DriverTreeNodePolicyDeleteResponse", "description": "施策削除レスポンス。\n\nResponse:\n    - node_id: uuid - ノードID\n    - policies: list[dict] - 施策一覧"}, "DriverTreeNodePolicyInfo": {"properties": {"policyId": {"type": "string", "format": "uuid", "title": "Policyid", "description": "施策ID"}, "name": {"type": "string", "title": "Name", "description": "施策名"}, "value": {"type": "number", "title": "Value", "description": "施策値"}}, "type": "object", "required": ["policyId", "name", "value"], "title": "DriverTreeNodePolicyInfo", "description": "施策情報\n\nAttributes:\n    - policy_id: uuid - 施策ID\n    - name: str - 施策名\n    - value: float - 施策値"}, "DriverTreeNodePolicyResponse": {"properties": {"nodeId": {"type": "string", "format": "uuid", "title": "Nodeid", "description": "ノードID"}, "policies": {"items": {"$ref": "#/components/schemas/DriverTreeNodePolicyInfo"}, "type": "array", "title": "Policies", "description": "施策一覧"}}, "type": "object", "required": ["nodeId"], "title": "DriverTreeNodePolicyResponse", "description": "施策一覧レスポンス。\n\nResponse:\n    - node_id: uuid - ノードID\n    - policies: list[dict] - 施策一覧"}, "DriverTreeNodePolicyUpdateRequest": {"properties": {"name": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Name", "description": "施策名"}, "value": {"anyOf": [{"type": "number"}, {"type": "null"}], "title": "Value", "description": "施策値"}}, "type": "object", "title": "DriverTreeNodePolicyUpdateRequest", "description": "施策更新リクエスト。\n\nRequest Body:\n    - name: str - 施策名(オプション)\n    - value: float - 施策値(オプション)"}, "DriverTreeNodePolicyUpdateResponse": {"properties": {"nodeId": {"type": "string", "format": "uuid", "title": "Nodeid", "description": "ノードID"}, "policies": {"items": {"$ref": "#/components/schemas/DriverTreeNodePolicyInfo"}, "type": "array", "title": "Policies", "description": "施策一覧"}}, "type": "object", "required": ["nodeId"], "title": "DriverTreeNodePolicyUpdateResponse", "description": "施策更新レスポンス。\n\nResponse:\n    - node_id: uuid - ノードID\n    - policies: list[dict] - 施策一覧"}, "DriverTreeNodeTypeEnum": {"type": "string", "enum": ["入力", "計算", "定数"], "title": "DriverTreeNodeTypeEnum", "description": "ノードタイプ。\n\nValues:\n    INPUT: 入力ノード\n    CALCULATION: 計算ノード\n    CONSTANT: 定数ノード"}, "DriverTreeNodeUpdateRequest": {"properties": {"label": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Label", "description": "ノード名"}, "nodeType": {"anyOf": [{"$ref": "#/components/schemas/DriverTreeNodeTypeEnum"}, {"type": "null"}], "description": "ノードタイプ"}, "positionX": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Positionx", "description": "X座標"}, "positionY": {"anyOf": [{"type": "integer"}, {"type": "null"}], "title": "Positiony", "description": "Y座標"}, "operator": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Operator", "description": "演算子"}, "childrenIdList": {"anyOf": [{"items": {"type": "string", "format": "uuid"}, "type": "array"}, {"type": "null"}], "title": "Childrenidlist", "description": "計算ノードの子ノードIDリスト"}}, "type": "object", "title": "DriverTreeNodeUpdateRequest", "description": "ノード更新リクエスト。\n\nRequest Body:\n    - label: str - ノード名（オプション）\n    - node_type: str - ノードタイプ（\"入力\"|\"計算\"|\"定数\"）（オプション）\n    - position_x :int - 座標（オプション）\n    - position_y :int - 座標（オプション）\n    - operator: str - 計算ノード演算子（オプション）\n    - children_id_list : list[uuid] - 計算ノードの子ノードIDリスト"}, "DriverTreeNodeUpdateResponse": {"properties": {"tree": {"$ref": "#/components/schemas/DriverTreeInfo-Output", "description": "ツリー全体構造"}}, "type": "object", "required": ["tree"], "title": "DriverTreeNodeUpdateResponse", "description": "ノード更新レスポンス。\n\nResponse:\n    - tree : DriverTreeInfo - ツリー全体構造"}, "DriverTreeRelationshipInfo": {"properties": {"parentId": {"type": "string", "format": "uuid", "title": "Parentid", "description": "親ノードID"}, "operator": {"type": "string", "title": "Operator", "description": "演算子"}, "childIdList": {"anyOf": [{"items": {"type": "string", "format": "uuid"}, "type": "array"}, {"type": "null"}], "title": "Childidlist", "description": "子ノードのIDリスト、順番保持"}}, "type": "object", "required": ["parentId", "operator"], "title": "DriverTreeRelationshipInfo", "description": "ノード関係情報詳細。\n\n計算ノードの親子関係を表す情報。\n\nAttributes:\n    parent_id (uuid.UUID): 親ノードID\n    operator (str): 演算子（+, -, *, / など）\n    child_id_list (list[uuid.UUID] | None): 子ノードIDリスト（順番保持）"}, "DriverTreeResetResponse": {"properties": {"tree": {"$ref": "#/components/schemas/DriverTreeInfo-Output", "description": "リセット後のツリー全体構造"}, "resetAt": {"type": "string", "format": "date-time", "title": "Resetat", "description": "リセット日時"}}, "type": "object", "required": ["tree", "resetAt"], "title": "DriverTreeResetResponse", "description": "ツリーリセットレスポンス。\n\nResponse:\n    - tree: dict - リセット後のツリー全体構造\n    - reset_at: datetime - リセット日時"}, "DriverTreeSheetInfo-Input": {"properties": {"sheetId": {"type": "string", "format": "uuid", "title": "Sheetid", "description": "シートID"}, "sheetName": {"type": "string", "title": "Sheetname", "description": "シート名"}, "columns": {"items": {"$ref": "#/components/schemas/DriverTreeColumnInfo"}, "type": "array", "title": "Columns", "description": "カラム一覧"}}, "type": "object", "required": ["sheetId", "sheetName"], "title": "DriverTreeSheetInfo", "description": "シート情報。\n\nAttributes:\n    - sheet_id: uuid - シートID\n    - name: str - シート名"}, "DriverTreeSheetInfo-Output": {"properties": {"sheetId": {"type": "string", "format": "uuid", "title": "Sheetid", "description": "シートID"}, "sheetName": {"type": "string", "title": "Sheetname", "description": "シート名"}, "columns": {"items": {"$ref": "#/components/schemas/DriverTreeColumnInfo"}, "type": "array", "title": "Columns", "description": "カラム一覧"}}, "type": "object", "required": ["sheetId", "sheetName"], "title": "DriverTreeSheetInfo", "description": "シート情報。\n\nAttributes:\n    - sheet_id: uuid - シートID\n    - name: str - シート名"}, "DriverTreeSheetSelectResponse": {"properties": {"success": {"type": "boolean", "title": "Success", "description": "成功フラグ"}}, "type": "object", "required": ["success"], "title": "DriverTreeSheetSelectResponse", "description": "シート選択レスポンス。\n\nResponse:\n    - success: bool - 成功フラグ"}, "DriverTreeUploadedFileItem": {"properties": {"fileId": {"type": "string", "format": "uuid", "title": "Fileid", "description": "ファイルID"}, "filename": {"type": "string", "title": "Filename", "description": "ファイル名"}, "fileSize": {"type": "integer", "title": "Filesize", "description": "ファイルサイズ（バイト）"}, "uploadedAt": {"type": "string", "format": "date-time", "title": "Uploadedat", "description": "アップロード日時"}, "sheets": {"items": {"$ref": "#/components/schemas/DriverTreeUploadedSheetInfo"}, "type": "array", "title": "Sheets", "description": "シート一覧"}}, "type": "object", "required": ["fileId", "filename", "fileSize", "uploadedAt"], "title": "DriverTreeUploadedFileItem", "description": "アップロード済みファイル情報（Upload API用）。\n\nAttributes:\n    - file_id: uuid - ファイルID\n    - filename: str - ファイル名\n    - file_size: int - ファイルサイズ（バイト）\n    - uploaded_at: datetime - アップロード日時\n    - sheets: list[DriverTreeUploadedSheetInfo] - シート一覧（columns なし）"}, "DriverTreeUploadedFileListResponse": {"properties": {"files": {"items": {"$ref": "#/components/schemas/DriverTreeUploadedFileItem"}, "type": "array", "title": "Files", "description": "ファイル一覧"}}, "type": "object", "title": "DriverTreeUploadedFileListResponse", "description": "アップロード済みファイル一覧レスポンス。\n\nResponse:\n    - files: list[DriverTreeUploadedFileItem] - アップロード済みファイル一覧（columns なし）"}, "DriverTreeUploadedSheetInfo": {"properties": {"sheetId": {"type": "string", "format": "uuid", "title": "Sheetid", "description": "シートID"}, "sheetName": {"type": "string", "title": "Sheetname", "description": "シート名"}}, "type": "object", "required": ["sheetId", "sheetName"], "title": "DriverTreeUploadedSheetInfo", "description": "アップロード済みシート情報（Upload API用）。\n\nAttributes:\n    - sheet_id: uuid - シートID\n    - sheet_name: str - シート名"}, "HTTPValidationError": {"properties": {"detail": {"items": {"$ref": "#/components/schemas/ValidationError"}, "type": "array", "title": "Detail"}}, "type": "object", "title": "HTTPValidationError"}, "ProjectCreate": {"properties": {"name": {"type": "string", "maxLength": 255, "minLength": 1, "title": "Name", "description": "プロジェクト名"}, "code": {"type": "string", "maxLength": 50, "minLength": 1, "title": "Code", "description": "プロジェクトコード（一意識別子）"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "プロジェクト説明"}}, "type": "object", "required": ["name", "code"], "title": "ProjectCreate", "description": "プロジェクト作成リクエストスキーマ。\n\n新規プロジェクト作成時に使用します。\n\nAttributes:\n    name (str): プロジェクト名（ProjectBaseから継承）\n    code (str): プロジェクトコード（ProjectBaseから継承）\n    description (str | None): プロジェクト説明（ProjectBaseから継承）\n\nExample:\n    >>> project = ProjectCreate(\n    ...     name=\"AI Development Project\",\n    ...     code=\"AI-001\",\n    ...     description=\"Project for AI model development\"\n    ... )"}, "ProjectFileDeleteResponse": {"properties": {"fileId": {"type": "string", "format": "uuid", "title": "Fileid", "description": "削除されたファイルのID"}, "message": {"type": "string", "title": "Message", "description": "削除成功メッセージ"}}, "type": "object", "required": ["fileId", "message"], "title": "ProjectFileDeleteResponse", "description": "ファイル削除成功レスポンススキーマ。\n\nファイル削除操作の成功を示すレスポンスです。\n\nAttributes:\n    file_id (uuid.UUID): 削除されたファイルのID\n    message (str): 成功メッセージ\n\nExample:\n    >>> response = ProjectFileDeleteResponse(\n    ...     file_id=uuid.uuid4(),\n    ...     message=\"File deleted successfully\"\n    ... )"}, "ProjectFileListResponse": {"properties": {"files": {"items": {"$ref": "#/components/schemas/ProjectFileResponse"}, "type": "array", "title": "Files", "description": "ファイルのリスト"}, "total": {"type": "integer", "title": "Total", "description": "総ファイル数"}, "projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}}, "type": "object", "required": ["files", "total", "projectId"], "title": "ProjectFileListResponse", "description": "プロジェクトファイル一覧レスポンススキーマ。\n\nプロジェクトに属するファイル一覧とメタデータを返却します。\n\nAttributes:\n    files (list[ProjectFileResponse]): ファイルのリスト\n    total (int): 総ファイル数\n    project_id (uuid.UUID): プロジェクトID\n\nExample:\n    >>> response = ProjectFileListResponse(\n    ...     files=[file1, file2, file3],\n    ...     total=3,\n    ...     project_id=project_id\n    ... )\n\nNote:\n    - ページネーション情報は別途クエリパラメータで管理されます\n    - total はプロジェクト全体のファイル数を示します"}, "ProjectFileResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "ファイルID（UUID）"}, "projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "filename": {"type": "string", "title": "Filename", "description": "保存ファイル名"}, "originalFilename": {"type": "string", "title": "Originalfilename", "description": "元のファイル名"}, "filePath": {"type": "string", "title": "Filepath", "description": "ファイルパス"}, "fileSize": {"type": "integer", "title": "Filesize", "description": "ファイルサイズ（バイト）"}, "mimeType": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Mimetype", "description": "MIMEタイプ"}, "uploadedBy": {"type": "string", "format": "uuid", "title": "Uploadedby", "description": "アップロード者のユーザーID"}, "uploadedAt": {"type": "string", "format": "date-time", "title": "Uploadedat", "description": "アップロード日時"}, "uploader": {"anyOf": [{"$ref": "#/components/schemas/UserAccountResponse"}, {"type": "null"}], "description": "アップロード者のユーザー情報"}}, "type": "object", "required": ["id", "projectId", "filename", "originalFilename", "filePath", "fileSize", "uploadedBy", "uploadedAt"], "title": "ProjectFileResponse", "description": "プロジェクトファイル情報レスポンススキーマ。\n\nアップロード者情報を含む詳細なファイル情報を返却します。\n\nAttributes:\n    id (uuid.UUID): ファイルID（UUID）\n    project_id (uuid.UUID): プロジェクトID\n    filename (str): 保存ファイル名\n    original_filename (str): 元のファイル名\n    file_path (str): ファイルパス\n    file_size (int): ファイルサイズ（バイト）\n    mime_type (str | None): MIMEタイプ\n    uploaded_by (uuid.UUID): アップロード者のユーザーID\n    uploaded_at (datetime): アップロード日時\n    uploader (UserAccountResponse | None): アップロード者のユーザー情報\n\nExample:\n    >>> file_response = ProjectFileResponse(\n    ...     id=uuid.uuid4(),\n    ...     project_id=project_id,\n    ...     filename=\"doc_12345.pdf\",\n    ...     original_filename=\"document.pdf\",\n    ...     file_path=\"uploads/projects/proj-id/doc_12345.pdf\",\n    ...     file_size=1024000,\n    ...     mime_type=\"application/pdf\",\n    ...     uploaded_by=user_id,\n    ...     uploaded_at=datetime.now(UTC),\n    ...     uploader=UserAccountResponse(...)\n    ... )\n\nNote:\n    - from_attributesを有効にしているため、ORMモデルから直接変換可能です\n    - uploaderフィールドはリレーションシップから自動的に解決されます"}, "ProjectFileUploadResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "ファイルID（UUID）"}, "projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "filename": {"type": "string", "title": "Filename", "description": "保存ファイル名"}, "originalFilename": {"type": "string", "title": "Originalfilename", "description": "元のファイル名"}, "filePath": {"type": "string", "title": "Filepath", "description": "ファイルパス"}, "fileSize": {"type": "integer", "title": "Filesize", "description": "ファイルサイズ（バイト）"}, "mimeType": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Mimetype", "description": "MIMEタイプ"}, "uploadedBy": {"type": "string", "format": "uuid", "title": "Uploadedby", "description": "アップロード者のユーザーID"}, "uploadedAt": {"type": "string", "format": "date-time", "title": "Uploadedat", "description": "アップロード日時"}, "message": {"type": "string", "title": "Message", "description": "成功メッセージ", "default": "File uploaded successfully"}}, "type": "object", "required": ["id", "projectId", "filename", "originalFilename", "filePath", "fileSize", "uploadedBy", "uploadedAt"], "title": "ProjectFileUploadResponse", "description": "ファイルアップロード成功レスポンススキーマ。\n\nファイルアップロード直後に返却される基本情報を含みます。\n\nAttributes:\n    id (uuid.UUID): ファイルID（UUID）\n    project_id (uuid.UUID): プロジェクトID\n    filename (str): 保存ファイル名\n    original_filename (str): 元のファイル名\n    file_path (str): ファイルパス\n    file_size (int): ファイルサイズ（バイト）\n    mime_type (str | None): MIMEタイプ\n    uploaded_by (uuid.UUID): アップロード者のユーザーID\n    uploaded_at (datetime): アップロード日時\n    message (str): 成功メッセージ\n\nExample:\n    >>> response = ProjectFileUploadResponse(\n    ...     id=uuid.uuid4(),\n    ...     project_id=project_id,\n    ...     filename=\"doc_12345.pdf\",\n    ...     original_filename=\"document.pdf\",\n    ...     file_path=\"uploads/projects/proj-id/doc_12345.pdf\",\n    ...     file_size=1024000,\n    ...     mime_type=\"application/pdf\",\n    ...     uploaded_by=user_id,\n    ...     uploaded_at=datetime.now(UTC),\n    ...     message=\"File uploaded successfully\"\n    ... )"}, "ProjectListResponse": {"properties": {"projects": {"items": {"$ref": "#/components/schemas/ProjectResponse"}, "type": "array", "title": "Projects", "description": "プロジェクトリスト"}, "total": {"type": "integer", "title": "Total", "description": "総件数"}, "skip": {"type": "integer", "title": "Skip", "description": "スキップ数（オフセット）"}, "limit": {"type": "integer", "title": "Limit", "description": "取得件数"}}, "type": "object", "required": ["projects", "total", "skip", "limit"], "title": "ProjectListResponse", "description": "プロジェクト一覧レスポンススキーマ。\n\nプロジェクト一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    projects (list[ProjectResponse]): プロジェクトリスト\n    total (int): 総件数\n    skip (int): スキップ数（オフセット）\n    limit (int): 取得件数\n\nExample:\n    >>> response = ProjectListResponse(\n    ...     projects=[project1, project2, project3],\n    ...     total=100,\n    ...     skip=0,\n    ...     limit=10\n    ... )"}, "ProjectMemberBulkCreate": {"properties": {"members": {"items": {"$ref": "#/components/schemas/ProjectMemberCreate"}, "type": "array", "maxItems": 100, "minItems": 1, "title": "Members", "description": "追加するメンバーのリスト（最大100件）"}}, "type": "object", "required": ["members"], "title": "ProjectMemberBulkCreate", "description": "プロジェクトメンバー複数人追加リクエストスキーマ。\n\nプロジェクトに複数のメンバーを一括追加する際に使用します。\n\nAttributes:\n    members (list[ProjectMemberCreate]): 追加するメンバーのリスト\n\nExample:\n    >>> bulk_create = ProjectMemberBulkCreate(\n    ...     members=[\n    ...         ProjectMemberCreate(user_id=uuid.uuid4(), role=ProjectRole.MEMBER),\n    ...         ProjectMemberCreate(user_id=uuid.uuid4(), role=ProjectRole.VIEWER)\n    ...     ]\n    ... )\n\nNote:\n    - 各メンバーは個別にバリデーションされます\n    - 重複するメンバーは追加されません\n    - 一部失敗しても成功したメンバーは追加されます"}, "ProjectMemberBulkError": {"properties": {"userId": {"type": "string", "format": "uuid", "title": "Userid", "description": "失敗したユーザーID"}, "role": {"$ref": "#/components/schemas/ProjectRole", "description": "指定されたロール"}, "error": {"type": "string", "title": "Error", "description": "エラーメッセージ"}}, "type": "object", "required": ["userId", "role", "error"], "title": "ProjectMemberBulkError", "description": "メンバー追加失敗情報スキーマ。\n\n複数人登録時の個別の失敗情報を表します。\n\nAttributes:\n    user_id (uuid.UUID): 失敗したユーザーID\n    role (ProjectRole): 指定されたロール\n    error (str): エラーメッセージ\n\nExample:\n    >>> error = ProjectMemberBulkError(\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.MEMBER,\n    ...     error=\"ユーザーは既にプロジェクトのメンバーです\"\n    ... )"}, "ProjectMemberBulkResponse": {"properties": {"projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "added": {"items": {"$ref": "#/components/schemas/ProjectMemberDetailResponse"}, "type": "array", "title": "Added", "description": "追加に成功したメンバーリスト"}, "failed": {"items": {"$ref": "#/components/schemas/ProjectMemberBulkError"}, "type": "array", "title": "Failed", "description": "追加に失敗したメンバーリスト"}, "totalRequested": {"type": "integer", "title": "Totalrequested", "description": "リクエストされたメンバー数"}, "totalAdded": {"type": "integer", "title": "Totaladded", "description": "追加に成功したメンバー数"}, "totalFailed": {"type": "integer", "title": "Totalfailed", "description": "追加に失敗したメンバー数"}}, "type": "object", "required": ["projectId", "added", "failed", "totalRequested", "totalAdded", "totalFailed"], "title": "ProjectMemberBulkResponse", "description": "プロジェクトメンバー複数人追加レスポンススキーマ。\n\n複数人登録APIのレスポンス形式を定義します。\n\nAttributes:\n    project_id (uuid.UUID): プロジェクトID\n    added (list[ProjectMemberDetailResponse]): 追加に成功したメンバーリスト\n    failed (list[ProjectMemberBulkError]): 追加に失敗したメンバーリスト\n    total_requested (int): リクエストされたメンバー数\n    total_added (int): 追加に成功したメンバー数\n    total_failed (int): 追加に失敗したメンバー数\n\nExample:\n    >>> response = ProjectMemberBulkResponse(\n    ...     project_id=uuid.uuid4(),\n    ...     added=[member1, member2],\n    ...     failed=[error1],\n    ...     total_requested=3,\n    ...     total_added=2,\n    ...     total_failed=1\n    ... )\n\nNote:\n    - 一部失敗しても成功したメンバーは追加されます\n    - failed リストで失敗理由を確認できます"}, "ProjectMemberCreate": {"properties": {"userId": {"type": "string", "format": "uuid", "title": "Userid", "description": "追加するユーザーのID"}, "role": {"$ref": "#/components/schemas/ProjectRole", "description": "プロジェクトロール（project_manager/project_moderator/member/viewer）", "default": "member"}}, "type": "object", "required": ["userId"], "title": "ProjectMemberCreate", "description": "プロジェクトメンバー追加リクエストスキーマ。\n\nプロジェクトに新しいメンバーを追加する際に使用します。\n\nAttributes:\n    user_id (uuid.UUID): 追加するユーザーのID\n    role (ProjectRole): プロジェクトロール（デフォルト: MEMBER）\n\nExample:\n    >>> member = ProjectMemberCreate(\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.MEMBER\n    ... )\n\nNote:\n    - PROJECT_MANAGER 権限が必要\n    - 重複するメンバーは追加できません"}, "ProjectMemberDetailResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "メンバーシップID（UUID）"}, "projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "userId": {"type": "string", "format": "uuid", "title": "Userid", "description": "ユーザーID"}, "role": {"$ref": "#/components/schemas/ProjectRole", "description": "プロジェクトロール（project_manager/project_moderator/member/viewer）"}, "joinedAt": {"type": "string", "format": "date-time", "title": "Joinedat", "description": "参加日時"}, "addedBy": {"anyOf": [{"type": "string", "format": "uuid"}, {"type": "null"}], "title": "Addedby", "description": "追加者のユーザーID"}, "user": {"anyOf": [{"$ref": "#/components/schemas/UserAccountResponse"}, {"type": "null"}], "description": "ユーザー情報"}}, "type": "object", "required": ["id", "projectId", "userId", "role", "joinedAt"], "title": "ProjectMemberDetailResponse", "description": "ユーザー情報付きプロジェクトメンバーレスポンススキーマ。\n\nメンバー情報とユーザー情報を含むレスポンスに使用します。\n\nAttributes:\n    id (uuid.UUID): メンバーシップID（ProjectMemberResponseから継承）\n    project_id (uuid.UUID): プロジェクトID（ProjectMemberResponseから継承）\n    user_id (uuid.UUID): ユーザーID（ProjectMemberResponseから継承）\n    role (ProjectRole): プロジェクトロール（ProjectMemberResponseから継承）\n    joined_at (datetime): 参加日時（ProjectMemberResponseから継承）\n    added_by (uuid.UUID | None): 追加者のユーザーID（ProjectMemberResponseから継承）\n    user (UserAccountResponse | None): ユーザー情報（ネストされたオブジェクト）\n\nExample:\n    >>> member = ProjectMemberDetailResponse(\n    ...     id=uuid.uuid4(),\n    ...     project_id=uuid.uuid4(),\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.MEMBER,\n    ...     joined_at=datetime.now(UTC),\n    ...     added_by=uuid.uuid4(),\n    ...     user=UserAccountResponse(...)\n    ... )\n\nNote:\n    - ユーザー情報を含むため、N+1クエリ対策が必要です\n    - selectinload を使用してユーザー情報を事前ロードしてください"}, "ProjectMemberListResponse": {"properties": {"members": {"items": {"$ref": "#/components/schemas/ProjectMemberDetailResponse"}, "type": "array", "title": "Members", "description": "メンバーリスト"}, "total": {"type": "integer", "title": "Total", "description": "総件数"}, "projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}}, "type": "object", "required": ["members", "total", "projectId"], "title": "ProjectMemberListResponse", "description": "プロジェクトメンバー一覧レスポンススキーマ。\n\nメンバー一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    members (list[ProjectMemberDetailResponse]): メンバーリスト\n    total (int): 総件数\n    project_id (uuid.UUID): プロジェクトID\n\nExample:\n    >>> response = ProjectMemberListResponse(\n    ...     members=[member1, member2, member3],\n    ...     total=15,\n    ...     project_id=uuid.uuid4()\n    ... )\n\nNote:\n    - ページネーション情報を含みます\n    - total は全体の件数"}, "ProjectMemberUpdate": {"properties": {"role": {"$ref": "#/components/schemas/ProjectRole", "description": "新しいプロジェクトロール"}}, "type": "object", "required": ["role"], "title": "ProjectMemberUpdate", "description": "プロジェクトメンバーロール更新リクエストスキーマ。\n\nメンバーのロールを更新する際に使用します。\n\nAttributes:\n    role (ProjectRole): 新しいプロジェクトロール\n\nExample:\n    >>> update = ProjectMemberUpdate(role=ProjectRole.MEMBER)\n\nNote:\n    - PROJECT_MANAGER 権限が必要\n    - 最後の PROJECT_MANAGER は降格できません"}, "ProjectResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "プロジェクトID（UUID）"}, "name": {"type": "string", "maxLength": 255, "minLength": 1, "title": "Name", "description": "プロジェクト名"}, "code": {"type": "string", "maxLength": 50, "minLength": 1, "title": "Code", "description": "プロジェクトコード（一意識別子）"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "プロジェクト説明"}, "isActive": {"type": "boolean", "title": "Isactive", "description": "アクティブフラグ"}, "createdBy": {"anyOf": [{"type": "string", "format": "uuid"}, {"type": "null"}], "title": "Createdby", "description": "作成者のユーザーID"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}}, "type": "object", "required": ["id", "name", "code", "isActive", "createdAt", "updatedAt"], "title": "ProjectResponse", "description": "プロジェクト情報レスポンススキーマ。\n\nAPIレスポンスでプロジェクト情報を返す際に使用します。\n\nAttributes:\n    id (uuid.UUID): プロジェクトID（UUID）\n    name (str): プロジェクト名\n    code (str): プロジェクトコード\n    description (str | None): プロジェクト説明\n    is_active (bool): アクティブフラグ\n    created_by (uuid.UUID | None): 作成者のユーザーID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> from datetime import UTC\n    >>> project = ProjectResponse(\n    ...     id=uuid.uuid4(),\n    ...     name=\"AI Project\",\n    ...     code=\"AI-001\",\n    ...     description=\"AI development project\",\n    ...     is_active=True,\n    ...     created_by=uuid.uuid4(),\n    ...     created_at=datetime.now(UTC),\n    ...     updated_at=datetime.now(UTC)\n    ... )\n\nNote:\n    - from_attributesを有効にしているため、ORMモデルから直接変換可能です"}, "ProjectRole": {"type": "string", "enum": ["project_manager", "project_moderator", "member", "viewer"], "title": "ProjectRole", "description": "プロジェクトレベルのロール定義。\n\nAttributes:\n    PROJECT_MANAGER: プロジェクトマネージャー（最高権限）\n        - プロジェクト削除\n        - プロジェクト設定変更\n        - メンバー追加・削除・ロール変更（全ロール）\n        - ファイルのアップロード・ダウンロード・削除\n    PROJECT_MODERATOR: 権限管理者（メンバー管理担当）\n        - メンバー追加・削除\n        - ロール変更（VIEWER/MEMBER/PROJECT_MODERATORのみ）\n        - ファイルのアップロード・ダウンロード\n        - プロジェクト内の編集\n    MEMBER: 一般メンバー（編集可能）\n        - ファイルのアップロード・ダウンロード\n        - プロジェクト内の編集\n    VIEWER: 閲覧者（閲覧のみ）\n        - ファイルの閲覧・ダウンロードのみ"}, "ProjectUpdate": {"properties": {"name": {"anyOf": [{"type": "string", "maxLength": 255}, {"type": "null"}], "title": "Name", "description": "プロジェクト名"}, "description": {"anyOf": [{"type": "string"}, {"type": "null"}], "title": "Description", "description": "プロジェクト説明"}, "isActive": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Isactive", "description": "アクティブフラグ"}}, "type": "object", "title": "ProjectUpdate", "description": "プロジェクト更新リクエストスキーマ。\n\nプロジェクト情報の更新時に使用します。\n\nAttributes:\n    name (str | None): プロジェクト名（オプション）\n    description (str | None): プロジェクト説明（オプション）\n    is_active (bool | None): アクティブフラグ（オプション）\n\nExample:\n    >>> update = ProjectUpdate(\n    ...     name=\"Updated Project Name\",\n    ...     description=\"Updated description\"\n    ... )\n\nNote:\n    - すべてのフィールドはオプションです\n    - code は変更できません（一意識別子のため）"}, "UserAccountListResponse": {"properties": {"users": {"items": {"$ref": "#/components/schemas/UserAccountResponse"}, "type": "array", "title": "Users", "description": "ユーザーリスト"}, "total": {"type": "integer", "title": "Total", "description": "総件数"}, "skip": {"type": "integer", "title": "Skip", "description": "スキップ数（オフセット）"}, "limit": {"type": "integer", "title": "Limit", "description": "取得件数"}}, "type": "object", "required": ["users", "total", "skip", "limit"], "title": "UserAccountListResponse", "description": "ユーザー一覧レスポンススキーマ。\n\nユーザー一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    users (list[UserAccountResponse]): ユーザーリスト\n    total (int): 総件数\n    skip (int): スキップ数（オフセット）\n    limit (int): 取得件数\n\nExample:\n    >>> response = UserAccountListResponse(\n    ...     users=[user1, user2, user3],\n    ...     total=100,\n    ...     skip=0,\n    ...     limit=10\n    ... )\n\nNote:\n    - ページネーション情報を含みます\n    - total は全体の件数、skip/limit はページング パラメータ"}, "UserAccountResponse": {"properties": {"id": {"type": "string", "format": "uuid", "title": "Id", "description": "ユーザーID（UUID）"}, "azureOid": {"type": "string", "title": "Azureoid", "description": "Azure AD Object ID"}, "email": {"type": "string", "format": "email", "title": "Email", "description": "ユーザーメールアドレス"}, "displayName": {"anyOf": [{"type": "string", "maxLength": 255}, {"type": "null"}], "title": "Displayname", "description": "表示名"}, "roles": {"items": {"type": "string"}, "type": "array", "title": "Roles", "description": "システムレベルのロール"}, "isActive": {"type": "boolean", "title": "Isactive", "description": "アクティブフラグ"}, "createdAt": {"type": "string", "format": "date-time", "title": "Createdat", "description": "作成日時"}, "updatedAt": {"type": "string", "format": "date-time", "title": "Updatedat", "description": "更新日時"}, "lastLogin": {"anyOf": [{"type": "string", "format": "date-time"}, {"type": "null"}], "title": "Lastlogin", "description": "最終ログイン日時"}}, "type": "object", "required": ["id", "azureOid", "email", "isActive", "createdAt", "updatedAt"], "title": "UserAccountResponse", "description": "ユーザー情報レスポンススキーマ。\n\nAPIレスポンスでユーザー情報を返す際に使用します。\n\nAttributes:\n    id (uuid.UUID): ユーザーID（UUID）\n    azure_oid (str): Azure AD Object ID\n    email (EmailStr): ユーザーメールアドレス\n    display_name (str | None): 表示名\n    roles (list[str]): システムレベルのロール\n    is_active (bool): アクティブフラグ\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n    last_login (datetime | None): 最終ログイン日時\n\nExample:\n    >>> from datetime import UTC\n    >>> user = UserAccountResponse(\n    ...     id=uuid.uuid4(),\n    ...     azure_oid=\"azure-oid-12345\",\n    ...     email=\"john@company.com\",\n    ...     display_name=\"John Doe\",\n    ...     roles=[\"User\"],\n    ...     is_active=True,\n    ...     created_at=datetime.now(UTC),\n    ...     updated_at=datetime.now(UTC),\n    ...     last_login=None\n    ... )\n\nNote:\n    - from_attributesを有効にしているため、ORMモデルから直接変換可能です\n    - パスワード情報は含まれません（Azure AD認証のため）"}, "UserAccountUpdate": {"properties": {"displayName": {"anyOf": [{"type": "string", "maxLength": 255}, {"type": "null"}], "title": "Displayname", "description": "表示名"}, "roles": {"anyOf": [{"items": {"type": "string"}, "type": "array"}, {"type": "null"}], "title": "Roles", "description": "システムレベルのロール"}, "isActive": {"anyOf": [{"type": "boolean"}, {"type": "null"}], "title": "Isactive", "description": "アクティブフラグ"}}, "type": "object", "title": "UserAccountUpdate", "description": "ユーザー情報更新リクエストスキーマ。\n\nユーザー情報の更新時に使用します。\n\nAttributes:\n    display_name (str | None): 表示名（オプション）\n    roles (list[str] | None): システムレベルのロール（オプション）\n    is_active (bool | None): アクティブフラグ（オプション）\n\nExample:\n    >>> update = UserAccountUpdate(\n    ...     display_name=\"John Smith\",\n    ...     roles=[\"SystemAdmin\", \"User\"],\n    ...     is_active=True\n    ... )\n\nNote:\n    - すべてのフィールドはオプションです\n    - 指定されたフィールドのみが更新されます\n    - email と azure_oid は更新できません"}, "UserRoleResponse": {"properties": {"projectId": {"type": "string", "format": "uuid", "title": "Projectid", "description": "プロジェクトID"}, "userId": {"type": "string", "format": "uuid", "title": "Userid", "description": "ユーザーID"}, "role": {"$ref": "#/components/schemas/ProjectRole", "description": "プロジェクトロール"}, "isOwner": {"type": "boolean", "title": "Isowner", "description": "PROJECT_MANAGER ロールかどうか（後方互換性のため維持）"}, "isAdmin": {"type": "boolean", "title": "Isadmin", "description": "PROJECT_MANAGER ロールかどうか（後方互換性のため維持）"}}, "type": "object", "required": ["projectId", "userId", "role", "isOwner", "isAdmin"], "title": "UserRoleResponse", "description": "ユーザーのプロジェクトロールレスポンススキーマ。\n\n現在のユーザーのロール情報を返す際に使用します。\n\nAttributes:\n    project_id (uuid.UUID): プロジェクトID\n    user_id (uuid.UUID): ユーザーID\n    role (ProjectRole): プロジェクトロール\n    is_owner (bool): PROJECT_MANAGER ロールかどうか（後方互換性のため維持）\n    is_admin (bool): PROJECT_MANAGER ロールかどうか（後方互換性のため維持）\n\nExample:\n    >>> role_info = UserRoleResponse(\n    ...     project_id=uuid.uuid4(),\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.PROJECT_MANAGER,\n    ...     is_owner=True,\n    ...     is_admin=True\n    ... )\n\nNote:\n    - 権限チェックに使用されます\n    - is_owner: PROJECT_MANAGER ロールの場合 True（後方互換性のため維持）\n    - is_admin: PROJECT_MANAGER ロールの場合 True（後方互換性のため維持）"}, "ValidationError": {"properties": {"loc": {"items": {"anyOf": [{"type": "string"}, {"type": "integer"}]}, "type": "array", "title": "Location"}, "msg": {"type": "string", "title": "Message"}, "type": {"type": "string", "title": "Error Type"}}, "type": "object", "required": ["loc", "msg", "type"], "title": "ValidationError"}}, "securitySchemes": {"HTTPBearer": {"type": "http", "scheme": "bearer"}}}};
        Redoc.init(spec, {}, document.querySelector('redoc'));
    </script>
</body>
</html>
{
  "openapi": "3.1.0",
  "info": {
    "title": "camp-backend",
    "description": "\n    # AIエージェントアプリケーション API\n\n    LangChain/LangGraphを使用したAIエージェントアプリケーションのバックエンドAPI。\n\n    ## 認証モード: development\n\n    ### 開発モード認証（モック）\n\n    ## 主な機能\n\n    - **AIエージェントとのチャット**: LangGraphによる高度な会話エンジン\n    - **セッション管理**: 会話履歴の保存と取得\n    - **ファイル処理**: ファイルのアップロード・ダウンロード\n    - **認証・認可**: JWT認証 とロールベース制御\n    - **モニタリング**: Prometheusメトリクス収集\n\n    ## 認証\n\n    ほとんどのエンドポイントはゲストアクセス可能ですが、一部の機能では認証が必要です。\n    認証が必要な場合は、`Authorization: Bearer <token>` ヘッダーを含めてください。\n\n    ## レート制限\n\n    APIリクエストは100リクエスト/分に制限されています。\n    ",
    "contact": {
      "name": "開発チーム",
      "email": "nomura.koshiro@gmail.com"
    },
    "license": {
      "name": "MIT"
    },
    "version": "0.1.2"
  },
  "paths": {
    "/api/v1/sample-users": {
      "post": {
        "tags": [
          "sample-users"
        ],
        "summary": "新しいサンプルユーザーを作成",
        "description": "新しいサンプルユーザーアカウントを作成します。\n\n    - **email**: ユーザーのメールアドレス（一意制約）\n    - **username**: ユーザー名（一意制約、最大50文字）\n    - **password**: パスワード（bcryptでハッシュ化されて保存）\n\n    作成されたユーザーはデフォルトでアクティブ状態（is_active=True）です。",
        "operationId": "create_user_api_v1_sample_users_post",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SampleUserCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "sample-users"
        ],
        "summary": "サンプルユーザー一覧取得",
        "description": "登録されているすべてのサンプルユーザーの一覧を取得します。\n\n    **スーパーユーザー権限が必要です。**\n\n    - **skip**: スキップするレコード数（デフォルト: 0）\n    - **limit**: 取得する最大レコード数（デフォルト: 100）",
        "operationId": "list_users_api_v1_sample_users_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/SampleUserResponse"
                  },
                  "title": "Response List Users Api V1 Sample Users Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-users/sample-login": {
      "post": {
        "tags": [
          "sample-users"
        ],
        "summary": "サンプルユーザーログイン",
        "description": "サンプルユーザーのメールアドレスとパスワードで認証し、\n    JWT アクセストークンとリフレッシュトークンを発行します。\n\n    - **email**: ユーザーのメールアドレス\n    - **password**: ユーザーのパスワード\n\n    発行されたトークンは、`Authorization: Bearer <token>` ヘッダーで認証に使用できます。",
        "operationId": "login_api_v1_sample_users_sample_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SampleUserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleTokenWithRefresh"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-users/sample-me": {
      "get": {
        "tags": [
          "sample-users"
        ],
        "summary": "現在のサンプルユーザー情報取得",
        "description": "認証されたサンプルユーザー自身の情報を取得します。\n\n    このエンドポイントはJWT認証が必須です。\n    `Authorization: Bearer <token>` ヘッダーが必要です。",
        "operationId": "get_current_user_api_v1_sample_users_sample_me_get",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-users/{user_id}": {
      "get": {
        "tags": [
          "sample-users"
        ],
        "summary": "特定サンプルユーザー情報取得",
        "description": "指定されたIDのサンプルユーザー情報を取得します。\n\n    **スーパーユーザー権限が必要です。**",
        "operationId": "get_user_api_v1_sample_users__user_id__get",
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleUserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-users/sample-refresh": {
      "post": {
        "tags": [
          "sample-users"
        ],
        "summary": "サンプルトークンリフレッシュ",
        "description": "リフレッシュトークンを使用して新しいサンプルアクセストークンを取得します。",
        "operationId": "refresh_token_api_v1_sample_users_sample_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SampleRefreshTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleToken"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-users/sample-api-key": {
      "post": {
        "tags": [
          "sample-users"
        ],
        "summary": "サンプルAPIキー生成",
        "description": "認証済みサンプルユーザーのAPIキーを生成します。\n\n    既存のAPIキーがある場合は上書きされます。",
        "operationId": "generate_user_api_key_api_v1_sample_users_sample_api_key_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleAPIKeyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-agents/sample-chat": {
      "post": {
        "tags": [
          "sample-agents"
        ],
        "summary": "サンプルAIエージェントとチャット",
        "description": "サンプルAIエージェントとチャットします。\n\n    - **message**: ユーザーメッセージ（1-10000文字）\n    - **session_id**: セッション識別子（新規の場合は省略）\n    - **context**: 追加コンテキスト情報（オプション）\n\n    認証はオプションです。認証済みユーザーの場合、セッションがユーザーに紐付けられます。",
        "operationId": "chat_api_v1_sample_agents_sample_chat_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SampleChatRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-agents/sample-sessions/{session_id}": {
      "get": {
        "tags": [
          "sample-agents"
        ],
        "summary": "サンプルセッション情報取得",
        "description": "サンプルセッション情報と会話履歴を取得します。\n\n    認証が必要です。セッションの所有者またはスーパーユーザーのみ取得可能です。",
        "operationId": "get_session_api_v1_sample_agents_sample_sessions__session_id__get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleSessionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "sample-agents"
        ],
        "summary": "サンプルセッション削除",
        "description": "サンプルセッションと関連するメッセージを削除します。\n\n    認証が必要です。セッションの所有者またはスーパーユーザーのみ削除可能です。",
        "operationId": "delete_session_api_v1_sample_agents_sample_sessions__session_id__delete",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-sessions/sample-sessions": {
      "get": {
        "tags": [
          "sample-sessions"
        ],
        "summary": "サンプルセッション一覧取得",
        "description": "セッション一覧を取得します。\n\n    - **user_id**: ユーザーID（指定した場合、該当ユーザーのセッションのみ）\n    - **skip**: スキップするセッション数（ページネーション）\n    - **limit**: 返却する最大セッション数（ページネーション）\n\n    認証はオプションです。",
        "operationId": "list_sessions_api_v1_sample_sessions_sample_sessions_get",
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "ユーザーID",
              "title": "User Id"
            },
            "description": "ユーザーID"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップ数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップ数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "最大取得数",
              "default": 100,
              "title": "Limit"
            },
            "description": "最大取得数"
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleSessionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "sample-sessions"
        ],
        "summary": "サンプルセッション作成",
        "description": "新しいセッションを作成します。\n\n    - **metadata**: セッションのメタデータ（オプション）\n\n    認証はオプションです。認証済みユーザーの場合、セッションがユーザーに紐付けられます。",
        "operationId": "create_session_api_v1_sample_sessions_sample_sessions_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SampleSessionCreateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleSessionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-sessions/sample-sessions/{session_id}": {
      "get": {
        "tags": [
          "sample-sessions"
        ],
        "summary": "サンプルセッション詳細取得",
        "description": "セッション情報と会話履歴を取得します。\n\n    認証が必要です。セッションの所有者またはスーパーユーザーのみ取得可能です。",
        "operationId": "get_session_api_v1_sample_sessions_sample_sessions__session_id__get",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleSessionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "sample-sessions"
        ],
        "summary": "サンプルセッション更新",
        "description": "セッション情報を更新します。\n\n    - **metadata**: 更新するメタデータ\n\n    認証が必要です。セッションの所有者またはスーパーユーザーのみ更新可能です。",
        "operationId": "update_session_api_v1_sample_sessions_sample_sessions__session_id__patch",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SampleSessionUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleSessionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "sample-sessions"
        ],
        "summary": "サンプルセッション削除",
        "description": "セッションと関連するメッセージを削除します。\n\n    認証が必要です。セッションの所有者またはスーパーユーザーのみ削除可能です。",
        "operationId": "delete_session_api_v1_sample_sessions_sample_sessions__session_id__delete",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-files/sample-upload": {
      "post": {
        "tags": [
          "sample-files"
        ],
        "summary": "サンプルファイルアップロード",
        "description": "サンプルファイルをアップロードします。\n\n    - **file**: アップロードするファイル（バイナリ）\n\n    制限事項:\n    - 最大ファイルサイズ: 10MB\n    - 許可されるMIMEタイプ: text/plain, text/csv, application/pdf, application/json, 画像ファイル等\n\n    認証はオプションです。認証済みユーザーの場合、ファイルがユーザーに紐付けられます。",
        "operationId": "upload_file_api_v1_sample_files_sample_upload_post",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_v1_sample_files_sample_upload_post"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleFileUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-files/sample-download/{file_id}": {
      "get": {
        "tags": [
          "sample-files"
        ],
        "summary": "サンプルファイルダウンロード",
        "description": "サンプルファイルをダウンロードします。\n\n    バイナリストリームとして返却されます。\n\n    認証が必要です。ファイルの所有者またはスーパーユーザーのみダウンロード可能です。",
        "operationId": "download_file_api_v1_sample_files_sample_download__file_id__get",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-files/sample-files/{file_id}": {
      "delete": {
        "tags": [
          "sample-files"
        ],
        "summary": "サンプルファイル削除",
        "description": "サンプルファイルを削除します。\n\n    認証が必要です。ファイルの所有者またはスーパーユーザーのみ削除可能です。",
        "operationId": "delete_file_api_v1_sample_files_sample_files__file_id__delete",
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "File Id"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleFileDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/sample-files/sample-list": {
      "get": {
        "tags": [
          "sample-files"
        ],
        "summary": "サンプルファイル一覧取得",
        "description": "アップロードされたサンプルファイル一覧を取得します。\n\n    - **skip**: スキップするファイル数（デフォルト: 0）\n    - **limit**: 返す最大ファイル数（デフォルト: 100）\n\n    認証はオプションです。認証済みユーザーの場合、そのユーザーのファイルのみ返します。",
        "operationId": "list_files_api_v1_sample_files_sample_list_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          },
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SampleFileListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "ユーザー一覧取得",
        "description": "登録されているすべてのユーザーの一覧を取得します。\n\n    **管理者権限が必要です（SystemAdminロール）。**\n\n    - **skip**: スキップするレコード数（デフォルト: 0）\n    - **limit**: 取得する最大レコード数（デフォルト: 100、最大: 1000）\n\n    ページネーション情報:\n        - users: ユーザーリスト\n        - total: 総件数\n        - skip: スキップ数\n        - limit: 取得件数",
        "operationId": "list_users_api_v1_users_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップするレコード数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップするレコード数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得する最大レコード数",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得する最大レコード数"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/users/me": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "現在のユーザー情報取得",
        "description": "Azure AD認証されたユーザー自身の情報を取得します。\n\n    このエンドポイントはAzure AD認証が必須です。\n    `Authorization: Bearer <Azure_AD_Token>` ヘッダーが必要です。\n\n    開発環境では、モックトークンを使用できます:\n    `Authorization: Bearer mock-access-token-dev-12345`",
        "operationId": "get_current_user_api_v1_users_me_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "users"
        ],
        "summary": "ユーザー情報更新",
        "description": "現在のユーザー情報を更新します。\n\n    更新可能なフィールド:\n        - display_name: 表示名\n        - roles: システムレベルのロール（管理者のみ）\n        - is_active: アクティブフラグ（管理者のみ）\n\n    注意:\n        - email と azure_oid は更新できません\n        - roles と is_active の更新にはSystemAdminロールが必要です\n        - 指定されたフィールドのみが更新されます（PATCH）",
        "operationId": "update_current_user_api_v1_users_me_patch",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/users/{user_id}": {
      "get": {
        "tags": [
          "users"
        ],
        "summary": "特定ユーザー情報取得",
        "description": "指定されたIDのユーザー情報を取得します。\n\n    **管理者権限が必要です（SystemAdminロール）。**\n\n    パスパラメータ:\n        - user_id: ユーザーID（UUID形式）",
        "operationId": "get_user_api_v1_users__user_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "users"
        ],
        "summary": "ユーザー削除",
        "description": "指定されたIDのユーザーを削除します。\n\n    **管理者権限が必要です（SystemAdminロール）。**\n\n    パスパラメータ:\n        - user_id: ユーザーID（UUID形式）\n\n    注意:\n        - 削除は物理削除です（データベースから完全に削除されます）\n        - CASCADE設定により、関連する ProjectMember も自動削除されます\n        - 自分自身を削除することはできません\n        - この操作は取り消せません",
        "operationId": "delete_user_api_v1_users__user_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "User Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects": {
      "get": {
        "tags": [
          "projects"
        ],
        "summary": "プロジェクト一覧取得",
        "description": "認証されたユーザーが所属するプロジェクトの一覧を取得します。\n\n    **認証が必要です。**\n\n    - 自分がメンバーとして所属するプロジェクトのみ表示されます\n    - ロール（OWNER/ADMIN/MEMBER/VIEWER）に関係なく全て取得されます\n\n    クエリパラメータ:\n        - skip: スキップするレコード数（デフォルト: 0）\n        - limit: 取得する最大レコード数（デフォルト: 100、最大: 1000）\n        - is_active: アクティブフラグフィルタ（オプション）",
        "operationId": "list_projects_api_v1_projects_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップするレコード数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップするレコード数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得する最大レコード数",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得する最大レコード数"
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "アクティブフラグフィルタ",
              "title": "Is Active"
            },
            "description": "アクティブフラグフィルタ"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ProjectResponse"
                  },
                  "title": "Response List Projects Api V1 Projects Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "projects"
        ],
        "summary": "プロジェクト作成",
        "description": "新しいプロジェクトを作成します。\n\n    **認証が必要です。**\n\n    - 作成者は自動的にOWNERロールとしてプロジェクトメンバーに追加されます\n    - プロジェクトコードは一意である必要があります\n\n    リクエストボディ:\n        - name: プロジェクト名（最大255文字）\n        - code: プロジェクトコード（最大50文字、一意）\n        - description: プロジェクト説明（オプション）",
        "operationId": "create_project_api_v1_projects_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}": {
      "get": {
        "tags": [
          "projects"
        ],
        "summary": "プロジェクト詳細取得",
        "description": "指定されたIDのプロジェクト情報を取得します。\n\n    **認証が必要です。**\n    **プロジェクトメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - project_id: プロジェクトID（UUID形式）",
        "operationId": "get_project_api_v1_projects__project_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "projects"
        ],
        "summary": "プロジェクト情報更新",
        "description": "プロジェクト情報を更新します。\n\n    **OWNER/ADMINロールが必要です。**\n\n    更新可能なフィールド:\n        - name: プロジェクト名\n        - description: プロジェクト説明\n        - is_active: アクティブフラグ\n\n    注意:\n        - code（プロジェクトコード）は更新できません\n        - 指定されたフィールドのみが更新されます（PATCH）",
        "operationId": "update_project_api_v1_projects__project_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "projects"
        ],
        "summary": "プロジェクト削除",
        "description": "プロジェクトを削除します。\n\n    **OWNERロールが必要です。**\n\n    パスパラメータ:\n        - project_id: プロジェクトID（UUID形式）\n\n    注意:\n        - 削除は物理削除です（データベースから完全に削除されます）\n        - CASCADE設定により、関連する ProjectMember と ProjectFile も自動削除されます\n        - この操作は取り消せません",
        "operationId": "delete_project_api_v1_projects__project_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/code/{code}": {
      "get": {
        "tags": [
          "projects"
        ],
        "summary": "プロジェクトコード検索",
        "description": "指定されたコードのプロジェクト情報を取得します。\n\n    **認証が必要です。**\n    **プロジェクトメンバーのみアクセス可能です。**\n\n    パスパラメータ:\n        - code: プロジェクトコード",
        "operationId": "get_project_by_code_api_v1_projects_code__code__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "code",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Code"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/members": {
      "get": {
        "tags": [
          "project-members"
        ],
        "summary": "プロジェクトメンバー一覧取得",
        "description": "プロジェクトのメンバー一覧を取得します。\n\n    **メンバー以上の権限が必要です。**\n\n    - ユーザー情報付きで返されます\n    - ページネーション対応\n\n    クエリパラメータ:\n        - skip: スキップするレコード数（デフォルト: 0）\n        - limit: 取得する最大レコード数（デフォルト: 100、最大: 1000）",
        "operationId": "get_project_members_api_v1_projects__project_id__members_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectMemberListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "project-members"
        ],
        "summary": "プロジェクトメンバー追加",
        "description": "プロジェクトに新しいメンバーを追加します。\n\n    **PROJECT_MANAGERの権限が必要です。**\n\n    - 重複するメンバーは追加できません\n\n    リクエストボディ:\n        - user_id: 追加するユーザーのUUID\n        - role: プロジェクトロール（project_manager/member/viewer）",
        "operationId": "add_project_member_api_v1_projects__project_id__members_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectMemberCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectMemberDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/members/me": {
      "get": {
        "tags": [
          "project-members"
        ],
        "summary": "自分のロール取得",
        "description": "プロジェクトにおける自分のロールを取得します。\n\n    **メンバー以上の権限が必要です。**\n\n    返されるデータ:\n        - project_id: プロジェクトUUID\n        - user_id: ユーザーUUID\n        - role: プロジェクトロール\n        - is_owner: PROJECT_MANAGER ロールかどうか（後方互換性のため維持）\n        - is_admin: PROJECT_MANAGER ロールかどうか（後方互換性のため維持）",
        "operationId": "get_my_role_api_v1_projects__project_id__members_me_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRoleResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "project-members"
        ],
        "summary": "プロジェクト退出",
        "description": "プロジェクトから自分自身を退出します。\n\n    **任意のメンバーが実行可能です。**\n\n    - 最後の PROJECT_MANAGER は退出できません",
        "operationId": "leave_project_api_v1_projects__project_id__members_me_delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/members/bulk": {
      "post": {
        "tags": [
          "project-members"
        ],
        "summary": "プロジェクトメンバー複数人追加",
        "description": "プロジェクトに複数のメンバーを一括追加します。\n\n    **PROJECT_MANAGERの権限が必要です。**\n\n    - 一部失敗しても成功したメンバーは追加されます\n    - 最大100人まで一度に追加可能\n\n    リクエストボディ:\n        - members: 追加するメンバーのリスト\n            - user_id: 追加するユーザーのUUID\n            - role: プロジェクトロール（project_manager/member/viewer）\n\n    レスポンス:\n        - added: 追加に成功したメンバーリスト\n        - failed: 追加に失敗したメンバーリスト（エラー理由付き）\n        - total_requested: リクエストされたメンバー数\n        - total_added: 追加に成功したメンバー数\n        - total_failed: 追加に失敗したメンバー数",
        "operationId": "add_project_members_bulk_api_v1_projects__project_id__members_bulk_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectMemberBulkCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectMemberBulkResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/members/{member_id}": {
      "patch": {
        "tags": [
          "project-members"
        ],
        "summary": "メンバーロール更新",
        "description": "プロジェクトメンバーのロールを更新します。\n\n    **PROJECT_MANAGER の権限が必要です。**\n\n    - 最後の PROJECT_MANAGER は降格できません\n\n    リクエストボディ:\n        - role: 新しいプロジェクトロール",
        "operationId": "update_member_role_api_v1_projects__project_id__members__member_id__patch",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          },
          {
            "name": "member_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Member Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectMemberUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectMemberDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "project-members"
        ],
        "summary": "メンバー削除",
        "description": "プロジェクトからメンバーを削除します。\n\n    **PROJECT_MANAGER の権限が必要です。**\n\n    - 自分自身は削除できません（プロジェクト退出を使用）\n    - 最後の PROJECT_MANAGER は削除できません",
        "operationId": "remove_member_api_v1_projects__project_id__members__member_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          },
          {
            "name": "member_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Member Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/files": {
      "get": {
        "tags": [
          "project-files"
        ],
        "summary": "プロジェクトファイル一覧取得",
        "description": "プロジェクトのファイル一覧を取得します。\n\n    - **project_id**: プロジェクトID\n    - **skip**: スキップするファイル数（デフォルト: 0）\n    - **limit**: 返す最大ファイル数（デフォルト: 100）\n\n    権限要件:\n    - プロジェクトメンバー（VIEWER以上）\n\n    認証が必要です。",
        "operationId": "list_files_api_v1_projects__project_id__files_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 0,
              "title": "Skip"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectFileListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "project-files"
        ],
        "summary": "プロジェクトファイルアップロード",
        "description": "プロジェクトにファイルをアップロードします。\n\n    - **project_id**: プロジェクトID\n    - **file**: アップロードするファイル（バイナリ）\n\n    権限要件:\n    - プロジェクトメンバー（MEMBER以上）\n\n    制限事項:\n    - 最大ファイルサイズ: 50MB\n    - 許可されるMIMEタイプ: image/*, application/pdf, text/*, .docx, .xlsx\n\n    認証が必要です。アップロードされたファイルはユーザーに紐付けられます。",
        "operationId": "upload_file_api_v1_projects__project_id__files_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_v1_projects__project_id__files_post"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectFileUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/files/{file_id}": {
      "get": {
        "tags": [
          "project-files"
        ],
        "summary": "プロジェクトファイル情報取得",
        "description": "プロジェクトのファイル情報を取得します。\n\n    - **project_id**: プロジェクトID\n    - **file_id**: ファイルID\n\n    権限要件:\n    - プロジェクトメンバー（VIEWER以上）\n\n    認証が必要です。",
        "operationId": "get_file_api_v1_projects__project_id__files__file_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          },
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectFileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "project-files"
        ],
        "summary": "プロジェクトファイル削除",
        "description": "プロジェクトのファイルを削除します。\n\n    - **project_id**: プロジェクトID\n    - **file_id**: ファイルID\n\n    権限要件:\n    - ファイルのアップロード者本人、またはプロジェクトADMIN/OWNER\n\n    認証が必要です。",
        "operationId": "delete_file_api_v1_projects__project_id__files__file_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          },
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectFileDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/projects/{project_id}/files/{file_id}/download": {
      "get": {
        "tags": [
          "project-files"
        ],
        "summary": "プロジェクトファイルダウンロード",
        "description": "プロジェクトのファイルをダウンロードします。\n\n    - **project_id**: プロジェクトID\n    - **file_id**: ファイルID\n\n    権限要件:\n    - プロジェクトメンバー（VIEWER以上）\n\n    バイナリストリームとして返却されます。\n\n    認証が必要です。",
        "operationId": "download_file_api_v1_projects__project_id__files__file_id__download_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Project Id"
            }
          },
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sessions": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "分析セッション作成",
        "description": "新しい分析セッションを作成します。\n\n    **認証が必要です。**\n    **プロジェクトメンバーのみアクセス可能です。**\n\n    - セッション作成時に初期スナップショット（snapshot_id=0）が作成されます\n    - validation_config（施策・課題）が設定されます\n    - 空のチャット履歴が初期化されます\n\n    リクエストボディ:\n        - project_id: プロジェクトID（必須）\n        - policy: 施策名（必須）\n        - issue: 課題名（必須）",
        "operationId": "create_session_api_v1_analysis_sessions_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalysisSessionCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisSessionDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "分析セッション一覧取得",
        "description": "プロジェクトに属する分析セッションの一覧を取得します。\n\n    **認証が必要です。**\n    **プロジェクトメンバーのみアクセス可能です。**\n\n    - project_idパラメータでプロジェクトを指定（必須）\n    - created_at降順でソートされます（最新が先頭）\n\n    クエリパラメータ:\n        - project_id: プロジェクトID（必須）\n        - skip: スキップするレコード数（デフォルト: 0）\n        - limit: 取得する最大レコード数（デフォルト: 100、最大: 1000）\n        - is_active: アクティブフラグフィルタ（オプション）",
        "operationId": "list_sessions_api_v1_analysis_sessions_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "project_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "description": "プロジェクトID",
              "title": "Project Id"
            },
            "description": "プロジェクトID"
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップするレコード数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップするレコード数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "取得する最大レコード数",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得する最大レコード数"
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "アクティブフラグフィルタ",
              "title": "Is Active"
            },
            "description": "アクティブフラグフィルタ"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AnalysisSessionDetailResponse"
                  },
                  "title": "Response List Sessions Api V1 Analysis Sessions Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sessions/{session_id}/files": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "データファイルアップロード",
        "description": "分析セッションにデータファイルをアップロードします。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    - 対応フォーマット: CSV, XLSX, XLS\n    - ファイルはBase64エンコードして送信してください\n    - ストレージにはCSV形式（UTF-8）で保存されます\n    - 軸候補が自動抽出されます\n    - タイムアウト: 5分\n\n    リクエストボディ:\n        - file_name: ファイル名（必須）\n        - file_data: Base64エンコードされたファイルデータ（必須）\n        - table_name: テーブル名（必須）",
        "operationId": "upload_file_api_v1_analysis_sessions__session_id__files_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalysisFileUploadRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisFileUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sessions/{session_id}/steps": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "分析ステップ作成",
        "description": "新しい分析ステップを作成します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    - ステップタイプ: filter/aggregate/transform/summary\n    - step_orderは自動採番されます（0から開始）\n    - data_sourceにはoriginalまたは別のステップID（step_0など）を指定\n\n    リクエストボディ:\n        - step_name: ステップ名（必須）\n        - step_type: ステップタイプ（必須）\n        - data_source: データソース（必須）\n        - config: ステップ設定（JSONB）",
        "operationId": "create_step_api_v1_analysis_sessions__session_id__steps_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalysisStepCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisStepResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sessions/{session_id}/chat": {
      "post": {
        "tags": [
          "analysis"
        ],
        "summary": "AIチャット実行",
        "description": "AIエージェントとチャットを実行します（準備中）。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    - Phase 3.1で完全実装予定\n    - 現在はプレースホルダー実装です\n    - タイムアウト: 10分\n\n    リクエストボディ:\n        - message: ユーザーメッセージ（必須）",
        "operationId": "execute_chat_api_v1_analysis_sessions__session_id__chat_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalysisChatRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisChatResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sessions/{session_id}": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "セッション詳細取得",
        "description": "指定されたIDの分析セッション情報を取得します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    - ステップ、ファイル、チャット履歴を含む完全な情報を返します\n    - N+1クエリを回避するため、selectinloadを使用します",
        "operationId": "get_session_api_v1_analysis_sessions__session_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisSessionDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sessions/{session_id}/result": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "分析結果取得",
        "description": "分析セッションの結果を取得します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    - get_sessionと同じレスポンスを返します\n    - エイリアスエンドポイントです",
        "operationId": "get_session_result_api_v1_analysis_sessions__session_id__result_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisSessionDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/validation-config": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "検証設定取得",
        "description": "分析の検証設定（施策・課題）を取得します。\n\n    **認証が必要です。**\n\n    - validation.ymlファイルから読み込まれます\n    - policiesとissuesのリストを返します",
        "operationId": "get_validation_config_api_v1_analysis_validation_config_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisValidationConfigResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/analysis/dummy/{chart_type}": {
      "get": {
        "tags": [
          "analysis"
        ],
        "summary": "ダミーチャートデータ取得",
        "description": "指定されたチャートタイプのダミーデータを取得します。\n\n    **認証が必要です。**\n\n    - Plotly形式のJSONデータを返します\n    - app/data/analysis/dummy/chart/配下から読み込まれます\n\n    パスパラメータ:\n        - chart_type: チャートタイプ（例: bar, line, pie, scatter）",
        "operationId": "get_dummy_data_api_v1_analysis_dummy__chart_type__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "chart_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Chart Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisDummyDataResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/sessions/{session_id}/steps/{step_id}": {
      "delete": {
        "tags": [
          "analysis"
        ],
        "summary": "分析ステップ削除",
        "description": "指定されたステップを削除します。\n\n    **認証が必要です。**\n    **セッションが属するプロジェクトのメンバーのみアクセス可能です。**\n\n    - 物理削除されます（論理削除ではありません）\n    - 関連する結果データは削除されません",
        "operationId": "delete_step_api_v1_analysis_sessions__session_id__steps__step_id__delete",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          },
          {
            "name": "step_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Step Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/templates": {
      "get": {
        "tags": [
          "analysis-templates"
        ],
        "summary": "テンプレート一覧取得",
        "description": "アクティブな分析テンプレート一覧を取得します。ページネーション対応。",
        "operationId": "list_templates_api_v1_analysis_templates_get",
        "parameters": [
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップする件数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップする件数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "取得する最大件数",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得する最大件数"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AnalysisTemplateResponse"
                  },
                  "title": "Response List Templates Api V1 Analysis Templates Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/templates/{template_id}": {
      "get": {
        "tags": [
          "analysis-templates"
        ],
        "summary": "テンプレート詳細取得",
        "description": "指定されたテンプレートの詳細情報を取得します（チャートデータを含む）。",
        "operationId": "get_template_detail_api_v1_analysis_templates__template_id__get",
        "parameters": [
          {
            "name": "template_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Template Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisTemplateDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/templates/policy/{policy}": {
      "get": {
        "tags": [
          "analysis-templates"
        ],
        "summary": "施策別テンプレート一覧取得",
        "description": "指定された施策に紐づくテンプレート一覧を取得します。",
        "operationId": "list_templates_by_policy_api_v1_analysis_templates_policy__policy__get",
        "parameters": [
          {
            "name": "policy",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Policy"
            }
          },
          {
            "name": "skip",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "スキップする件数",
              "default": 0,
              "title": "Skip"
            },
            "description": "スキップする件数"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "取得する最大件数",
              "default": 100,
              "title": "Limit"
            },
            "description": "取得する最大件数"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AnalysisTemplateResponse"
                  },
                  "title": "Response List Templates By Policy Api V1 Analysis Templates Policy  Policy  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/analysis/templates/search/by-policy-issue": {
      "get": {
        "tags": [
          "analysis-templates"
        ],
        "summary": "施策・課題による検索",
        "description": "施策と課題の組み合わせでテンプレートを検索します（チャートデータを含む）。",
        "operationId": "search_template_api_v1_analysis_templates_search_by_policy_issue_get",
        "parameters": [
          {
            "name": "policy",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "施策名",
              "title": "Policy"
            },
            "description": "施策名"
          },
          {
            "name": "issue",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "課題名",
              "title": "Issue"
            },
            "description": "課題名"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AnalysisTemplateDetailResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/download": {
      "get": {
        "tags": [
          "ppt-generator"
        ],
        "summary": "PPTファイルダウンロード",
        "description": "PPTファイルをダウンロードします。\n\n    **認証が必要です。**\n\n    - 指定されたpackage/phase/template配下のPPTXファイルをダウンロード\n    - タイムアウト: 5分\n\n    クエリパラメータ:\n        - package: パッケージ名（必須）\n        - phase: フェーズ名（必須）\n        - template: テンプレート名（必須）",
        "operationId": "download_ppt_api_v1_ppt_download_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "パッケージ名",
              "title": "Package"
            },
            "description": "パッケージ名"
          },
          {
            "name": "phase",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "フェーズ名",
              "title": "Phase"
            },
            "description": "フェーズ名"
          },
          {
            "name": "template",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "テンプレート名",
              "title": "Template"
            },
            "description": "テンプレート名"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/export-slides": {
      "get": {
        "tags": [
          "ppt-generator"
        ],
        "summary": "選択スライドエクスポート",
        "description": "選択されたスライドのみを含む新しいPPTファイルを生成してダウンロードします。\n\n    **認証が必要です。**\n\n    - 指定されたスライド番号のみを含むPPTXファイルを生成\n    - スライド番号はカンマ区切りで指定（例: \"1,3,5,7\"）\n    - タイムアウト: 5分\n\n    クエリパラメータ:\n        - package: パッケージ名（必須）\n        - phase: フェーズ名（必須）\n        - template: テンプレート名（必須）\n        - slide_numbers: スライド番号のカンマ区切り（必須）",
        "operationId": "export_selected_slides_api_v1_ppt_export_slides_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "パッケージ名",
              "title": "Package"
            },
            "description": "パッケージ名"
          },
          {
            "name": "phase",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "フェーズ名",
              "title": "Phase"
            },
            "description": "フェーズ名"
          },
          {
            "name": "template",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "テンプレート名",
              "title": "Template"
            },
            "description": "テンプレート名"
          },
          {
            "name": "slide_numbers",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "pattern": "^\\d+(,\\d+)*$",
              "description": "スライド番号のカンマ区切り（例: '1,3,5,7'）",
              "title": "Slide Numbers"
            },
            "description": "スライド番号のカンマ区切り（例: '1,3,5,7'）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/slide-image": {
      "get": {
        "tags": [
          "ppt-generator"
        ],
        "summary": "スライド画像取得",
        "description": "指定されたスライドを画像（PNG）として取得します。\n\n    **認証が必要です。**\n\n    - 事前に生成された画像を取得します\n    - 画像パス: {package}/{phase}/{template}/img/XXX.png\n    - タイムアウト: 3分\n\n    クエリパラメータ:\n        - package: パッケージ名（必須）\n        - phase: フェーズ名（必須）\n        - template: テンプレート名（必須）\n        - slide_number: スライド番号（必須、1から開始）",
        "operationId": "get_slide_image_api_v1_ppt_slide_image_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "パッケージ名",
              "title": "Package"
            },
            "description": "パッケージ名"
          },
          {
            "name": "phase",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "フェーズ名",
              "title": "Phase"
            },
            "description": "フェーズ名"
          },
          {
            "name": "template",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "テンプレート名",
              "title": "Template"
            },
            "description": "テンプレート名"
          },
          {
            "name": "slide_number",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "スライド番号（1から開始）",
              "title": "Slide Number"
            },
            "description": "スライド番号（1から開始）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/questions": {
      "get": {
        "tags": [
          "ppt-generator"
        ],
        "summary": "質問データダウンロード",
        "description": "質問データをExcelからCSV形式でダウンロードします。\n\n    **認証が必要です。**\n\n    - ExcelファイルからCSVに変換してダウンロード\n    - UTF-8 BOMエンコーディングで出力\n    - タイムアウト: 5分\n\n    クエリパラメータ:\n        - package: パッケージ名（必須）\n        - phase: フェーズ名（必須）\n        - template: テンプレート名（必須）\n        - question_type: 質問タイプ/シート名（必須）",
        "operationId": "download_questions_api_v1_ppt_questions_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "パッケージ名",
              "title": "Package"
            },
            "description": "パッケージ名"
          },
          {
            "name": "phase",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "フェーズ名",
              "title": "Phase"
            },
            "description": "フェーズ名"
          },
          {
            "name": "template",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "テンプレート名",
              "title": "Template"
            },
            "description": "テンプレート名"
          },
          {
            "name": "question_type",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "質問タイプ（Excelシート名）",
              "title": "Question Type"
            },
            "description": "質問タイプ（Excelシート名）"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ppt/upload": {
      "post": {
        "tags": [
          "ppt-generator"
        ],
        "summary": "PPTファイルアップロード",
        "description": "PPTファイルをアップロードします。\n\n    **認証が必要です。**\n\n    - multipart/form-dataでPPTXファイルをアップロード\n    - タイムアウト: 5分\n\n    フォームデータ:\n        - package: パッケージ名（必須）\n        - phase: フェーズ名（必須）\n        - template: テンプレート名（必須）\n        - file: PPTXファイル（必須）",
        "operationId": "upload_ppt_api_v1_ppt_upload_post",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "package",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "パッケージ名",
              "title": "Package"
            },
            "description": "パッケージ名"
          },
          {
            "name": "phase",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "フェーズ名",
              "title": "Phase"
            },
            "description": "フェーズ名"
          },
          {
            "name": "template",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "テンプレート名",
              "title": "Template"
            },
            "description": "テンプレート名"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_ppt_api_v1_ppt_upload_post"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PPTUploadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/driver-tree/nodes": {
      "post": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Create Node",
        "description": "ノードを作成します。\n\nArgs:\n    node_data: ノード作成リクエスト\n    current_user: 現在のユーザー\n    driver_tree_service: Driver Treeサービス\n\nReturns:\n    NodeResponse: 作成されたノード",
        "operationId": "create_node_api_v1_driver_tree_nodes_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverTreeNodeCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverTreeNodeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/driver-tree/nodes/{node_id}": {
      "get": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Get Node",
        "description": "ノードを取得します。\n\nArgs:\n    node_id: ノードID\n    current_user: 現在のユーザー\n    driver_tree_service: Driver Treeサービス\n\nReturns:\n    NodeResponse: ノード",
        "operationId": "get_node_api_v1_driver_tree_nodes__node_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "node_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Node Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverTreeNodeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Update Node",
        "description": "ノードを更新します。\n\nArgs:\n    node_id: ノードID\n    node_data: ノード更新リクエスト\n    current_user: 現在のユーザー\n    driver_tree_service: Driver Treeサービス\n\nReturns:\n    NodeResponse: 更新されたノード",
        "operationId": "update_node_api_v1_driver_tree_nodes__node_id__put",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "node_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Node Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverTreeNodeUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverTreeNodeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/driver-tree/trees": {
      "post": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Create Tree From Formulas",
        "description": "数式からツリーを作成します。\n\nArgs:\n    formula_data: 数式作成リクエスト\n    current_user: 現在のユーザー\n    driver_tree_service: Driver Treeサービス\n\nReturns:\n    TreeResponse: 作成されたツリー",
        "operationId": "create_tree_from_formulas_api_v1_driver_tree_trees_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DriverTreeFormulaCreateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverTreeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/driver-tree/trees/{tree_id}": {
      "get": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Get Tree",
        "description": "ツリーを取得します。\n\nArgs:\n    tree_id: ツリーID\n    current_user: 現在のユーザー\n    driver_tree_service: Driver Treeサービス\n\nReturns:\n    TreeResponse: ツリー",
        "operationId": "get_tree_api_v1_driver_tree_trees__tree_id__get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "tree_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Tree Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverTreeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/driver-tree/categories": {
      "get": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Get Categories",
        "description": "カテゴリー一覧を取得します。\n\nArgs:\n    current_user: 現在のユーザー\n    driver_tree_service: Driver Treeサービス\n\nReturns:\n    dict: カテゴリーの辞書",
        "operationId": "get_categories_api_v1_driver_tree_categories_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "additionalProperties": {
                      "items": {
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "type": "object"
                  },
                  "type": "object",
                  "title": "Response Get Categories Api V1 Driver Tree Categories Get"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/driver-tree/kpis": {
      "get": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Get Kpis",
        "description": "KPI一覧を取得します。\n\nArgs:\n    current_user: 現在のユーザー\n\nReturns:\n    KPIListResponse: KPI一覧",
        "operationId": "get_kpis_api_v1_driver_tree_kpis_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverTreeKPIListResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "HTTPBearer": []
          }
        ]
      }
    },
    "/api/v1/driver-tree/formulas": {
      "get": {
        "tags": [
          "driver-tree"
        ],
        "summary": "Get Formulas",
        "description": "指定されたツリータイプとKPIの数式を取得します。\n\nArgs:\n    current_user: 現在のユーザー\n    tree_type: ツリータイプ\n    kpi: KPI名\n    driver_tree_service: Driver Treeサービス\n\nReturns:\n    FormulaResponse: 数式レスポンス",
        "operationId": "get_formulas_api_v1_driver_tree_formulas_get",
        "security": [
          {
            "HTTPBearer": []
          }
        ],
        "parameters": [
          {
            "name": "tree_type",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "ツリータイプ",
              "title": "Tree Type"
            },
            "description": "ツリータイプ"
          },
          {
            "name": "kpi",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "KPI名",
              "title": "Kpi"
            },
            "description": "KPI名"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DriverTreeFormulaResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/": {
      "get": {
        "tags": [
          "root"
        ],
        "summary": "Root",
        "description": "ルートエンドポイント - APIの基本情報を返します。\n\nアプリケーションのウェルカムメッセージとバージョン情報、\nドキュメントへのリンクを提供します。APIが正常に起動しているかの\n簡易チェックにも使用できます。\n\nReturns:\n    dict: アプリケーション基本情報\n        - message (str): ウェルカムメッセージ\n        - version (str): アプリケーションバージョン（例: \"0.1.0\"）\n        - docs (str): Swagger UIドキュメントのパス（\"/docs\"）\n\nExample:\n    >>> # cURLでアクセス\n    >>> $ curl http://localhost:8000/\n    >>> {\n    >>>   \"message\": \"Welcome to camp-backend\",\n    >>>   \"version\": \"0.1.0\",\n    >>>   \"docs\": \"/docs\"\n    >>> }\n\nNote:\n    - 認証不要のパブリックエンドポイントです\n    - ロードバランサーのヘルスチェックには /health を使用してください",
        "operationId": "root__get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "health"
        ],
        "summary": "Health",
        "description": "ヘルスチェックエンドポイント - アプリケーションとその依存サービスの正常性を確認します。\n\nデータベース（PostgreSQL）とRedisキャッシュの接続状態を検証し、\nアプリケーション全体の健全性を報告します。ロードバランサーや\n監視システム（Kubernetes liveness/readiness probe、Datadog等）から\n定期的に呼び出されることを想定しています。\n\nチェック項目:\n    1. **データベース接続**: SELECT 1 クエリで接続確認\n       - 成功: \"healthy\"\n       - 失敗: \"unhealthy\"\n    2. **Redisキャッシュ**: PINGコマンドで接続確認\n       - REDIS_URL未設定: \"disabled\"\n       - 接続成功: \"healthy\"\n       - 接続失敗: \"unhealthy\"\n    3. **総合ステータス**:\n       - DBが正常: \"healthy\"\n       - DBが異常: \"degraded\"（Redisの状態に関わらず）\n\nReturns:\n    dict: ヘルスチェック結果\n        - status (str): 総合ステータス（\"healthy\" | \"degraded\"）\n        - timestamp (str): チェック実行時刻（ISO 8601形式、UTC）\n        - version (str): アプリケーションバージョン\n        - environment (str): 実行環境（development | staging | production）\n        - services (dict): 各サービスの個別ステータス\n            - database (str): \"healthy\" | \"unhealthy\"\n            - redis (str): \"healthy\" | \"unhealthy\" | \"disabled\"\n\nExample:\n    >>> # 正常時のレスポンス\n    >>> $ curl http://localhost:8000/health\n    >>> {\n    >>>   \"status\": \"healthy\",\n    >>>   \"timestamp\": \"2025-10-16T14:30:00.000000Z\",\n    >>>   \"version\": \"0.1.0\",\n    >>>   \"environment\": \"development\",\n    >>>   \"services\": {\n    >>>     \"database\": \"healthy\",\n    >>>     \"redis\": \"healthy\"\n    >>>   }\n    >>> }\n    >>>\n    >>> # Redis未設定時のレスポンス\n    >>> {\n    >>>   \"status\": \"healthy\",\n    >>>   \"services\": {\n    >>>     \"database\": \"healthy\",\n    >>>     \"redis\": \"disabled\"\n    >>>   }\n    >>> }\n\nNote:\n    - 認証不要のパブリックエンドポイントです\n    - データベース接続失敗時はエラーログを出力します\n    - Kubernetesのliveness/readiness probeに最適です\n    - タイムアウト: データベースクエリは接続プールの設定に依存（デフォルト30秒）",
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "tags": [
          "metrics"
        ],
        "summary": "Metrics",
        "description": "Prometheusメトリクスエンドポイント - アプリケーションのパフォーマンスメトリクスを公開します。\n\nPrometheus監視システムが収集できる形式（テキストベース）でメトリクスを出力します。\nPrometheusMetricsMiddlewareによって自動収集されたHTTPリクエストの統計情報\n（リクエスト数、レスポンスタイム、エラー率等）を提供します。\n\n収集されるメトリクス（PrometheusMetricsMiddlewareによる）:\n    - http_requests_total: HTTPリクエスト総数（method, endpoint, status_codeでラベリング）\n    - http_request_duration_seconds: リクエスト処理時間のヒストグラム\n    - http_requests_in_progress: 現在処理中のリクエスト数\n\n出力形式:\n    Prometheus Exposition Format（テキスト形式）\n    Content-Type: text/plain; version=0.0.4\n\nReturns:\n    Response: Prometheusメトリクスのテキストレスポンス\n        - メトリクス名、ラベル、値のリスト\n\nExample:\n    >>> # cURLでアクセス\n    >>> $ curl http://localhost:8000/metrics\n    >>> # HELP http_requests_total Total HTTP requests\n    >>> # TYPE http_requests_total counter\n    >>> http_requests_total{method=\"GET\",endpoint=\"/health\",status_code=\"200\"} 42.0\n    >>> http_requests_total{method=\"POST\",endpoint=\"/api/v1/agents/chat\",status_code=\"200\"} 15.0\n    >>> # HELP http_request_duration_seconds HTTP request duration\n    >>> # TYPE http_request_duration_seconds histogram\n    >>> http_request_duration_seconds_bucket{le=\"0.1\"} 50.0\n    >>> http_request_duration_seconds_bucket{le=\"0.5\"} 55.0\n    >>> http_request_duration_seconds_sum 12.5\n    >>> http_request_duration_seconds_count 57.0\n\nNote:\n    - 認証不要のパブリックエンドポイントです\n    - Prometheusサーバーの設定例（prometheus.yml）:\n      ```yaml\n      scrape_configs:\n        - job_name: 'fastapi-app'\n          static_configs:\n            - targets: ['localhost:8000']\n          metrics_path: '/metrics'\n      ```\n    - Grafanaダッシュボードと連携して可視化できます\n    - セキュリティ: 本番環境では認証を追加することを推奨します",
        "operationId": "metrics_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AnalysisChatRequest": {
        "properties": {
          "message": {
            "type": "string",
            "minLength": 1,
            "title": "Message",
            "description": "ユーザーのメッセージ"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "AnalysisChatRequest",
        "description": "AIチャットリクエストスキーマ。\n\nAIエージェントとのチャット時に使用します。\n\nAttributes:\n    message (str): ユーザーのメッセージ\n\nExample:\n    >>> chat = AnalysisChatRequest(\n    ...     message=\"売上データを東京と大阪でフィルタリングしてください\"\n    ... )"
      },
      "AnalysisChatResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "AIエージェントのメッセージ"
          },
          "snapshot_id": {
            "type": "integer",
            "title": "Snapshot Id",
            "description": "スナップショットID"
          },
          "steps_added": {
            "type": "integer",
            "title": "Steps Added",
            "description": "追加されたステップ数",
            "default": 0
          },
          "steps_modified": {
            "type": "integer",
            "title": "Steps Modified",
            "description": "変更されたステップ数",
            "default": 0
          },
          "analysis_result": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Analysis Result",
            "description": "分析結果"
          }
        },
        "type": "object",
        "required": [
          "message",
          "snapshot_id"
        ],
        "title": "AnalysisChatResponse",
        "description": "AIチャット応答スキーマ。\n\nAIエージェントからの応答を返す際に使用します。\n\nAttributes:\n    message (str): AIエージェントのメッセージ\n    snapshot_id (int): スナップショットID\n    steps_added (int): 追加されたステップ数\n    steps_modified (int): 変更されたステップ数\n    analysis_result (dict[str, Any] | None): 分析結果（チャート、数式など）\n\nExample:\n    >>> response = AnalysisChatResponse(\n    ...     message=\"東京と大阪でフィルタリングしました。\",\n    ...     steps_added=1,\n    ...     steps_modified=0,\n    ...     analysis_result={\"chart\": {...}, \"formula\": [...]}\n    ... )"
      },
      "AnalysisDummyDataResponse": {
        "properties": {
          "formula": {
            "items": {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            },
            "type": "array",
            "title": "Formula",
            "description": "ダミー数式"
          },
          "input": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Input",
            "description": "ダミー入力データ（CSV文字列）"
          },
          "chart": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Chart",
            "description": "ダミーチャート（Plotly JSON）"
          },
          "hint": {
            "type": "string",
            "title": "Hint",
            "description": "ヒント文章",
            "default": ""
          }
        },
        "type": "object",
        "title": "AnalysisDummyDataResponse",
        "description": "ダミーデータレスポンススキーマ。\n\nダミーデータを返す際に使用します。\n\nAttributes:\n    formula (list[dict[str, str]]): ダミー数式\n    input (list[str]): ダミー入力データ（CSV文字列のリスト）\n    chart (list[str]): ダミーチャート（Plotly JSONのリスト）\n    hint (str): ヒント文章\n\nExample:\n    >>> dummy = AnalysisDummyDataResponse(\n    ...     formula=[{\"name\": \"売上合計\", \"value\": \"1000\"}],\n    ...     input=[\"地域,売上\\n東京,1000\"],\n    ...     chart=[\"{}\"],\n    ...     hint=\"このデータは...\"\n    ... )"
      },
      "AnalysisFileMetadata": {
        "properties": {
          "sheet_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sheet Name",
            "description": "シート名（Excelファイルの場合）"
          },
          "row_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Row Count",
            "description": "行数"
          },
          "column_count": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Column Count",
            "description": "列数"
          },
          "columns": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Columns",
            "description": "カラム名のリスト"
          }
        },
        "type": "object",
        "required": [
          "row_count",
          "column_count"
        ],
        "title": "AnalysisFileMetadata",
        "description": "ファイルメタデータスキーマ。\n\nアップロードされたファイルのメタ情報を保存します。\n\nAttributes:\n    sheet_name (str | None): シート名（Excelファイルの場合）\n    row_count (int): 行数\n    column_count (int): 列数\n    columns (list[str] | None): カラム名のリスト\n\nExample:\n    >>> metadata = AnalysisFileMetadata(\n    ...     sheet_name=\"Sheet1\",\n    ...     row_count=1000,\n    ...     column_count=10,\n    ...     columns=[\"ID\", \"名前\", \"売上\"]\n    ... )"
      },
      "AnalysisFileResponse": {
        "properties": {
          "file_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "File Name",
            "description": "ファイル名"
          },
          "table_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Table Name",
            "description": "テーブル名"
          },
          "table_axis": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Table Axis",
            "description": "軸候補のリスト"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ファイルID"
          },
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id",
            "description": "セッションID"
          },
          "uploaded_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uploaded By",
            "description": "アップロード者のユーザーID"
          },
          "storage_path": {
            "type": "string",
            "title": "Storage Path",
            "description": "ストレージパス"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size",
            "description": "ファイルサイズ（バイト）"
          },
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type",
            "description": "MIMEタイプ"
          },
          "file_metadata": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AnalysisFileMetadata"
              },
              {
                "type": "null"
              }
            ],
            "description": "ファイルメタデータ"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "アクティブフラグ"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時（UTC）"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時（UTC）"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "table_name",
          "id",
          "session_id",
          "storage_path",
          "file_size",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "AnalysisFileResponse",
        "description": "分析ファイル情報レスポンススキーマ。\n\nAPIレスポンスでファイル情報を返す際に使用します。\n\nAttributes:\n    id (uuid.UUID): ファイルID\n    session_id (uuid.UUID): セッションID\n    uploaded_by (uuid.UUID | None): アップロード者のユーザーID\n    file_name (str): ファイル名（継承）\n    table_name (str): テーブル名（継承）\n    storage_path (str): ストレージパス\n    file_size (int): ファイルサイズ（バイト）\n    content_type (str | None): MIMEタイプ\n    table_axis (list[str] | None): 軸候補のリスト（継承）\n    file_metadata (dict[str, Any] | None): その他のメタデータ\n    is_active (bool): アクティブフラグ\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時"
      },
      "AnalysisFileUploadRequest": {
        "properties": {
          "file_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "File Name",
            "description": "ファイル名"
          },
          "table_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Table Name",
            "description": "テーブル名"
          },
          "table_axis": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Table Axis",
            "description": "軸候補のリスト"
          },
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id",
            "description": "セッションID"
          },
          "data": {
            "type": "string",
            "title": "Data",
            "description": "DataFrameのCSV文字列"
          }
        },
        "type": "object",
        "required": [
          "file_name",
          "table_name",
          "session_id",
          "data"
        ],
        "title": "AnalysisFileUploadRequest",
        "description": "分析ファイルアップロードリクエストスキーマ。\n\nファイルアップロード時に使用します。\n\nAttributes:\n    session_id (uuid.UUID): セッションID\n    file_name (str): ファイル名（継承）\n    table_name (str): テーブル名（継承）\n    table_axis (list[str] | None): 軸候補のリスト（継承）\n    data (str): DataFrameのCSV文字列\n\nExample:\n    >>> upload = AnalysisFileUploadRequest(\n    ...     session_id=uuid.uuid4(),\n    ...     file_name=\"sales_data.xlsx\",\n    ...     table_name=\"売上データ\",\n    ...     table_axis=[\"地域\", \"商品\"],\n    ...     data=\"地域,商品,売上\\n東京,商品A,1000\\n...\"\n    ... )"
      },
      "AnalysisFileUploadResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ファイルID"
          },
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id",
            "description": "セッションID"
          },
          "file_name": {
            "type": "string",
            "title": "File Name",
            "description": "ファイル名"
          },
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "description": "テーブル名"
          },
          "storage_path": {
            "type": "string",
            "title": "Storage Path",
            "description": "ストレージパス"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size",
            "description": "ファイルサイズ（バイト）"
          },
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type",
            "description": "MIMEタイプ"
          },
          "table_axis": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Table Axis",
            "description": "軸候補のリスト"
          },
          "uploaded_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uploaded By",
            "description": "アップロード者のユーザーID"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時（UTC）"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "成功メッセージ"
          }
        },
        "type": "object",
        "required": [
          "id",
          "session_id",
          "file_name",
          "table_name",
          "storage_path",
          "file_size",
          "created_at",
          "message"
        ],
        "title": "AnalysisFileUploadResponse",
        "description": "分析ファイルアップロード成功レスポンススキーマ。\n\nファイルアップロード直後に返却される情報を含みます。\n\nAttributes:\n    id (uuid.UUID): ファイルID\n    session_id (uuid.UUID): セッションID\n    file_name (str): ファイル名\n    table_name (str): テーブル名\n    storage_path (str): ストレージパス\n    file_size (int): ファイルサイズ（バイト）\n    content_type (str | None): MIMEタイプ\n    table_axis (list[str] | None): 軸候補のリスト\n    uploaded_by (uuid.UUID | None): アップロード者のユーザーID\n    created_at (datetime): 作成日時\n    message (str): 成功メッセージ"
      },
      "AnalysisSessionCreate": {
        "properties": {
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          },
          "policy": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Policy",
            "description": "施策名"
          },
          "issue": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Issue",
            "description": "課題名"
          },
          "session_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Name",
            "description": "セッション名"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "policy",
          "issue"
        ],
        "title": "AnalysisSessionCreate",
        "description": "分析セッション作成リクエストスキーマ。\n\n新規分析セッション作成時に使用します。\n\nAttributes:\n    project_id (uuid.UUID): プロジェクトID\n    policy (str): 施策名\n    issue (str): 課題名\n    session_name (str | None): セッション名（オプション）\n\nExample:\n    >>> session = AnalysisSessionCreate(\n    ...     project_id=uuid.uuid4(),\n    ...     policy=\"市場拡大\",\n    ...     issue=\"新規参入\",\n    ...     session_name=\"2024年第1四半期分析\"\n    ... )"
      },
      "AnalysisSessionDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "セッションID（UUID）"
          },
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "作成者のユーザーID"
          },
          "session_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Name",
            "description": "セッション名"
          },
          "validation_config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation Config",
            "description": "validation設定"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "アクティブフラグ"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時（UTC）"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時（UTC）"
          },
          "chat_history": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Chat History",
            "description": "チャット履歴"
          },
          "snapshot_history": {
            "anyOf": [
              {
                "items": {
                  "items": {
                    "additionalProperties": true,
                    "type": "object"
                  },
                  "type": "array"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Snapshot History",
            "description": "スナップショット履歴"
          },
          "steps": {
            "items": {
              "$ref": "#/components/schemas/AnalysisStepResponse"
            },
            "type": "array",
            "title": "Steps",
            "description": "分析ステップリスト"
          },
          "files": {
            "items": {
              "$ref": "#/components/schemas/AnalysisFileResponse"
            },
            "type": "array",
            "title": "Files",
            "description": "アップロードファイルリスト"
          }
        },
        "type": "object",
        "required": [
          "id",
          "project_id",
          "validation_config",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "AnalysisSessionDetailResponse",
        "description": "分析セッション詳細レスポンススキーマ。\n\nセッション情報に加えて、ステップとファイルの情報も含みます。\n\nAttributes:\n    id (uuid.UUID): セッションID（継承）\n    project_id (uuid.UUID): プロジェクトID（継承）\n    created_by (uuid.UUID | None): 作成者のユーザーID（継承）\n    session_name (str | None): セッション名（継承）\n    validation_config (dict[str, Any]): validation設定（継承）\n    chat_history (ChatHistory): チャット履歴\n        各メッセージは AnalysisChatMessage（DB保存時はdictに変換）\n    snapshot_history (SnapshotHistory | None): スナップショット履歴\n        各スナップショットはAnalysisStepSnapshotのリスト（list[list[AnalysisStepSnapshot]]）\n        DB保存時はdictに変換されます\n    steps (list[AnalysisStepResponse]): 分析ステップリスト\n    files (list[AnalysisFileResponse]): アップロードファイルリスト\n    is_active (bool): アクティブフラグ（継承）\n    created_at (datetime): 作成日時（継承）\n    updated_at (datetime): 更新日時（継承）"
      },
      "AnalysisStepCreate": {
        "properties": {
          "step_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Step Name",
            "description": "ステップ名"
          },
          "step_type": {
            "type": "string",
            "pattern": "^(filter|aggregate|transform|summary)$",
            "title": "Step Type",
            "description": "ステップタイプ（filter/aggregate/transform/summary）"
          },
          "data_source": {
            "type": "string",
            "maxLength": 100,
            "title": "Data Source",
            "description": "データソース（original/step_0/step_1/...）",
            "default": "original"
          },
          "config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Config",
            "description": "ステップ設定"
          },
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id",
            "description": "セッションID"
          }
        },
        "type": "object",
        "required": [
          "step_name",
          "step_type",
          "session_id"
        ],
        "title": "AnalysisStepCreate",
        "description": "分析ステップ作成リクエストスキーマ。\n\n新規ステップ追加時に使用します。\n\nAttributes:\n    session_id (uuid.UUID): セッションID\n    step_name (str): ステップ名（継承）\n    step_type (str): ステップタイプ（継承）\n    data_source (str): データソース（継承）\n    config (dict[str, Any]): ステップ設定（継承）\n\nExample:\n    >>> step = AnalysisStepCreate(\n    ...     session_id=uuid.uuid4(),\n    ...     step_name=\"売上フィルタリング\",\n    ...     step_type=\"filter\",\n    ...     data_source=\"original\",\n    ...     config={\"category_filter\": {\"地域\": [\"東京\", \"大阪\"]}}\n    ... )"
      },
      "AnalysisStepResponse": {
        "properties": {
          "step_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Step Name",
            "description": "ステップ名"
          },
          "step_type": {
            "type": "string",
            "pattern": "^(filter|aggregate|transform|summary)$",
            "title": "Step Type",
            "description": "ステップタイプ（filter/aggregate/transform/summary）"
          },
          "data_source": {
            "type": "string",
            "maxLength": 100,
            "title": "Data Source",
            "description": "データソース（original/step_0/step_1/...）",
            "default": "original"
          },
          "config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Config",
            "description": "ステップ設定"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ステップID"
          },
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id",
            "description": "セッションID"
          },
          "step_order": {
            "type": "integer",
            "title": "Step Order",
            "description": "ステップの順序（0から開始）"
          },
          "result_data_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Data Path",
            "description": "結果データのストレージパス"
          },
          "result_chart": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Chart",
            "description": "結果チャート（Plotly JSON）"
          },
          "result_formula": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result Formula",
            "description": "結果数式リスト（論理型: AnalysisResultFormulaList）"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "アクティブフラグ"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時（UTC）"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時（UTC）"
          }
        },
        "type": "object",
        "required": [
          "step_name",
          "step_type",
          "id",
          "session_id",
          "step_order",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "AnalysisStepResponse",
        "description": "分析ステップ情報レスポンススキーマ。\n\nAPIレスポンスでステップ情報を返す際に使用します。\n\nAttributes:\n    id (uuid.UUID): ステップID\n    session_id (uuid.UUID): セッションID\n    step_name (str): ステップ名（継承）\n    step_type (str): ステップタイプ（継承）\n    step_order (int): ステップの順序\n    data_source (str): データソース（継承）\n    config (dict[str, Any]): ステップ設定（継承）\n    result_data_path (str | None): 結果データのストレージパス\n    result_chart (dict[str, Any] | None): 結果チャート（Plotly JSON）\n    result_formula (AnalysisResultFormulaList | None): 結果数式（各要素は AnalysisResultFormula）\n    is_active (bool): アクティブフラグ\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時"
      },
      "AnalysisTemplateChartResponse": {
        "properties": {
          "chart_name": {
            "type": "string",
            "maxLength": 500,
            "title": "Chart Name",
            "description": "チャート名（ファイル名由来）"
          },
          "chart_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Chart Data",
            "description": "Plotly形式のチャートデータ"
          },
          "chart_order": {
            "type": "integer",
            "title": "Chart Order",
            "description": "チャート表示順序",
            "default": 0
          },
          "chart_type": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 50
              },
              {
                "type": "null"
              }
            ],
            "title": "Chart Type",
            "description": "チャートタイプ（bar, line, pie等）"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "チャートID"
          },
          "template_id": {
            "type": "string",
            "format": "uuid",
            "title": "Template Id",
            "description": "テンプレートID"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時"
          }
        },
        "type": "object",
        "required": [
          "chart_name",
          "chart_data",
          "id",
          "template_id",
          "created_at",
          "updated_at"
        ],
        "title": "AnalysisTemplateChartResponse",
        "description": "チャート情報レスポンススキーマ。\n\nチャート情報のAPI応答形式を定義します。\n\nAttributes:\n    id (uuid.UUID): チャートID\n    template_id (uuid.UUID): 所属するテンプレートID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"template_id\": \"223e4567-e89b-12d3-a456-426614174000\",\n    ...     \"chart_name\": \"利益改善効果グラフ\",\n    ...     \"chart_data\": {\"data\": [...], \"layout\": {...}},\n    ...     \"chart_order\": 0,\n    ...     \"chart_type\": \"scatter\",\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"
      },
      "AnalysisTemplateDetailResponse": {
        "properties": {
          "policy": {
            "type": "string",
            "maxLength": 200,
            "title": "Policy",
            "description": "施策名"
          },
          "issue": {
            "type": "string",
            "maxLength": 500,
            "title": "Issue",
            "description": "課題名"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "テンプレートの説明"
          },
          "agent_prompt": {
            "type": "string",
            "title": "Agent Prompt",
            "description": "AIエージェント用のプロンプト"
          },
          "initial_msg": {
            "type": "string",
            "title": "Initial Msg",
            "description": "初期メッセージ"
          },
          "initial_axis": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Initial Axis",
            "description": "初期軸設定（論理型: InitialAxisList）"
          },
          "dummy_formula": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dummy Formula",
            "description": "ダミー計算式"
          },
          "dummy_input": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dummy Input",
            "description": "ダミー入力データ"
          },
          "dummy_hint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dummy Hint",
            "description": "ダミーヒント"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "アクティブフラグ",
            "default": true
          },
          "display_order": {
            "type": "integer",
            "title": "Display Order",
            "description": "表示順序",
            "default": 0
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "テンプレートID"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時"
          },
          "charts": {
            "items": {
              "$ref": "#/components/schemas/AnalysisTemplateChartResponse"
            },
            "type": "array",
            "title": "Charts",
            "description": "関連するチャートデータのリスト"
          }
        },
        "type": "object",
        "required": [
          "policy",
          "issue",
          "description",
          "agent_prompt",
          "initial_msg",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "AnalysisTemplateDetailResponse",
        "description": "テンプレート詳細レスポンススキーマ。\n\nチャートデータを含むテンプレート詳細情報のAPI応答形式を定義します。\n\nAttributes:\n    charts (list[AnalysisTemplateChartResponse]): 関連するチャートデータのリスト\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"policy\": \"市場拡大\",\n    ...     \"issue\": \"新規参入\",\n    ...     \"description\": \"新規市場への参入効果を分析します\",\n    ...     \"agent_prompt\": \"...\",\n    ...     \"initial_msg\": \"分析を開始します\",\n    ...     \"initial_axis\": [...],\n    ...     \"dummy_formula\": [...],\n    ...     \"dummy_input\": [...],\n    ...     \"dummy_hint\": \"...\",\n    ...     \"is_active\": true,\n    ...     \"display_order\": 0,\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"charts\": [\n    ...         {\n    ...             \"id\": \"223e4567-e89b-12d3-a456-426614174000\",\n    ...             \"template_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...             \"chart_name\": \"利益改善効果グラフ\",\n    ...             \"chart_data\": {\"data\": [...], \"layout\": {...}},\n    ...             \"chart_order\": 0,\n    ...             \"chart_type\": \"scatter\",\n    ...             \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...             \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ...         }\n    ...     ]\n    ... }"
      },
      "AnalysisTemplateResponse": {
        "properties": {
          "policy": {
            "type": "string",
            "maxLength": 200,
            "title": "Policy",
            "description": "施策名"
          },
          "issue": {
            "type": "string",
            "maxLength": 500,
            "title": "Issue",
            "description": "課題名"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "テンプレートの説明"
          },
          "agent_prompt": {
            "type": "string",
            "title": "Agent Prompt",
            "description": "AIエージェント用のプロンプト"
          },
          "initial_msg": {
            "type": "string",
            "title": "Initial Msg",
            "description": "初期メッセージ"
          },
          "initial_axis": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Initial Axis",
            "description": "初期軸設定（論理型: InitialAxisList）"
          },
          "dummy_formula": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dummy Formula",
            "description": "ダミー計算式"
          },
          "dummy_input": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dummy Input",
            "description": "ダミー入力データ"
          },
          "dummy_hint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Dummy Hint",
            "description": "ダミーヒント"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "アクティブフラグ",
            "default": true
          },
          "display_order": {
            "type": "integer",
            "title": "Display Order",
            "description": "表示順序",
            "default": 0
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "テンプレートID"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時"
          }
        },
        "type": "object",
        "required": [
          "policy",
          "issue",
          "description",
          "agent_prompt",
          "initial_msg",
          "id",
          "created_at",
          "updated_at"
        ],
        "title": "AnalysisTemplateResponse",
        "description": "テンプレート情報レスポンススキーマ。\n\nテンプレート情報のAPI応答形式を定義します（チャートデータは含まない）。\n\nAttributes:\n    id (uuid.UUID): テンプレートID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> {\n    ...     \"id\": \"123e4567-e89b-12d3-a456-426614174000\",\n    ...     \"policy\": \"市場拡大\",\n    ...     \"issue\": \"新規参入\",\n    ...     \"description\": \"新規市場への参入効果を分析します\",\n    ...     \"agent_prompt\": \"...\",\n    ...     \"initial_msg\": \"分析を開始します\",\n    ...     \"initial_axis\": [{\"name\": \"横軸\", \"option\": \"科目\", \"multiple\": false}],\n    ...     \"dummy_formula\": null,\n    ...     \"dummy_input\": null,\n    ...     \"dummy_hint\": null,\n    ...     \"is_active\": true,\n    ...     \"display_order\": 0,\n    ...     \"created_at\": \"2025-01-01T00:00:00Z\",\n    ...     \"updated_at\": \"2025-01-01T00:00:00Z\"\n    ... }"
      },
      "AnalysisValidationConfigResponse": {
        "properties": {
          "validation_config": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation Config",
            "description": "validation設定の全体"
          }
        },
        "type": "object",
        "required": [
          "validation_config"
        ],
        "title": "AnalysisValidationConfigResponse",
        "description": "validation設定レスポンススキーマ。\n\nvalidation.ymlの内容を返す際に使用します。\n\nAttributes:\n    validation_config (dict[str, Any]): validation設定の全体\n\nExample:\n    >>> config = AnalysisValidationConfigResponse(\n    ...     validation_config={\n    ...         \"市場拡大\": {\n    ...             \"新規参入\": {...}\n    ...         }\n    ...     }\n    ... )"
      },
      "Body_upload_file_api_v1_projects__project_id__files_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_api_v1_projects__project_id__files_post"
      },
      "Body_upload_file_api_v1_sample_files_sample_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_api_v1_sample_files_sample_upload_post"
      },
      "Body_upload_ppt_api_v1_ppt_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "PPTXファイル"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_ppt_api_v1_ppt_upload_post"
      },
      "DriverTreeFormulaCreateRequest": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "ツリー名"
          },
          "formulas": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "minItems": 1,
            "title": "Formulas",
            "description": "数式のリスト"
          }
        },
        "type": "object",
        "required": [
          "formulas"
        ],
        "title": "DriverTreeFormulaCreateRequest",
        "description": "数式からツリー作成リクエスト。"
      },
      "DriverTreeFormulaResponse": {
        "properties": {
          "formulas": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Formulas",
            "description": "数式のリスト"
          }
        },
        "type": "object",
        "required": [
          "formulas"
        ],
        "title": "DriverTreeFormulaResponse",
        "description": "数式レスポンス。"
      },
      "DriverTreeKPIListResponse": {
        "properties": {
          "kpis": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Kpis",
            "description": "KPI名のリスト"
          }
        },
        "type": "object",
        "required": [
          "kpis"
        ],
        "title": "DriverTreeKPIListResponse",
        "description": "KPI一覧レスポンス。"
      },
      "DriverTreeNodeCreate": {
        "properties": {
          "tree_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tree Id",
            "description": "所属するツリーのID"
          },
          "label": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Label",
            "description": "ノードのラベル"
          },
          "parent_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Id",
            "description": "親ノードID（Noneの場合はルートノード）"
          },
          "operator": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 10
              },
              {
                "type": "null"
              }
            ],
            "title": "Operator",
            "description": "親ノードとの演算子"
          },
          "x": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "X",
            "description": "X座標"
          },
          "y": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Y",
            "description": "Y座標"
          }
        },
        "type": "object",
        "required": [
          "tree_id",
          "label"
        ],
        "title": "DriverTreeNodeCreate",
        "description": "ノード作成リクエスト。\n\nAttributes:\n    tree_id: 所属するツリーのID\n    label: ノードのラベル（KPI名や計算要素名）\n    parent_id: 親ノードID（Noneの場合はルートノード）\n    operator: 親ノードとの演算子（+, -, *, /, %など）\n    x: X座標（ツリー表示用）\n    y: Y座標（ツリー表示用）"
      },
      "DriverTreeNodeResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ノードID"
          },
          "tree_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tree Id",
            "description": "所属するツリーのID"
          },
          "label": {
            "type": "string",
            "title": "Label",
            "description": "ノードのラベル"
          },
          "parent_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Id",
            "description": "親ノードID"
          },
          "operator": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Operator",
            "description": "演算子"
          },
          "x": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "X",
            "description": "X座標"
          },
          "y": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Y",
            "description": "Y座標"
          },
          "children": {
            "items": {
              "$ref": "#/components/schemas/DriverTreeNodeResponse"
            },
            "type": "array",
            "title": "Children",
            "description": "子ノードのリスト"
          }
        },
        "type": "object",
        "required": [
          "id",
          "tree_id",
          "label"
        ],
        "title": "DriverTreeNodeResponse",
        "description": "ノードレスポンス（木構造）。"
      },
      "DriverTreeNodeUpdate": {
        "properties": {
          "label": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Label",
            "description": "ノードのラベル"
          },
          "parent_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Id",
            "description": "親ノードID"
          },
          "operator": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 10
              },
              {
                "type": "null"
              }
            ],
            "title": "Operator",
            "description": "演算子"
          },
          "x": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "X",
            "description": "X座標"
          },
          "y": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Y",
            "description": "Y座標"
          }
        },
        "type": "object",
        "title": "DriverTreeNodeUpdate",
        "description": "ノード更新リクエスト。"
      },
      "DriverTreeResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ツリーID"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "ツリー名"
          },
          "root_node_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Root Node Id",
            "description": "ルートノードID"
          },
          "root_node": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DriverTreeNodeResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "ルートノード（木構造全体を含む）"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "DriverTreeResponse",
        "description": "ツリーレスポンス。"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "PPTUploadResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "アップロード成功フラグ"
          },
          "file_path": {
            "type": "string",
            "title": "File Path",
            "description": "ストレージパス"
          },
          "file_size": {
            "type": "integer",
            "minimum": 0.0,
            "title": "File Size",
            "description": "ファイルサイズ（バイト）"
          }
        },
        "type": "object",
        "required": [
          "success",
          "file_path",
          "file_size"
        ],
        "title": "PPTUploadResponse",
        "description": "PPTファイルアップロードレスポンス。\n\nAttributes:\n    success: アップロード成功フラグ\n    file_path: アップロードされたファイルのストレージパス\n    file_size: ファイルサイズ（バイト）\n\nExample:\n    >>> response = PPTUploadResponse(\n    ...     success=True,\n    ...     file_path=\"market-analysis/phase1/template_a/presentation.pptx\",\n    ...     file_size=1024000\n    ... )\n    >>> print(response.success)\n    True",
        "example": {
          "file_path": "market-analysis/phase1/template_a/presentation.pptx",
          "file_size": 1024000,
          "success": true
        }
      },
      "ProjectCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "プロジェクト名"
          },
          "code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Code",
            "description": "プロジェクトコード（一意識別子）"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "プロジェクト説明"
          }
        },
        "type": "object",
        "required": [
          "name",
          "code"
        ],
        "title": "ProjectCreate",
        "description": "プロジェクト作成リクエストスキーマ。\n\n新規プロジェクト作成時に使用します。\n\nAttributes:\n    name (str): プロジェクト名（ProjectBaseから継承）\n    code (str): プロジェクトコード（ProjectBaseから継承）\n    description (str | None): プロジェクト説明（ProjectBaseから継承）\n\nExample:\n    >>> project = ProjectCreate(\n    ...     name=\"AI Development Project\",\n    ...     code=\"AI-001\",\n    ...     description=\"Project for AI model development\"\n    ... )"
      },
      "ProjectFileDeleteResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id",
            "description": "削除されたファイルのID"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "削除成功メッセージ"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "message"
        ],
        "title": "ProjectFileDeleteResponse",
        "description": "ファイル削除成功レスポンススキーマ。\n\nファイル削除操作の成功を示すレスポンスです。\n\nAttributes:\n    file_id (uuid.UUID): 削除されたファイルのID\n    message (str): 成功メッセージ\n\nExample:\n    >>> response = ProjectFileDeleteResponse(\n    ...     file_id=uuid.uuid4(),\n    ...     message=\"File deleted successfully\"\n    ... )"
      },
      "ProjectFileListResponse": {
        "properties": {
          "files": {
            "items": {
              "$ref": "#/components/schemas/ProjectFileResponse"
            },
            "type": "array",
            "title": "Files",
            "description": "ファイルのリスト"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "総ファイル数"
          },
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          }
        },
        "type": "object",
        "required": [
          "files",
          "total",
          "project_id"
        ],
        "title": "ProjectFileListResponse",
        "description": "プロジェクトファイル一覧レスポンススキーマ。\n\nプロジェクトに属するファイル一覧とメタデータを返却します。\n\nAttributes:\n    files (list[ProjectFileResponse]): ファイルのリスト\n    total (int): 総ファイル数\n    project_id (uuid.UUID): プロジェクトID\n\nExample:\n    >>> response = ProjectFileListResponse(\n    ...     files=[file1, file2, file3],\n    ...     total=3,\n    ...     project_id=project_id\n    ... )\n\nNote:\n    - ページネーション情報は別途クエリパラメータで管理されます\n    - total はプロジェクト全体のファイル数を示します"
      },
      "ProjectFileResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ファイルID（UUID）"
          },
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "保存ファイル名"
          },
          "original_filename": {
            "type": "string",
            "title": "Original Filename",
            "description": "元のファイル名"
          },
          "file_path": {
            "type": "string",
            "title": "File Path",
            "description": "ファイルパス"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size",
            "description": "ファイルサイズ（バイト）"
          },
          "mime_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mime Type",
            "description": "MIMEタイプ"
          },
          "uploaded_by": {
            "type": "string",
            "format": "uuid",
            "title": "Uploaded By",
            "description": "アップロード者のユーザーID"
          },
          "uploaded_at": {
            "type": "string",
            "format": "date-time",
            "title": "Uploaded At",
            "description": "アップロード日時"
          },
          "uploader": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "アップロード者のユーザー情報"
          }
        },
        "type": "object",
        "required": [
          "id",
          "project_id",
          "filename",
          "original_filename",
          "file_path",
          "file_size",
          "uploaded_by",
          "uploaded_at"
        ],
        "title": "ProjectFileResponse",
        "description": "プロジェクトファイル情報レスポンススキーマ。\n\nアップロード者情報を含む詳細なファイル情報を返却します。\n\nAttributes:\n    id (uuid.UUID): ファイルID（UUID）\n    project_id (uuid.UUID): プロジェクトID\n    filename (str): 保存ファイル名\n    original_filename (str): 元のファイル名\n    file_path (str): ファイルパス\n    file_size (int): ファイルサイズ（バイト）\n    mime_type (str | None): MIMEタイプ\n    uploaded_by (uuid.UUID): アップロード者のユーザーID\n    uploaded_at (datetime): アップロード日時\n    uploader (UserResponse | None): アップロード者のユーザー情報\n\nExample:\n    >>> file_response = ProjectFileResponse(\n    ...     id=uuid.uuid4(),\n    ...     project_id=project_id,\n    ...     filename=\"doc_12345.pdf\",\n    ...     original_filename=\"document.pdf\",\n    ...     file_path=\"uploads/projects/proj-id/doc_12345.pdf\",\n    ...     file_size=1024000,\n    ...     mime_type=\"application/pdf\",\n    ...     uploaded_by=user_id,\n    ...     uploaded_at=datetime.now(UTC),\n    ...     uploader=UserResponse(...)\n    ... )\n\nNote:\n    - from_attributesを有効にしているため、ORMモデルから直接変換可能です\n    - uploaderフィールドはリレーションシップから自動的に解決されます"
      },
      "ProjectFileUploadResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ファイルID（UUID）"
          },
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "保存ファイル名"
          },
          "original_filename": {
            "type": "string",
            "title": "Original Filename",
            "description": "元のファイル名"
          },
          "file_path": {
            "type": "string",
            "title": "File Path",
            "description": "ファイルパス"
          },
          "file_size": {
            "type": "integer",
            "title": "File Size",
            "description": "ファイルサイズ（バイト）"
          },
          "mime_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mime Type",
            "description": "MIMEタイプ"
          },
          "uploaded_by": {
            "type": "string",
            "format": "uuid",
            "title": "Uploaded By",
            "description": "アップロード者のユーザーID"
          },
          "uploaded_at": {
            "type": "string",
            "format": "date-time",
            "title": "Uploaded At",
            "description": "アップロード日時"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "成功メッセージ",
            "default": "File uploaded successfully"
          }
        },
        "type": "object",
        "required": [
          "id",
          "project_id",
          "filename",
          "original_filename",
          "file_path",
          "file_size",
          "uploaded_by",
          "uploaded_at"
        ],
        "title": "ProjectFileUploadResponse",
        "description": "ファイルアップロード成功レスポンススキーマ。\n\nファイルアップロード直後に返却される基本情報を含みます。\n\nAttributes:\n    id (uuid.UUID): ファイルID（UUID）\n    project_id (uuid.UUID): プロジェクトID\n    filename (str): 保存ファイル名\n    original_filename (str): 元のファイル名\n    file_path (str): ファイルパス\n    file_size (int): ファイルサイズ（バイト）\n    mime_type (str | None): MIMEタイプ\n    uploaded_by (uuid.UUID): アップロード者のユーザーID\n    uploaded_at (datetime): アップロード日時\n    message (str): 成功メッセージ\n\nExample:\n    >>> response = ProjectFileUploadResponse(\n    ...     id=uuid.uuid4(),\n    ...     project_id=project_id,\n    ...     filename=\"doc_12345.pdf\",\n    ...     original_filename=\"document.pdf\",\n    ...     file_path=\"uploads/projects/proj-id/doc_12345.pdf\",\n    ...     file_size=1024000,\n    ...     mime_type=\"application/pdf\",\n    ...     uploaded_by=user_id,\n    ...     uploaded_at=datetime.now(UTC),\n    ...     message=\"File uploaded successfully\"\n    ... )"
      },
      "ProjectMemberBulkCreate": {
        "properties": {
          "members": {
            "items": {
              "$ref": "#/components/schemas/ProjectMemberCreate"
            },
            "type": "array",
            "maxItems": 100,
            "minItems": 1,
            "title": "Members",
            "description": "追加するメンバーのリスト（最大100件）"
          }
        },
        "type": "object",
        "required": [
          "members"
        ],
        "title": "ProjectMemberBulkCreate",
        "description": "プロジェクトメンバー複数人追加リクエストスキーマ。\n\nプロジェクトに複数のメンバーを一括追加する際に使用します。\n\nAttributes:\n    members (list[ProjectMemberCreate]): 追加するメンバーのリスト\n\nExample:\n    >>> bulk_create = ProjectMemberBulkCreate(\n    ...     members=[\n    ...         ProjectMemberCreate(user_id=uuid.uuid4(), role=ProjectRole.MEMBER),\n    ...         ProjectMemberCreate(user_id=uuid.uuid4(), role=ProjectRole.VIEWER)\n    ...     ]\n    ... )\n\nNote:\n    - 各メンバーは個別にバリデーションされます\n    - 重複するメンバーは追加されません\n    - 一部失敗しても成功したメンバーは追加されます"
      },
      "ProjectMemberBulkError": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "失敗したユーザーID"
          },
          "role": {
            "$ref": "#/components/schemas/ProjectRole",
            "description": "指定されたロール"
          },
          "error": {
            "type": "string",
            "title": "Error",
            "description": "エラーメッセージ"
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "role",
          "error"
        ],
        "title": "ProjectMemberBulkError",
        "description": "メンバー追加失敗情報スキーマ。\n\n複数人登録時の個別の失敗情報を表します。\n\nAttributes:\n    user_id (uuid.UUID): 失敗したユーザーID\n    role (ProjectRole): 指定されたロール\n    error (str): エラーメッセージ\n\nExample:\n    >>> error = ProjectMemberBulkError(\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.MEMBER,\n    ...     error=\"ユーザーは既にプロジェクトのメンバーです\"\n    ... )"
      },
      "ProjectMemberBulkResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          },
          "added": {
            "items": {
              "$ref": "#/components/schemas/ProjectMemberDetailResponse"
            },
            "type": "array",
            "title": "Added",
            "description": "追加に成功したメンバーリスト"
          },
          "failed": {
            "items": {
              "$ref": "#/components/schemas/ProjectMemberBulkError"
            },
            "type": "array",
            "title": "Failed",
            "description": "追加に失敗したメンバーリスト"
          },
          "total_requested": {
            "type": "integer",
            "title": "Total Requested",
            "description": "リクエストされたメンバー数"
          },
          "total_added": {
            "type": "integer",
            "title": "Total Added",
            "description": "追加に成功したメンバー数"
          },
          "total_failed": {
            "type": "integer",
            "title": "Total Failed",
            "description": "追加に失敗したメンバー数"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "added",
          "failed",
          "total_requested",
          "total_added",
          "total_failed"
        ],
        "title": "ProjectMemberBulkResponse",
        "description": "プロジェクトメンバー複数人追加レスポンススキーマ。\n\n複数人登録APIのレスポンス形式を定義します。\n\nAttributes:\n    project_id (uuid.UUID): プロジェクトID\n    added (list[ProjectMemberDetailResponse]): 追加に成功したメンバーリスト\n    failed (list[ProjectMemberBulkError]): 追加に失敗したメンバーリスト\n    total_requested (int): リクエストされたメンバー数\n    total_added (int): 追加に成功したメンバー数\n    total_failed (int): 追加に失敗したメンバー数\n\nExample:\n    >>> response = ProjectMemberBulkResponse(\n    ...     project_id=uuid.uuid4(),\n    ...     added=[member1, member2],\n    ...     failed=[error1],\n    ...     total_requested=3,\n    ...     total_added=2,\n    ...     total_failed=1\n    ... )\n\nNote:\n    - 一部失敗しても成功したメンバーは追加されます\n    - failed リストで失敗理由を確認できます"
      },
      "ProjectMemberCreate": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "追加するユーザーのID"
          },
          "role": {
            "$ref": "#/components/schemas/ProjectRole",
            "description": "プロジェクトロール（project_manager/project_moderator/member/viewer）",
            "default": "member"
          }
        },
        "type": "object",
        "required": [
          "user_id"
        ],
        "title": "ProjectMemberCreate",
        "description": "プロジェクトメンバー追加リクエストスキーマ。\n\nプロジェクトに新しいメンバーを追加する際に使用します。\n\nAttributes:\n    user_id (uuid.UUID): 追加するユーザーのID\n    role (ProjectRole): プロジェクトロール（デフォルト: MEMBER）\n\nExample:\n    >>> member = ProjectMemberCreate(\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.MEMBER\n    ... )\n\nNote:\n    - PROJECT_MANAGER 権限が必要\n    - 重複するメンバーは追加できません"
      },
      "ProjectMemberDetailResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "メンバーシップID（UUID）"
          },
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "ユーザーID"
          },
          "role": {
            "$ref": "#/components/schemas/ProjectRole",
            "description": "プロジェクトロール（project_manager/project_moderator/member/viewer）"
          },
          "joined_at": {
            "type": "string",
            "format": "date-time",
            "title": "Joined At",
            "description": "参加日時"
          },
          "added_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Added By",
            "description": "追加者のユーザーID"
          },
          "user": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/UserResponse"
              },
              {
                "type": "null"
              }
            ],
            "description": "ユーザー情報"
          }
        },
        "type": "object",
        "required": [
          "id",
          "project_id",
          "user_id",
          "role",
          "joined_at"
        ],
        "title": "ProjectMemberDetailResponse",
        "description": "ユーザー情報付きプロジェクトメンバーレスポンススキーマ。\n\nメンバー情報とユーザー情報を含むレスポンスに使用します。\n\nAttributes:\n    id (uuid.UUID): メンバーシップID（ProjectMemberResponseから継承）\n    project_id (uuid.UUID): プロジェクトID（ProjectMemberResponseから継承）\n    user_id (uuid.UUID): ユーザーID（ProjectMemberResponseから継承）\n    role (ProjectRole): プロジェクトロール（ProjectMemberResponseから継承）\n    joined_at (datetime): 参加日時（ProjectMemberResponseから継承）\n    added_by (uuid.UUID | None): 追加者のユーザーID（ProjectMemberResponseから継承）\n    user (UserResponse | None): ユーザー情報（ネストされたオブジェクト）\n\nExample:\n    >>> member = ProjectMemberDetailResponse(\n    ...     id=uuid.uuid4(),\n    ...     project_id=uuid.uuid4(),\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.MEMBER,\n    ...     joined_at=datetime.now(UTC),\n    ...     added_by=uuid.uuid4(),\n    ...     user=UserResponse(...)\n    ... )\n\nNote:\n    - ユーザー情報を含むため、N+1クエリ対策が必要です\n    - selectinload を使用してユーザー情報を事前ロードしてください"
      },
      "ProjectMemberListResponse": {
        "properties": {
          "members": {
            "items": {
              "$ref": "#/components/schemas/ProjectMemberDetailResponse"
            },
            "type": "array",
            "title": "Members",
            "description": "メンバーリスト"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "総件数"
          },
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          }
        },
        "type": "object",
        "required": [
          "members",
          "total",
          "project_id"
        ],
        "title": "ProjectMemberListResponse",
        "description": "プロジェクトメンバー一覧レスポンススキーマ。\n\nメンバー一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    members (list[ProjectMemberDetailResponse]): メンバーリスト\n    total (int): 総件数\n    project_id (uuid.UUID): プロジェクトID\n\nExample:\n    >>> response = ProjectMemberListResponse(\n    ...     members=[member1, member2, member3],\n    ...     total=15,\n    ...     project_id=uuid.uuid4()\n    ... )\n\nNote:\n    - ページネーション情報を含みます\n    - total は全体の件数"
      },
      "ProjectMemberUpdate": {
        "properties": {
          "role": {
            "$ref": "#/components/schemas/ProjectRole",
            "description": "新しいプロジェクトロール"
          }
        },
        "type": "object",
        "required": [
          "role"
        ],
        "title": "ProjectMemberUpdate",
        "description": "プロジェクトメンバーロール更新リクエストスキーマ。\n\nメンバーのロールを更新する際に使用します。\n\nAttributes:\n    role (ProjectRole): 新しいプロジェクトロール\n\nExample:\n    >>> update = ProjectMemberUpdate(role=ProjectRole.MEMBER)\n\nNote:\n    - PROJECT_MANAGER 権限が必要\n    - 最後の PROJECT_MANAGER は降格できません"
      },
      "ProjectResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "プロジェクト名"
          },
          "code": {
            "type": "string",
            "maxLength": 50,
            "minLength": 1,
            "title": "Code",
            "description": "プロジェクトコード（一意識別子）"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "プロジェクト説明"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "プロジェクトID（UUID）"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "アクティブフラグ"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "作成者のユーザーID"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時"
          }
        },
        "type": "object",
        "required": [
          "name",
          "code",
          "id",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "ProjectResponse",
        "description": "プロジェクト情報レスポンススキーマ。\n\nAPIレスポンスでプロジェクト情報を返す際に使用します。\n\nAttributes:\n    id (uuid.UUID): プロジェクトID（UUID）\n    name (str): プロジェクト名（ProjectBaseから継承）\n    code (str): プロジェクトコード（ProjectBaseから継承）\n    description (str | None): プロジェクト説明（ProjectBaseから継承）\n    is_active (bool): アクティブフラグ\n    created_by (uuid.UUID | None): 作成者のユーザーID\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n\nExample:\n    >>> from datetime import UTC\n    >>> project = ProjectResponse(\n    ...     id=uuid.uuid4(),\n    ...     name=\"AI Project\",\n    ...     code=\"AI-001\",\n    ...     description=\"AI development project\",\n    ...     is_active=True,\n    ...     created_by=uuid.uuid4(),\n    ...     created_at=datetime.now(UTC),\n    ...     updated_at=datetime.now(UTC)\n    ... )\n\nNote:\n    - from_attributesを有効にしているため、ORMモデルから直接変換可能です"
      },
      "ProjectRole": {
        "type": "string",
        "enum": [
          "project_manager",
          "project_moderator",
          "member",
          "viewer"
        ],
        "title": "ProjectRole",
        "description": "プロジェクトレベルのロール定義。\n\nAttributes:\n    PROJECT_MANAGER: プロジェクトマネージャー（最高権限）\n        - プロジェクト削除\n        - プロジェクト設定変更\n        - メンバー追加・削除・ロール変更（全ロール）\n        - ファイルのアップロード・ダウンロード・削除\n    PROJECT_MODERATOR: 権限管理者（メンバー管理担当）\n        - メンバー追加・削除\n        - ロール変更（VIEWER/MEMBER/PROJECT_MODERATORのみ）\n        - ファイルのアップロード・ダウンロード\n        - プロジェクト内の編集\n    MEMBER: 一般メンバー（編集可能）\n        - ファイルのアップロード・ダウンロード\n        - プロジェクト内の編集\n    VIEWER: 閲覧者（閲覧のみ）\n        - ファイルの閲覧・ダウンロードのみ"
      },
      "ProjectUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "プロジェクト名"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "プロジェクト説明"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "アクティブフラグ"
          }
        },
        "type": "object",
        "title": "ProjectUpdate",
        "description": "プロジェクト更新リクエストスキーマ。\n\nプロジェクト情報の更新時に使用します。\n\nAttributes:\n    name (str | None): プロジェクト名（オプション）\n    description (str | None): プロジェクト説明（オプション）\n    is_active (bool | None): アクティブフラグ（オプション）\n\nExample:\n    >>> update = ProjectUpdate(\n    ...     name=\"Updated Project Name\",\n    ...     description=\"Updated description\"\n    ... )\n\nNote:\n    - すべてのフィールドはオプションです\n    - code は変更できません（一意識別子のため）"
      },
      "SampleAPIKeyResponse": {
        "properties": {
          "api_key": {
            "type": "string",
            "title": "Api Key",
            "description": "生成されたAPIキー"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "警告メッセージ"
          }
        },
        "type": "object",
        "required": [
          "api_key",
          "created_at",
          "message"
        ],
        "title": "SampleAPIKeyResponse",
        "description": "APIキーレスポンススキーマ。"
      },
      "SampleChatRequest": {
        "properties": {
          "message": {
            "type": "string",
            "maxLength": 10000,
            "minLength": 1,
            "title": "Message",
            "description": "ユーザーメッセージ"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "セッション識別子（新規の場合は省略）"
          },
          "context": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context",
            "description": "追加コンテキスト情報"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "SampleChatRequest",
        "description": "チャットリクエストスキーマ。"
      },
      "SampleChatResponse": {
        "properties": {
          "response": {
            "type": "string",
            "title": "Response",
            "description": "エージェントの応答メッセージ"
          },
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "description": "セッション識別子"
          },
          "tokens_used": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Tokens Used",
            "description": "使用されたトークン数"
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Model",
            "description": "使用されたモデル名"
          }
        },
        "type": "object",
        "required": [
          "response",
          "session_id"
        ],
        "title": "SampleChatResponse",
        "description": "チャットレスポンススキーマ。"
      },
      "SampleDeleteResponse": {
        "properties": {
          "message": {
            "type": "string",
            "title": "Message",
            "description": "削除成功メッセージ"
          }
        },
        "type": "object",
        "required": [
          "message"
        ],
        "title": "SampleDeleteResponse",
        "description": "削除レスポンススキーマ。"
      },
      "SampleFileDeleteResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id",
            "description": "削除されたファイルのID"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "削除成功メッセージ"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "message"
        ],
        "title": "SampleFileDeleteResponse",
        "description": "ファイル削除レスポンススキーマ。"
      },
      "SampleFileListResponse": {
        "properties": {
          "files": {
            "items": {
              "$ref": "#/components/schemas/SampleFileResponse"
            },
            "type": "array",
            "title": "Files",
            "description": "ファイルのリスト"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "総ファイル数"
          }
        },
        "type": "object",
        "required": [
          "files",
          "total"
        ],
        "title": "SampleFileListResponse",
        "description": "ファイル一覧レスポンススキーマ。"
      },
      "SampleFileResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id",
            "description": "ファイル識別子"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "ファイル名"
          },
          "size": {
            "type": "integer",
            "title": "Size",
            "description": "ファイルサイズ（バイト）"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "ファイルのMIMEタイプ"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "アップロード日時"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "filename",
          "size",
          "content_type",
          "created_at"
        ],
        "title": "SampleFileResponse",
        "description": "ファイル情報レスポンススキーマ。"
      },
      "SampleFileUploadResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "title": "File Id",
            "description": "一意のファイル識別子"
          },
          "filename": {
            "type": "string",
            "title": "Filename",
            "description": "元のファイル名"
          },
          "size": {
            "type": "integer",
            "title": "Size",
            "description": "ファイルサイズ（バイト）"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "ファイルのMIMEタイプ"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "アップロード成功メッセージ"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "filename",
          "size",
          "content_type",
          "message"
        ],
        "title": "SampleFileUploadResponse",
        "description": "ファイルアップロードレスポンススキーマ。"
      },
      "SampleMessageResponse": {
        "properties": {
          "role": {
            "type": "string",
            "title": "Role",
            "description": "メッセージの役割（user/assistant/system）"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "メッセージの内容"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "メッセージ作成日時"
          }
        },
        "type": "object",
        "required": [
          "role",
          "content",
          "timestamp"
        ],
        "title": "SampleMessageResponse",
        "description": "メッセージレスポンススキーマ。"
      },
      "SampleRefreshTokenRequest": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "リフレッシュトークン"
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "SampleRefreshTokenRequest",
        "description": "リフレッシュトークンリクエストスキーマ。"
      },
      "SampleSessionCreateRequest": {
        "properties": {
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "セッションのメタデータ"
          }
        },
        "type": "object",
        "title": "SampleSessionCreateRequest",
        "description": "セッション作成リクエストスキーマ。"
      },
      "SampleSessionListResponse": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/SampleSessionResponse"
            },
            "type": "array",
            "title": "Sessions",
            "description": "セッションのリスト"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "総セッション数"
          }
        },
        "type": "object",
        "required": [
          "sessions",
          "total"
        ],
        "title": "SampleSessionListResponse",
        "description": "セッション一覧レスポンススキーマ。"
      },
      "SampleSessionResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "description": "セッション識別子"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "セッション作成日時"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "最終更新日時"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/SampleMessageResponse"
            },
            "type": "array",
            "title": "Messages",
            "description": "メッセージのリスト"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "セッションのメタデータ"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "created_at",
          "updated_at",
          "messages"
        ],
        "title": "SampleSessionResponse",
        "description": "セッションレスポンススキーマ。"
      },
      "SampleSessionUpdateRequest": {
        "properties": {
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "更新するメタデータ"
          }
        },
        "type": "object",
        "title": "SampleSessionUpdateRequest",
        "description": "セッション更新リクエストスキーマ。"
      },
      "SampleToken": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWTアクセストークン"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "トークンタイプ",
            "default": "bearer"
          }
        },
        "type": "object",
        "required": [
          "access_token"
        ],
        "title": "SampleToken",
        "description": "JWTトークンレスポンススキーマ。\n\nログイン成功時に返されるJWTアクセストークンを定義します。\n\nAttributes:\n    access_token (str): JWTアクセストークン\n        - HS256アルゴリズムで署名済み\n        - 有効期限付き（通常30分）\n    token_type (str): トークンタイプ\n        - デフォルト: \"bearer\"\n        - HTTPヘッダー: Authorization: Bearer <access_token>\n\nExample:\n    >>> token = SampleToken(\n    ...     access_token=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n    ...     token_type=\"bearer\"\n    ... )\n\nNote:\n    - クライアントはaccess_tokenを安全に保存する必要があります\n    - トークンはAuthorizationヘッダーに含めてリクエストします\n    - POST /users/login エンドポイントのレスポンスとして使用されます"
      },
      "SampleTokenWithRefresh": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWTアクセストークン"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWTリフレッシュトークン"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "トークンタイプ",
            "default": "bearer"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token"
        ],
        "title": "SampleTokenWithRefresh",
        "description": "アクセストークンとリフレッシュトークンのレスポンススキーマ。"
      },
      "SampleUserCreate": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "ユーザーメールアドレス"
          },
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "ユーザー名"
          },
          "password": {
            "type": "string",
            "maxLength": 100,
            "minLength": 8,
            "title": "Password",
            "description": "ユーザーパスワード"
          }
        },
        "type": "object",
        "required": [
          "email",
          "username",
          "password"
        ],
        "title": "SampleUserCreate",
        "description": "新規ユーザー登録リクエストスキーマ。\n\nユーザー登録時のリクエストボディを定義します。\n\nAttributes:\n    email (EmailStr): ユーザーメールアドレス（SampleUserBaseから継承）\n    username (str): ユーザー名（SampleUserBaseから継承）\n    password (str): ユーザーパスワード\n        - 最小8文字、最大100文字\n        - 数字と大文字を含む必要があります\n\nExample:\n    >>> user = SampleUserCreate(\n    ...     email=\"john@example.com\",\n    ...     username=\"johndoe\",\n    ...     password=\"SecurePass123!\"\n    ... )\n\nNote:\n    - passwordは平文で送信されますが、サーバー側でbcryptハッシュ化されます\n    - HTTPS必須（平文パスワード送信のため）\n    - POST /users/register エンドポイントで使用されます"
      },
      "SampleUserLogin": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "ユーザーメールアドレス"
          },
          "password": {
            "type": "string",
            "title": "Password",
            "description": "ユーザーパスワード"
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "SampleUserLogin",
        "description": "ユーザーログインリクエストスキーマ。\n\nログイン時のリクエストボディを定義します。\n\nAttributes:\n    email (EmailStr): ユーザーメールアドレス\n    password (str): ユーザーパスワード\n\nExample:\n    >>> login_data = SampleUserLogin(\n    ...     email=\"john@example.com\",\n    ...     password=\"SecurePass123!\"\n    ... )\n\nNote:\n    - HTTPS必須（平文パスワード送信のため）\n    - POST /users/login エンドポイントで使用されます\n    - 認証成功時はSampleToken型のレスポンスが返されます"
      },
      "SampleUserResponse": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "ユーザーメールアドレス"
          },
          "username": {
            "type": "string",
            "maxLength": 50,
            "minLength": 3,
            "title": "Username",
            "description": "ユーザー名"
          },
          "id": {
            "type": "integer",
            "title": "Id",
            "description": "ユーザーID"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "ユーザーがアクティブかどうか"
          },
          "is_superuser": {
            "type": "boolean",
            "title": "Is Superuser",
            "description": "ユーザーがスーパーユーザーかどうか",
            "default": false
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "ユーザー作成時刻"
          }
        },
        "type": "object",
        "required": [
          "email",
          "username",
          "id",
          "is_active",
          "created_at"
        ],
        "title": "SampleUserResponse",
        "description": "ユーザー情報レスポンススキーマ。\n\nユーザー情報取得時のレスポンスボディを定義します。\n\nAttributes:\n    id (int): ユーザーID（プライマリキー）\n    email (EmailStr): ユーザーメールアドレス（SampleUserBaseから継承）\n    username (str): ユーザー名（SampleUserBaseから継承）\n    is_active (bool): ユーザーがアクティブかどうか\n        - False: アカウント無効化\n    is_superuser (bool): 管理者権限フラグ\n        - デフォルト: False\n    created_at (datetime): ユーザー作成日時（UTC）\n\nExample:\n    >>> from datetime import datetime, UTC\n    >>> user = SampleUserResponse(\n    ...     id=1,\n    ...     email=\"john@example.com\",\n    ...     username=\"johndoe\",\n    ...     is_active=True,\n    ...     is_superuser=False,\n    ...     created_at=datetime.now(UTC)\n    ... )\n\nNote:\n    - パスワードは含まれません（セキュリティ）\n    - GET /users/me エンドポイント等で使用されます\n    - model_config によりORMモデルから直接変換可能です"
      },
      "UserListResponse": {
        "properties": {
          "users": {
            "items": {
              "$ref": "#/components/schemas/UserResponse"
            },
            "type": "array",
            "title": "Users",
            "description": "ユーザーリスト"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "総件数"
          },
          "skip": {
            "type": "integer",
            "title": "Skip",
            "description": "スキップ数（オフセット）"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "description": "取得件数"
          }
        },
        "type": "object",
        "required": [
          "users",
          "total",
          "skip",
          "limit"
        ],
        "title": "UserListResponse",
        "description": "ユーザー一覧レスポンススキーマ。\n\nユーザー一覧APIのレスポンス形式を定義します。\n\nAttributes:\n    users (list[UserResponse]): ユーザーリスト\n    total (int): 総件数\n    skip (int): スキップ数（オフセット）\n    limit (int): 取得件数\n\nExample:\n    >>> response = UserListResponse(\n    ...     users=[user1, user2, user3],\n    ...     total=100,\n    ...     skip=0,\n    ...     limit=10\n    ... )\n\nNote:\n    - ページネーション情報を含みます\n    - total は全体の件数、skip/limit はページング パラメータ"
      },
      "UserResponse": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "ユーザーメールアドレス"
          },
          "display_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "表示名"
          },
          "roles": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Roles",
            "description": "システムレベルのロール"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id",
            "description": "ユーザーID（UUID）"
          },
          "azure_oid": {
            "type": "string",
            "title": "Azure Oid",
            "description": "Azure AD Object ID"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "アクティブフラグ"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "作成日時"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "更新日時"
          },
          "last_login": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login",
            "description": "最終ログイン日時"
          }
        },
        "type": "object",
        "required": [
          "email",
          "id",
          "azure_oid",
          "is_active",
          "created_at",
          "updated_at"
        ],
        "title": "UserResponse",
        "description": "ユーザー情報レスポンススキーマ。\n\nAPIレスポンスでユーザー情報を返す際に使用します。\n\nAttributes:\n    id (uuid.UUID): ユーザーID（UUID）\n    azure_oid (str): Azure AD Object ID\n    email (EmailStr): ユーザーメールアドレス（UserBaseから継承）\n    display_name (str | None): 表示名（UserBaseから継承）\n    roles (list[str]): システムレベルのロール（UserBaseから継承）\n    is_active (bool): アクティブフラグ\n    created_at (datetime): 作成日時\n    updated_at (datetime): 更新日時\n    last_login (datetime | None): 最終ログイン日時\n\nExample:\n    >>> from datetime import UTC\n    >>> user = UserResponse(\n    ...     id=uuid.uuid4(),\n    ...     azure_oid=\"azure-oid-12345\",\n    ...     email=\"john@company.com\",\n    ...     display_name=\"John Doe\",\n    ...     roles=[\"User\"],\n    ...     is_active=True,\n    ...     created_at=datetime.now(UTC),\n    ...     updated_at=datetime.now(UTC),\n    ...     last_login=None\n    ... )\n\nNote:\n    - from_attributesを有効にしているため、ORMモデルから直接変換可能です\n    - パスワード情報は含まれません（Azure AD認証のため）"
      },
      "UserRoleResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "format": "uuid",
            "title": "Project Id",
            "description": "プロジェクトID"
          },
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "ユーザーID"
          },
          "role": {
            "$ref": "#/components/schemas/ProjectRole",
            "description": "プロジェクトロール"
          },
          "is_owner": {
            "type": "boolean",
            "title": "Is Owner",
            "description": "PROJECT_MANAGER ロールかどうか（後方互換性のため維持）"
          },
          "is_admin": {
            "type": "boolean",
            "title": "Is Admin",
            "description": "PROJECT_MANAGER ロールかどうか（後方互換性のため維持）"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "user_id",
          "role",
          "is_owner",
          "is_admin"
        ],
        "title": "UserRoleResponse",
        "description": "ユーザーのプロジェクトロールレスポンススキーマ。\n\n現在のユーザーのロール情報を返す際に使用します。\n\nAttributes:\n    project_id (uuid.UUID): プロジェクトID\n    user_id (uuid.UUID): ユーザーID\n    role (ProjectRole): プロジェクトロール\n    is_owner (bool): PROJECT_MANAGER ロールかどうか（後方互換性のため維持）\n    is_admin (bool): PROJECT_MANAGER ロールかどうか（後方互換性のため維持）\n\nExample:\n    >>> role_info = UserRoleResponse(\n    ...     project_id=uuid.uuid4(),\n    ...     user_id=uuid.uuid4(),\n    ...     role=ProjectRole.PROJECT_MANAGER,\n    ...     is_owner=True,\n    ...     is_admin=True\n    ... )\n\nNote:\n    - 権限チェックに使用されます\n    - is_owner: PROJECT_MANAGER ロールの場合 True（後方互換性のため維持）\n    - is_admin: PROJECT_MANAGER ロールの場合 True（後方互換性のため維持）"
      },
      "UserUpdate": {
        "properties": {
          "display_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name",
            "description": "表示名"
          },
          "roles": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Roles",
            "description": "システムレベルのロール"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "アクティブフラグ"
          }
        },
        "type": "object",
        "title": "UserUpdate",
        "description": "ユーザー情報更新リクエストスキーマ。\n\nユーザー情報の更新時に使用します。\n\nAttributes:\n    display_name (str | None): 表示名（オプション）\n    roles (list[str] | None): システムレベルのロール（オプション）\n    is_active (bool | None): アクティブフラグ（オプション）\n\nExample:\n    >>> update = UserUpdate(\n    ...     display_name=\"John Smith\",\n    ...     roles=[\"SystemAdmin\", \"User\"],\n    ...     is_active=True\n    ... )\n\nNote:\n    - すべてのフィールドはオプションです\n    - 指定されたフィールドのみが更新されます\n    - email と azure_oid は更新できません"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    },
    "securitySchemes": {
      "HTTPBearer": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}